2007-07-27  Janne Blomqvist  <jb@gcc.gnu.org>

	* trans-decl.c (gfc_build_builtin_function_decls): Use existing
	gfc_array_index_type rather than creating another typenode for
	gfc_index_integer_kind.

2007-07-27  Janne Blomqvist  <jb@gcc.gnu.org>

	* trans-io.c (gfc_build_io_library_fndecls): Change to use
	gfc_array_index_type for array descriptor triplets instead of
	gfc_int4_type_node.

2007-07-26  Steven G. Kargl  <kargl@gcc.gnu.org>

	PR fortran/32899
	* resolve.c (resolve_operator): Add INTRINSIC_EQ_OS comparison.

2007-07-27  Jerry DeLisle  <jvdelisle@gcc.gnu.org>
	    Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/32760
	* primary.c (match_variable): Do not call gfc_add_flavor if symbol has
	attribute of ACCESS_PUBLIC or ACCESS_PRIVATE already marked.

2007-07-27  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/32035
	* trans-stmt.c (gfc_trans_character_select): Replace the
	mechanism with labels by a SWITCH_EXPR.
	* trans-decl.c (gfc_build_builtin_function_decls): Change
	return type for select_string.

2007-07-27  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/32903
	* trans-decl.c (gfc_trans_deferred_vars): Set intent(out)
	derived types as referenced, if they have the the default
	initializer set.

2007-07-25  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* gfortran.h (generate_isocbinding_symbol): Constify.
	* symbol.c (gen_special_c_interop_ptr, gen_cptr_param,
	generate_isocbinding_symbol): Likewise.

2007-07-24  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31205
	PR fortran/32842
	* trans-expr.c (gfc_conv_function_call): Remove the default
	initialization of intent(out) derived types.
	* symbol.c (gfc_lval_expr_from_sym): New function.
	* matchexp.c (gfc_get_parentheses): Return argument, if it is
	character and posseses a ref.
	* gfortran.h : Add prototype for gfc_lval_expr_from_sym.
	* resolve.c (has_default_initializer): Move higher up in file.
	(resolve_code): On detecting an interface assignment, check
	if the rhs and the lhs are the same symbol.  If this is so,
	enclose the rhs in parenetheses to generate a temporary and
	prevent any possible aliasing.
	(apply_default_init): Remove code making the lval and call
	gfc_lval_expr_from_sym instead.
	(resolve_operator): Give a parentheses expression a type-
	spec if it has no type.
	* trans-decl.c (gfc_trans_deferred_vars): Apply the a default
	initializer, if any, to an intent(out) derived type, using
	gfc_lval_expr_from_sym and gfc_trans_assignment.  Check if
	the dummy is present.

2007-07-24  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/32867
	* expr.c (check_init_expr): Simplify matched functions.

2007-07-24  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/32778
	* intrinsic.c (add_sym): Do not exclude any symbols, even if not part
	of the selected standard.
	(make generic): Likewise.
	(make alias): Likewise, set standard the alias belongs to.
	(add_subroutines): Call make_noreturn unconditionally.
	(check_intrinsic_standard): Change return value to try.
	(gfc_intrinsic_func_interface): Check return value of above function.
	(gfc_intrinsic_sub_interface): Likewise.

2007-07-24  Thomas Koenig  <tkoenig@gcc.gnu.org>

	PR fortran/30814
	* trans-decl.c (generate_function_code):  Add argument
	for flag_bounds_check to the array for set_options.
	* invoke.texi (-fbounds-check): Document new libarary run-time
	behaviour.

2007-07-23  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/25104
	PR fortran/31639
	* expr.c (check_transformational): Reject valid transformational
	intrinsics to avoid ICE.
	(check_inquiry): Report error for assumed character lengths for
	all supported standards.
	(check_init_expr): Whitespace fix.

2007-07-23  Christopher D. Rickett  <crickett@lanl.gov>

	PR fortran/32797
	PR fortran/32800
	* decl.c (verify_bind_c_sym): Use the result symbol for functions
	with a result clause.  Warn if implicitly typed.  Verify the type
	and rank of the SHAPE argument, if given.
	* resolve.c (gfc_iso_c_sub_interface): Use gfc_procedure_use to
	check the actual args against the formal, sorting them if
	necessary.
	* symbol.c (gen_shape_param): Initialize type of SHAPE param to
	BT_VOID.

2007-07-23  Christopher D. Rickett  <crickett@lanl.gov>

	PR fortran/32732
	* trans-decl.c (generate_local_decl): Convert the TREE_TYPE for by
	value character dummy args of BIND(C) procedures.
	* trans-expr.c (gfc_conv_variable): Do not build address
	expression for BT_CHARACTER dummy args.

2007-07-23  Christopher D. Rickett  <crickett@lanl.gov>
	    Tobias Burnus  <burnus@net-b.de>

	PR fortran/32600
	* trans-expr.c (gfc_conv_function_call): Handle c_funloc.
	* trans-types.c: Add pfunc_type_node.
	(gfc_init_types,gfc_typenode_for_spec): Use it.
	* resolve.c (gfc_iso_c_func_interface): Fix whitespace and
	improve error message.

2007-07-22  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/32710
	* parse.c (gfc_fixup_sibling_symbols): No replacement of symbols if
	the current is a namelist.

2007-07-22  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/29962
	PR fortran/31253
	PR fortran/31265
	PR fortran/31639
	* gfortran.h (gfc_intrinsic_sym): Changed members elemental, pure,
	generic, specific, actual_ok, noreturn into bits of a bitfield, 
	added bits for inquiry, transformational, conversion.
	* check.c (non_init_transformational): Removed, removed all callers.
	* intrinsic.c (enum class): New.
	(add_sym*): Replaced argument elemetal by enum class. Changed all
	callers.
	(add_functions): Assign appropriate classes to intrinsic functions.
	(add_subroutines): Assign appropriate classes to intrinsic subroutines.
	(add_conv): Set conversion attribute.
	(gfc_init_expr_extensions): Removed, removed all callers.
	(gfc_intrinsic_func_interface): Reimplemented check for non-standard
	initializatione expressions.
	* expr.c (check_specification_function): New.
	(gfc_is_constant_expr): Added check for specification functions.
	(check_init_expr_arguments): New.
	(check_inquiry): Changed return value to MATCH, added checks for
	inquiry functions defined by F2003.
	(check_transformational): New.
	(check_null): New.
	(check_elemental): New.
	(check_conversion): New.
	(check_init_expr): Call new check functions, add more specific error
	messages.

2007-07-21  Christopher D. Rickett  <crickett@lanl.gov>

	PR fortran/32627
	* resolve.c (set_name_and_label): Set kind number for character
	version of c_f_pointer.
	(gfc_iso_c_sub_interface): Set the kind of the SHAPE formal arg to
	that of the actual SHAPE arg.
	* symbol.c (gen_shape_param): Initialize kind for SHAPE arg.

2007-07-21  Christopher D. Rickett  <crickett@lanl.gov>

	PR fortran/32801
	* symbol.c (generate_isocbinding_symbol): Remove unnecessary
	conditional.

	PR fortran/32804
	* resolve.c (gfc_iso_c_func_interface): Reject assumed-shape and
	deferred-shape arrays as args to C_LOC.  Fix bug in testing
	character args to C_LOC.

2007-07-21  Lee Millward  <lee.millward@gmail.com>

	PR fortran/32823
	* trans-intrinsic.c (gfc_conv_intrinsic_int): Evaluate all
	arguments passed, not just the first one. Adjust code to 
	refer to "args[0]" instead of "arg" as a result.
	
2007-07-19  Christopher D. Rickett  <crickett@lanl.gov>

	PR fortran/32600
	* trans-expr.c (gfc_conv_function_call): Inline C_LOC.

2007-07-18  Christopher D. Rickett  <crickett@lanl.gov>

	PR fortran/32801
	* symbol.c (generate_isocbinding_symbol): Fix bug where
	ISOCBINDING_FUNPTR was generated for C_LOC instead of the needed
	ISOCBINDING_PTR.

2007-07-17  Janus Weil  <jaydub66@gmail.com> 

	PR fortran/32535
	* resolve.c (resolve_fl_namelist): Check for namelist private 
	components in contained subprograms.

2007-07-17  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31320
	PR fortran/32665
	* trans-expr.c (gfc_trans_subcomponent_assign): Ensure that
	renormalization unity base is done independently of existing
	lbound value.
	(gfc_trans_scalar_assign): If rhs is not a variable, put
	lse->pre after rse->pre to ensure that de-allocation of lhs
	occurs after evaluation of rhs.

2007-07-16  Lee Millward  <lee.millward@gmail.com>

	PR fortran/32222
	PR fortran/32238
	PR fortran/32242	
	* trans-intrinsic.c (gfc_conv_intrinsic_function_args): Adjust
	to operate on a stack allocated array for the intrinsic arguments
	instead of creating a TREE_LIST. Add two new parameters for the
	array and the number of elements. Update all callers to allocate
	an array of the correct length to pass in. Update comment.
	(gfc_intrinsic_argument_list_length): New function.
	(gfc_conv_intrinsic_conversion): Call it.
	(gfc_conv_intrinsic_mnimax): Likewise.
	(gfc_conv_intrinsic_merge): Likewise.
	(gfc_conv_intrinsic_lib_function): Call it. Use new CALL_EXPR
	constructors.
	(gfc_conv_intrinsic_cmplx): Likewise.
	(gfc_conv_intrinsic_ctime): Likewise.
	(gfc_covn_intrinsic_fdate): Likewise.
	(gfc_conv_intrinsic_ttynam): Likewise.
	(gfc_conv_intrinsic_ishftc): Likewise.
	(gfc_conv_intrinsic_index): Likewise.
	(gfc_conv_intrinsic_scan): Likewise.
	(gfc_conv_intrinsic_verify): Likewise.
	(gfc_conv_intrinsic_trim): Likewise.
	(gfc_conv_intrinsic_aint): Use new CALL_EXPR constructors.
	(gfc_conv_intrinsic_exponent): Likewise.
	(gfc_conv_intrinsic_bound): Likewise.
	(gfc_conv_intrinsic_abs): Likewise.
	(gfc_conv_intrinsic_mod): Likewise.
	(gfc_conv_intrinsic_sign): Likewise.
	(gfc_conv_intrinsic_len): Likewise.
	(gfc_conv_intrinsic_adjust): Likewise.
	(gfc_conv_intrinsic_si_kind): Likewise. 
	
2007-07-16  Janne Blomqvist  <jb@gcc.gnu.org>

	PR fortran/32748
	* trans-decl.c (gfc_build_builtin_function_decls): Remove
	DECL_IS_MALLOC attribute from internal_realloc, thus reverting
	part of my 2007-07-03 patch.

2007-07-15  Jerry DeLisle  <jvdelisle@gcc.gnu.org>
	    Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/32611
	* gfortran.h (gfc_option_t): Add flag_sign_zero field.
	* lang.opt (-fsign-zero): New option.
	* trans.h: Rename gfor_fndecl_set_std into gfor_fndecl_set_options.
	* trans-decl.c (gfc_build_builtin_function_decls): Build the function
	declaration to pass an array containing the options to be used by the
	runtime library. (gfc_generate_function_code): Build an array that
	contains option values to be passed to the runtime library and the call
	to the function. 
	* options.c (gfc_init_options): Initialize the flag_sign_zero field.
	(gfc_handle_option): Handle the -fsign-zero option.

2007-07-15  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/32036
	* trans-array.c (gfc_conv_array_ref): Only evaluate index once.

2007-07-15  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/32357
	* iresolve.c (gfc_resolve_mvbits): Convert FROMPOS, LEN and TOPOS
	to C int.

2007-07-14  Thomas Koenig  <tkoenig@gcc.gnu.org>

	PR libfortran/32731
	* iresolve.c(gfc_resolve_pack):  A scalar mask has
	to be kind=4, an array mask with kind<4 is converted
	to gfc_default_logical_kind automatically.
	(gfc_resolve_unpack):  Convert mask to gfc_default_lotical_kind
	if it has a kind<4.

2007-07-14  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/32724
	* parse.c (parse_spec): Emit error on unexpected statement
	function.

2007-07-13  Daniel Franke  <franke.daniel@gmail.com>

	* invoke.texi: Unified upper- and lower-case in menus.
	(-w, -W): Removed, documented by gcc.
	* intrinsic.texi: Unified Class-section entries, added
	subroutine/function warning where appropiate.

2007-07-12  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/31639
	* decl.c (gfc_match_suffix): Removed surplus general error that hides
	a more specific message.
	* resolve.c (resolve_fl_variable): Reject illegal initializiers only
	if not already done.
	(resolve_fl_procedure): Added check for initializers of functions.

2007-07-12  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/32704
	* invoke.texi (-static-libgfortran): Document new option.

2007-07-12  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/32634
	PR fortran/32727
	* module.c (write_generic): Restore patch of 2007-07-10 and use
	symbol name if there are no use names. 

2007-07-12  Christopher D. Rickett  <crickett@lanl.gov>

	PR fortran/32599
	* decl.c (verify_c_interop_param): Require character string dummy
	args to BIND(C) procedures to have length 1.
	* resolve.c (resolve_fl_procedure): Modify parameter checking for
	BIND(C) procedures.

	PR fortran/32601
	* resolve.c (gfc_iso_c_func_interface): Verify that a valid
	expression is given as an argument to C_LOC and C_ASSOCIATED.
	* trans-io.c (transfer_expr): Add argument for code block.  Add
	standards check to determine if an error message should be
	reported for printing C_PTR or C_FUNPTR.
	(transfer_array_component): Update arguments to transfer_expr.
	(gfc_trans_transfer): Ditto.

	* symbol.c (gen_cptr_param): Fix whitespace.

2007-07-12  Jakub Jelinek  <jakub@redhat.com>

	PR fortran/32550
	* trans.h (GFC_POINTER_TYPE_P): Define.
	* trans-types.c (gfc_sym_type): Set it for types on attr->sym.pointer.
	* trans-openmp.c (gfc_omp_privatize_by_reference): Return false
	if GFC_POINTER_TYPE_P is set on the type.

2007-07-12  Richard Guenther  <rguenther@suse.de>

	* trans-intrinsic.c (gfc_conv_intrinsic_repeat): Convert
	arguments to gfc_charlen_type_node.
	* trans-io.c (gfc_convert_array_to_string): Convert type
	size to gfc_array_index_type.

2007-07-12  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/32634
	PR fortran/32727
	* module.c: Reverted Paul's patch from 2007-07-10.

2007-07-11  Richard Guenther  <rguenther@suse.de>

	* trans-array.c (gfc_conv_array_parameter): Use correct
	types for comparison.
	* trans-intrinsic.c (gfc_conv_intrinsic_repeat): Use
	correct types for POINTER_PLUS_EXPR.
	* trans-stmt.c (gfc_trans_forall_loop): Use correct type
	for integer one constant.

2007-07-10  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/32157
	* resolve.c (is_external_proc): New function.  Adds test that
	the symbol is not an intrinsic procedure.
	* (resolve_function, resolve_call): Replace logical statements
	with call to is_external_proc.

	PR fortran/32689
	* simplify.c (gfc_simplify_transfer): If mold has rank, the
	result is an array.

	PR fortran/32634
	* module.c (write_generic): Write the local name of the
	interface. 

2007-07-09  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/29459
	* trans-array.c (gfc_trans_array_constructor): Mark offset field
	with TREE_NO_WARNING.
	* trans-decl.c (gfc_build_qualified_array): Mark lbound, ubound,
	stride and size variables with TREE_NO_WARNING.

2007-07-09  Steven G. Kargl  <kargl@gcc.gnu.org>

	* trans-decl.c (set_tree_decl_type_code): Remove function.
	(generate_local_decl): Remove reference to set_tree_decl_type_code.

2007-07-09  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/31129
	* trans-decl.c (generate_local_decl) Emit a warning if an unused
	parameter is found.

2007-07-08  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/29876
	* module.c (gfc_match_use): Do not set an non-existant 
	intrinsic operator if a user-defined operator is found.

2007-07-08  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/24784
	PR fortran/28004
	* trans-decl.c (generate_local_decl): Adjusted warning on unused 
	dummy arguments, tell middle-end not to emit additional warnings.

2007-07-08  Daniel Franke  <franke.daniel@gmail.com>
	    Tobias Schlüter <tobias.schlueter@physik.uni-muenchen.de>

	PR fortran/17711
	* gfortran.h (gfc_intrinsic_op): Added INTRINSIC_EQ_OS,
	INTRINSIC_NE_OS, INTRINSIC_GT_OS, INTRINSIC_GE_OS, 
	INTRINSIC_LT_OS and INTRINSIC_LE_OS.
	* arith.c (eval_intrinsic, eval_type_intrinsic0): Likewise.
	* arith.h (gfc_eq, gfc_ne, gfc_gt, gfc_ge, gfc_lt, gfc_le):
	Added gfc_intrinsic_op as third argument type.
	* dump-parse-tree.c (gfc_show_expr): Account for new enum values.
	* expr.c (simplify_intrinsic_op, check_intrinsic_op): Likewise.
	* interface.c (check_operator_interface): Likewise.
	(gfc_check_interfaces): Added cross-checks for FORTRAN 77 and 
	Fortran 90 style operators using new enum values.
	(gfc_extend_expr): Likewise.
	(gfc_add_interface): Likewise.
	* match.c (intrinsic_operators): Distinguish FORTRAN 77 style
	operators from Fortran 90 style operators using new enum values.
	* matchexp.c (match_level_4): Account for new enum values.
	* module.c (mio_expr): Likewise.
	* resolve.c (resolve_operator): Deal with new enum values, fix
	inconsistent error messages.
	* trans-expr.c (gfc_conv_expr_op): Account for new enum values.

2007-07-08  Tobias Burnus  <burnus@net-b.de>

	PR fortran/32669
	* interface.c (get_expr_storage_size): Properly obtain lower bound.
	(compare_actual_formal): Add space before parenthesis.

2007-07-08  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/25094
	* resolve.c (resolve_fl_procedure): Added check for PRIVATE types 
	in PUBLIC interfaces.

2007-07-07  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/32644
	* decl.c (match_attr_spec): Don't return MATCH_ERROR if comma found and
	gfc_match_bind_c does not return MATCH_YES.

2007-07-07  Kazu Hirata  <kazu@codesourcery.com>

	* decl.c, gfortran.h, interface.c, module.c, resolve.c,
	trans-array.c, trans-decl.c: Fix comment typos.  Follow
	spelling conventions.
	* intrinsic.texi: Fix typos.  Follow spelling conventions.

2007-05-06  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/32633
	* symbol.c (save_status): New.
	* gfortran.h (save_status): Added external declaration.
	(check_conflict): Check for conflicting explicite SAVE statements
	only.
	(gen_special_c_interop_ptr): Use SAVE_EXPLICIT constant.
	* module.c (ab_attribute, attr_bits): Removed enumerator value 
	AB_SAVE for save attribute.
	(mio_symbol_attribute): Import/export the full SAVE status, 
	removed usage of AB_SAVE.
	* dump-parse-tree.c (gfc_show_attr): Dump full SAVE status.
	* decl.c (add_init_expr_to_sym): Set SAVE_IMPLICIT only if not
	already explicit.

2007-07-05  Daniel Franke  <franke.daniel@gmail.com>
	    Tobias Burnus  <burnus@net-b.de>

	PR fortran/32359
	* gfortran.h (symbol_attribute): Change save attribute into an enum.
	* decl.c (add_init_expr_to_sym): Set it to SAVE_IMPLICIT.
	* symbol.c (gfc_add_save): Check for SAVE_EXPLICIT.
	* resolve.c (resolve_fl_variable): Check for SAVE_EXPLICIT.
	(resolve_symbol): Allow OMP threadprivate with
	initialization SAVEd and save_all variable.
	* trans-decl.c (gfc_finish_var_decl): Remove obsolete sym->value check.

2007-07-05  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/32526
	* match.c (gfc_match_call): Check, in all cases, that a symbol
	is neither generic nor a subroutine before trying to add it as
	a subroutine.

	PR fortran/32613
	* match.c (gfc_match_do): Reset the implied_index attribute.

2007-07-04  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/31198
	* trans-intrinsic.c (trans-intrinsic.c): Handle optional
	arguments correctly for MIN and MAX intrinsics.

2007-07-03  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/32545
	* io.c (check_format): Always call gfc_error for errors.
	(check_format_string): Change type of this function to try and
	return the result of check_format.
	(check_io_constraints): Return MATCH_ERROR if check_format_string
	returns FAILURE.

2007-07-03  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/32612
	* decl.c (get_proc_name): Include attr->mod_proc in check for error.

2007-07-03  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/32432
	* gfortran.h: Change type of gfc_assign_data_value from void to try.
	* data.c (gfc_assign_data_value): Return FAILURE if error found.
	* resolve.c (check_data_variable): If gfc_assign_data_value returns
	failure, break out of loop and return failure.

2007-07-03  Christopher D. Rickett  <crickett@lanl.gov>

	PR fortran/32579
	* symbol.c (gen_cptr_param): Generate C_PTR and C_FUNPTR if necessary.
	(build_formal_args): Pass intrinsic module symbol id to
	gen_cptr_param.

2007-07-03  Tobias Burnus  <burnus@net-b.de>

	PR fortran/25062
	* resolve.c (resolve_common_blocks): New check function.
	(resolve_types): Use it.

2007-07-03  Tobias Burnus  <burnus@net-b.de>

	PR fortran/30940
	* interface.c (get_sym_storage_size): New function.
	(get_sym_storage_size): New function.
	(compare_actual_formal): Enhance sequence association
	support and improve checking.

2007-07-03  Janne Blomqvist  <jb@gcc.gnu.org>

	* trans-decl.c (gfc_build_builtin_function_decls): Mark
	internal_realloc as a malloc function.

2007-07-03  Tobias Burnus  <burnus@net-b.de>

	PR fortran/20888
	* resolve.c (resolve_operator): Check for NULL as operand.

2007-07-02  Tobias Burnus  <burnus@net-b.de>

	* gfortran.texi (Fortran 2003): Add ISO Bind C.
	* intrinsic.texi (C_ASSOCIATED,C_F_POINTER,C_F_PROCPOINTER,
	C_FUNLOC,C_LOC): Document new ISO Bind C intrinsics.

2007-07-01  Christopher D. Rickett  <crickett@lanl.gov>

	* interface.c (gfc_compare_derived_types): Special case for comparing
	derived types across namespaces.
	(gfc_compare_types): Deal with BT_VOID.
	(compare_parameter): Use BT_VOID to accept ISO C Binding pointers.
	* trans-expr.c (gfc_conv_function_call): Remove setting parm_kind
	to SCALAR
	(gfc_conv_initializer): Deal with ISO C Binding NULL_PTR and 
	NULL_FUNPTR.
	(gfc_conv_expr): Convert expressions for ISO C Binding derived types.
	* symbol.c (gfc_set_default_type): BIND(C) variables should not be
	Implicitly declared.
	(check_conflict): Add BIND(C) and check for conflicts.
	(gfc_add_explicit_interface): Whitespace.	
	(gfc_add_is_bind_c): New function.  
	(gfc_copy_attr): Use it.
	(gfc_new_symbol): Initialize ISO C Binding objects.
	(get_iso_c_binding_dt):  New function.
	(verify_bind_c_derived_type): Ditto.
	(gen_special_c_interop_ptr): Ditto.
	(add_formal_arg): Ditto.
	(gen_cptr_param): Ditto.
	(gen_fptr_param): Ditto.
	(gen_shape_param): Ditto.
	(add_proc_interface): Ditto.
	(build_formal_args): Ditto.
	(generate_isocbinding_symbol):  Ditto.
	(get_iso_c_sym):  Ditto.
	* decl.c (num_idents_on_line, has_name_equals): New variables.
	(verify_c_interop_param): New function.
	(build_sym): Finish binding labels and deal with COMMON blocks.
	(add_init_expr_to_sym): Check if the initialized expression is
	an iso_c_binding named constants
	(variable_decl): Set ISO C Binding type_spec components.
	(gfc_match_kind_spec): Check match for C interoperable kind.
	(match_char_spec): Fix comment. Chnage gfc_match_small_int
	to gfc_match_small_int_expr.  Check for C interoperable kind.
	(match_type_spec): Clear the current binding label.
	(match_attr_spec): Add DECL_IS_BIND_C.  If BIND(C) is found, use it
	to set attributes.
	(set_binding_label): New function.
	(set_com_block_bind_c): Ditto.
	(verify_c_interop): Ditto.
	(verify_com_block_vars_c_interop): Ditto.
	(verify_bind_c_sym): Ditto.
	(set_verify_bind_c_sym): Ditto.
	(set_verify_bind_c_com_block): Ditto.
	(get_bind_c_idents): Ditto.
	(gfc_match_bind_c_stmt): Ditto.
	(gfc_match_data_decl): Use num_idents_on_line.
	(match_result): Deal with right paren in BIND(C).
	(gfc_match_suffix): New function.
	(gfc_match_function_decl): Use it.  Code is re-arranged to deal with
	ISO C Binding result clauses.
	(gfc_match_subroutine):  Deal with BIND(C).
 	(gfc_match_bind_c): New function.
	(gfc_get_type_attr_spec): New function.  Code is re-arranged in and
	taken from gfc_match_derived_decl.
	(gfc_match_derived_decl): Add check for BIND(C).
	* trans-common.c: Forward declare gfc_get_common.
	(gfc_sym_mangled_common_id): Change arg from 'const char *name' to
	'gfc_common_head *com'.  Check for ISO C Binding of the common block.
	(build_common_decl): 'com->name' to 'com in SET_DECL_ASSEMBLER_NAME.
	* gfortran.h: Add GFC_MAX_BINDING_LABEL_LEN
	(bt): Add BT_VOID
	(sym_flavor): Add FL_VOID.
 	(iso_fortran_env_symbol, iso_c_binding_symbol, intmod_id): New enum
	(CInteropKind_t): New struct.
	(c_interop_kinds_table): Use it.  Declare an array of structs.
	(symbol_attribute): Add is_bind_c, is_c_interop, and is_iso_c
	bitfields.
	(gfc_typespec): Add is_c_interop; is_iso_c, and f90_type members.
	(gfc_symbol): Add from_intmod, intmod_sym_id, binding_label, and
	common_block members.
	(gfc_common_head): Add binding_label and is_bind_c members.
	(gfc_gsymbol): Add sym_name, mod_name, and binding_label members.
	Add prototypes for get_c_kind, gfc_validate_c_kind, 
	gfc_check_any_c_kind, gfc_add_is_bind_c, gfc_add_value,
	verify_c_interop, verify_c_interop_param, verify_bind_c_sym,
	verify_bind_c_derived_type, verify_com_block_vars_c_interop,
	generate_isocbinding_symbol, get_iso_c_sym, gfc_iso_c_sub_interface
	* iso-c-binding.def: New file. This file contains the definitions
	of the types provided by the Fortran 2003 ISO_C_BINDING intrinsic
	module.
	* trans-const.c (gfc_conv_constant_to_tree): Deal with C_NULL_PTR
	 or C_NULL_FUNPTR expressions.
	* expr.c (gfc_copy_expr): Add BT_VOID case.  For BT_CHARACTER, the
	ISO C Binding requires a minimum string length of 1 for '\0'.  
	* module.c (intmod_sym): New struct.
	(pointer_info): Add binding_label member.
	(write_atom): Set len to 0 for NULL pointers. Check for NULL p and *p.
	(ab_attribute): Add AB_IS_BIND_C, AB_IS_C_INTEROP and AB_IS_ISO_C.
	(attr_bits): Add "IS_BIND_C", "IS_C_INTEROP", and "IS_ISO_C".
	(mio_symbol_attribute): Deal with ISO C Binding attributes.
	(bt_types): Add "VOID".
	(mio_typespec): Deal with ISO C Binding components.
	(mio_namespace_ref): Add intmod variable. 
	(mio_symbol): Check for symbols from an intrinsic module.
	(load_commons): Check for BIND(C) common block.
	(read_module): Read binding_label and use it.
	(write_common): Add label.  Write BIND(C) info.
	(write_blank_common): Blank commons are not BIND(C).  Explicitly
	set is_bind_c=0.
	(write_symbol): Deal with binding_label.
	(sort_iso_c_rename_list): New function.
	(import_iso_c_binding_module): Ditto.
	(create_int_parameter): Add to args.
	(use_iso_fortran_env_module): Adjust to deal with iso_c_binding
	intrinsic module.
	* trans-types.c (c_interop_kinds_table): new array of structs. 
	(gfc_validate_c_kind): New function.
	(gfc_check_any_c_kind): Ditto.
	(get_real_kind_from_node): Ditto.
	(get_int_kind_from_node): Ditto.
	(get_int_kind_from_width): Ditto.
	(get_int_kind_from_minimal_width): Ditto.
	(init_c_interop_kinds): Ditto.
	(gfc_init_kinds): call init_c_interop_kinds.
	(gfc_typenode_for_spec): Adjust for BT_VOID and ISO C Binding pointers.
	Adjust handling of BT_DERIVED.
	(gfc_sym_type): Whitespace.
	(gfc_get_derived_type):  Account for iso_c_binding derived types
	* resolve.c (is_scalar_expr_ptr): New function.
	(gfc_iso_c_func_interface): Ditto.
	(resolve_function): Use gfc_iso_c_func_interface. 
	(set_name_and_label): New function.
	(gfc_iso_c_sub_interface): Ditto.
	(resolve_specific_s0): Use gfc_iso_c_sub_interface.
	(resolve_bind_c_comms): New function.
	(resolve_bind_c_derived_types): Ditto.
	(gfc_verify_binding_labels): Ditto.
	(resolve_fl_procedure): Check for ISO C interoperability.
	(resolve_symbol): Check C interoperability.
	(resolve_types): Walk the namespace.  Check COMMON blocks.
	* trans-decl.c (gfc_sym_mangled_identifier):  Prevent the mangling
	of identifiers that have an assigned binding label.
	(gfc_sym_mangled_function_id): Use the binding label rather than
	the mangled name.
	(gfc_finish_var_decl): Put variables that are BIND(C) into a common
	segment of the object file, because this is what C would do.
	(gfc_create_module_variable): Conver to proper types
	(set_tree_decl_type_code): New function.
	(generate_local_decl): Check dummy variables and derived types for
	ISO C Binding attributes.
	* match.c (gfc_match_small_int_expr): New function.
	(gfc_match_name_C): Ditto.
	(match_common_name): Deal with ISO C Binding in COMMON blocks
	* trans-io.c (transfer_expr):  Deal with C_NULL_PTR or C_NULL_FUNPTR
	expressions
	* match.h: Add prototypes for gfc_match_small_int_expr,
	gfc_match_name_C, match_common_name, set_com_block_bind_c,
	set_binding_label, set_verify_bind_c_sym,
	set_verify_bind_c_com_block, get_bind_c_idents,
	gfc_match_bind_c_stmt, gfc_match_suffix, gfc_match_bind_c,
	gfc_get_type_attr_spec
	* parse.c (decode_statement): Use gfc_match_bind_c_stmt
	(parse_derived): Init *derived_sym = NULL, and gfc_current_block
	later for valiadation.
	* primary.c (got_delim): Set ISO C Binding components of ts.
	(match_logical_constant): Ditto.
	(match_complex_constant): Ditto.
	(match_complex_constant): Ditto.
	(gfc_match_rvalue): Check for existence of at least one arg for
	C_LOC, C_FUNLOC, and C_ASSOCIATED.
	* misc.c (gfc_clear_ts): Clear ISO C Bindoing components in ts.
	(get_c_kind): New function.

2007-07-01  Janne Blomqvist  <jb@gcc.gnu.org>

	PR fortran/32239
	* trans-expr.c (gfc_conv_power_op): Use builtin_powi for
	real**int4 powers.
	* f95-lang.c (gfc_init_builtin_functions): Add builtin_powi to the
	builtins table.

2007-07-01  Janne Blomqvist  <jb@gcc.gnu.org>

        * trans.h: Remove decls for 64-bit allocation functions.
        * trans-array.c (gfc_grow_array): Always pick the standard realloc
        function decl.
        (gfc_array_allocate): Likewise.
        * trans-decl.c: Remove trees for 64-bit allocation functions.
        (gfc_build_builtin_function_decls): Don't build fndecls for 64-bit
        allocations functions, use index_int_type for normal allocation
        functions.

2007-06-30  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/20373
	* intrinsic.c (add_functions): Additional function types.
	(gfc_convert_type_warn): Remove intrinsic-flag from
	conversion functions.
	* resolve.c (resolve_symbol): Added type checks to 
	explicitly defined intrinsics.

2007-06-30  Tobias Burnus  <burnus@net-b.de>

	PR fortran/32555
	* io.c (check_format): Allow zero to precede the
	P edit descriptor.

2007-06-30  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/32472
	* simplify.c (gfc_simplify_repeat): Add handling of character
	literal for first argument.

2007-06-29  Daniel Franke  <franke.daniel@gmail.com>

	* resolve.c (resolve_operator): Added check whether a user
	defined operator is available.

2007-06-29  Daniel Franke <franke.daniel@gmail.com>

	* openmp.c (resolve_omp_clauses): Adjust error message to
	better reflect the actual requirement.

2007-06-29  Tobias Burnus  <burnus@net-b.de>

	PR fortran/32483
	* io.c (format_lex): Fix FMT_ZERO.
	(check_format,check_format_string,gfc_match_format,
	check_io_constraints) Additional checking for READ.

2007-06-28 Francois-Xavier Coudert <fxcoudert@gcc.gnu.org>

	PR other/31400
	* lang.opt (static-libgfortran): New option.
	* gfortranspec.c (ADD_ARG_LIBGFORTRAN): New macro.
	(Option): Add OPTION_static and OPTION_static_libgfortran.
	(lookup_option): Handle the new -static-libgfortran option.
	(lang_specific_driver): Check whether -static is passed.
	Handle the new -static-libgfortran option.
	* options.c (gfc_handle_option): If -static-libgfortran is
	passed and isn't supported on this configuration, error out.

2007-06-27  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/32467
	* openmp.c (resolve_omp_clauses): Emit error on allocatable
	components in COPYIN, COPYPRIVATE, FIRSTPRIVATE and LASTPRIVATE
	clauses.

2007-06-25  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/32464
	* resolve.c (check_host_association): Return if the old symbol
	is use associated.  Introduce retval to reduce the number of
	evaluations of the first-order return value.

	PR fortran/31494
	* match.c (gfc_match_call): If a host associated symbol is not
	a subroutine, build a new symtree/symbol in the current name
	space.

2007-06-24  Tobias Burnus  <burnus@net-de>

	PR fortran/32460
	* interface.c (gfc_compare_derived_types): Add access check.
	* symbol.c (gfc_find_component): Ditto.
	(gfc_set_component_attr,gfc_get_component_attr) Copy access state.
	* dump-parse-tree.c (gfc_show_components): Dump access state.
	* gfortran.h (struct gfc_component): Add gfc_access.
	* module.c (mio_component): Add access state.
	* (gfc_match_structure_constructor): Check for private access state.

2007-06-24  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/32298
	PR fortran/31726
	* trans-intrinsic.c (gfc_conv_intrinsic_minmaxloc): Calculate
	the offset between the loop counter and the position as
	defined. Add the offset within the loop so that the mask acts
	correctly.  Do not advance the location on the basis that it
	is zero.

2007-06-22  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/31473
	* symbol.c (gfc_copy_attr): Emit errors for duplicate 
	EXTERNAL/INTRINSIC statements.

2007-06-22  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/32360
	* expr.c (gfc_check_assign): If the rvalue expression type is NULL_EXPR,
	check to see if the lvalue has attribute pointer and data.  

2007-06-21  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/31162
	* resolve.c (gfc_resolve_iterator_expr): Add check for REAL using
	gfc_notify_standard. (gfc_resolve_iterator): Remove check.
	(resolve_branch): Change "Obsolete" to "Deleted feature".
	* io.c (resolve_tag): Ditto.
	* match.c (gfc_match_pause, gfc_match_assign, gfc_match_goto): Ditto.

2007-06-20  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/32361
	* match.c (gfc_match_common): If the symbol value expression type is
	NULL_EXPR, don't error if previously initialized.

2007-06-20  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/25061
	* decl.c (get_proc_name) Check symbol for generic interface
	and issue an error.

2007-06-20  Andrew Pinski  <andrew_pinski@playstation.sony.com>
	Richard Guenther  <rguenther@suse.de>

	PR fortran/32140
	* trans.c (gfc_build_addr_expr): Use the correct types.

2007-06-19  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/20863
	PR fortran/20882
	* resolve.c (resolve_code): Use gfc_impure_variable as a
	condition for rejecting derived types with pointers, in pure
	procedures.
	(gfc_impure_variable): Add test for dummy arguments of pure
	procedures; any for functions and INTENT_IN for subroutines.

	PR fortran/32236
	* data.c (gfc_assign_data_value): Change the ICE on an array
	reference initializer not being an array into an error and
	clear init to prevent a repetition of the error.

2007-06-17  Janne Blomqvist  <jb@gcc.gnu.org>

	* gfortran.texi: Add documentation for GFORTRAN_UNBUFFERED_n
	environment variables. Fix documentation for
	GFORTRAN_UNBUFFERED_ALL environment variable.

2007-06-15  Andrew Pinski  <andrew_pinski@playstation.sony.com>

	* trans-intrinsic.c (gfc_conv_intrinsic_repeat): Use
	POINTER_PLUS_EXPR instead of PLUS_EXPR for pointer addition.
	* trans-expr.c (gfc_trans_string_copy): Create
	POINTER_PLUS_EXPR instead of a PLUS_EXPR
	for pointer types.

2007-06-14  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/32302
	* trans-common.c (build_common_decl): If resizing of common
	decl is needed, update the TREE_TYPE.

2007-06-13  Tobias Burnus  <burnus@net-b.de>

	PR fortran/32323
	* interface.c (has_vector_section): New.
	(compare_actual_formal): Check for array sections with vector subscript.

2007-06-12  Dirk Mueller  <dmueller@suse.de>

	* trans-stmt.c (gfc_trans_call): fix gcc_assert to
	a comparison, not an assignment.

2007-06-12  Paul Thomas  <pault@gcc.gnu.org>

	* trans-common.c (create_common): Initialize 'field_init'.

2007-06-12  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/29786
	PR fortran/30875
	* trans-common.c (get_init_field): New function.
	(create_common): Call get_init_field for overlapping
	initializers in equivalence blocks.
	* resolve.c (resolve_equivalence_derived, resolve_equivalence):
	Remove constraints on initializers in equivalence blocks.
	* target-memory.c (expr_to_char, gfc_merge_initializers):
	New functions.
	(encode_derived): Add the bit offset to the byte offset to get
	the total offset to the field.
	* target-memory.h : Add prototype for gfc_merge_initializers.

2007-06-11  Rafael Avila de Espindola  <espindola@google.com>

	* trans-types.c (gfc_signed_type): Remove.
	* trans-types.h (gfc_signed_type): Remove.
	* f95-lang.c (LANG_HOOKS_SIGNED_TYPE): Remove.

2007-06-08 Francois-Xavier Coudert <fxcoudert@gcc.gnu.org>

	* trans-intrinsic.c: Revert Lee's 2007-06-04 patch.

2007-06-07  Steven G. Kargl  <kargl@gcc.gnu.org>
	    Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/32223
	* match.c (gfc_match_special_char): New function.  Match special char.
	Add handling '\0'.
	* match.h: Add prototype.
	* io.c (next_char): Use it.
	* primary.c (next_string_char): Ditto.

2007-06-06  Steven G. Kargl  <kargl@gcc.gnu.org>

	* decl.c: Miscellaneous whitespace fixes.
	* expr.c: Likewise.
	* gfortran.h: Likewise.
	* interface.c : Likewise.
	* io.c: Likewise.
	* match.c: Likewise.
	* match.h: Likewise.
	* module.c: Likewise.
	* parse.c: Likewise.
	* resolve.c: Likewise.
	* symbol.c: Likewise.
	* trans-array.c: Likewise.
	* trans-common.c: Likewise.
	* trans-decl.c: Likewise.
	* trans-intrinsic.c: Likewise.
	* trans-io.c: Likewise.
	* trans-stmt.c: Likewise.
	* trans-types.c: Likewise.

2007-06-05  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/18923
	* parse.c (decode_statement): Don't call gfc_undo_symbols on MATCH_ERROR
	for ST_FUNCTION since it is called in reject_statement.
	(parse_contained): If error, loop back after reject_statement and try
	again.  Free the namespace if an error occured.

2007-06-04 Lee Millward <lee.millward@codesourcery.com>

	* trans-intrinsic.c (gfc_conv_intrinsic_function_args): Adjust
	to operate on a stack allocated array for the intrinsic arguments
	instead of creating a TREE_LIST. Add two new parameters for the
	array and the number of elements. Update all callers to allocate
	an array of the correct length to pass in. Update comment.
	(gfc_intrinsic_argument_list_length): New function.
	(gfc_conv_intrinsic_mnimax): Call it.
	(gfc_conv_intrinsic_merge): Likewise.
	(gfc_conv_intrinsic_lib_function): Call it. Use new CALL_EXPR
	constructors.
	(gfc_conv_intrinsic_cmplx): Likewise.
	(gfc_conv_intrinsic_ctime): Likewise.
	(gfc_covn_intrinsic_fdate): Likewise.
	(gfc_conv_intrinsic_ttynam): Likewise.
	(gfc_conv_intrinsic_ishftc): Likewise.
	(gfc_conv_intrinsic_index): Likewise.
	(gfc_conv_intrinsic_scan): Likewise.
	(gfc_conv_intrinsic_verify): Likewise.
	(gfc_conv_intrinsic_trim): Likewise.
	(gfc_conv_intrinsic_aint): Use new CALL_EXPR constructors.
	(gfc_conv_intrinsic_exponent): Likewise.
	(gfc_conv_intrinsic_bound): Likewise.
	(gfc_conv_intrinsic_abs): Likewise.
	(gfc_conv_intrinsic_mod): Likewise.
	(gfc_conv_intrinsic_sign): Likewise.
	(gfc_conv_intrinsic_len): Likewise.
	(gfc_conv_intrinsic_adjust): Likewise.
	(gfc_conv_intrinsic_si_kind): Likewise.

2007-06-04  Steve Ellcey  <sje@cup.hp.com>

	* trans-array.c (gfc_conv_array_parameter): Initialize tmp.

2007-05-31  Richard Guenther  <rguenther@suse.de>

	* trans-expr.c (gfc_conv_expr_op): Use zero constant
	that matches the lse type.
	(gfc_trans_string_copy): Use sizetype zero constant.
	* intrinsic.c (add_functions): The sizeof intrinsic has
	index type result.
	* trans-types.c (gfc_get_dtype): Convert size to index
	type before shifting.
	* trans-array.c (gfc_trans_array_constructor_value): Use
	index type for offset computation.
	* trans-intrinsic.c (gfc_conv_associated): Use correct type
	for zero constant.

2007-05-31  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/32156
	* trans-array.c (gfc_trans_array_constructor): Treat the case
	where the ss expression charlen is missing.

22007-05-31  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/32103
	* module.c (mio_symtree_ref): If an equivalence group member
	is not used, give it a hidden symbol and set the pointer_info.
	(load_equiv): Only free the equivalence if none of the members
	are used.

2007-05-29  Daniel Franke  <franke.daniel@gmail.com>

	* gfortran.h: Renamed 'enum gfc_generic_isym_id' to 'enum gfc_isym_id',
	added missing GFC_ISYM_* enumerators, ordered alphabetically.
	(struct gfc_intrinsic_sym): Renamed 'generic_id' to 'id'.
	(gfc_find_subroutine): New prototype.
	* intrinsic.c (add_sym, add_sym_*): Added argument 'id' and changed all callers.
	(find_subroutine): Renamed to 'gfc_find_subroutine', removed static.  
	* dependency.c: Changed usage of isym->generic_id to isym->id.  
	* openmp.c: Likewise.  
	* resolve.c: Likewise.  
	* trans-array.c: Likewise.  
	* trans-expr.c: Likewise.  
	* trans-intrinsic.c: Likewise.  
	* trans-openmp.c: Likewise.

2007-05-28  Tobias SchlÃ¼ter  <tobi@gcc.gnu.org>

	* gfortran.h (gfc_generic_isym_id): Add GFC_ISYM_SIZEOF.
	* intrinsic.c (add_functions): Add stuff for SIZEOF intrinsic.
	* intrinsic.h (gfc_check_sizeof): Add prototype of ...
	* check.c (gfc_check_sizeof): .. new function.
	* trans-intrinsic.c (gfc_conv_intrinsic_sizeof): New function.
	(gfc_conv_intrinsic_strcmp): Whitespace fix.
	(gfc_conv_intrinsic_array_transfer): Remove double initialization,
	use fold_build. where appropriate.
	(gfc_conv_intrinsic_function): Add case for SIZEOF.
	* intrinsic.texi: Add documentation for SIZEOF.

2007-05-28  Brooks Moses  <brooks.moses@codesourcery.com>

	* trans-array.c (gfc_conv_expr_descriptor): Edit comment.

2007-05-28  Brooks Moses  <brooks.moses@codesourcery.com>

	PR fortran/31972
	* target-memory.c (gfc_target_expr_size): Add handling
	for size of BT_HOLLERITH variables.
	* check.c (gfc_check_transfer): Reject BT_HOLLERITH
	variables in MOLD argument of TRANSFER.

2007-05-28  Brooks Moses  <brooks.moses@codesourcery.com>

	* gfortran.h (gfc_expr): Remove from_H, add "representation"
	struct.
	* primary.c (match_hollerith_constant): Store the representation
 	of the Hollerith in representation, not in value.character.
	* arith.c: Add dependency on target-memory.h.
	(eval_intrinsic): Remove check for from_H.
	(hollerith2representation): New function.
	(gfc_hollerith2int): Determine value of the new constant.
	(gfc_hollerith2real): Likewise.
	(gfc_hollerith2complex): Likewise.
	(gfc_hollerith2logical): Likewise.
	(gfc_hollerith2character): Point both representation.string and
	value.character.string at the value string.
	* data.c (create_character_initializer): For BT_HOLLERITH
	rvalues, get the value from the representation rather than
	value.character.
	* expr.c (free_expr0): Update handling of BT_HOLLERITH values
	and values with representation.string.
	(gfc_copy_expr): Likewise.
	* intrinsic.c (do_simplify): Remove special treatement of
	variables resulting from Hollerith constants.
	* dump-parse-trees.c (gfc_show_expr): Update handling of
	Holleriths.
	* trans-const.c (gfc_conv_constant_to_tree): Replace from_H
	check with check for representation.string; get Hollerith
	representation from representation.string, not value.character.
	* trans-expr.c (is_zero_initializer_p): Replace from_H check
	with check for representation.string.
	* trans-stmt.c (gfc_trans_integer_select): Use
	gfc_conv_mpz_to_tree for case values, so as to avoid picking up
	the memory representation if the case is given by a transfer
	expression.
	* target-memory.c (gfc_target_encode_expr): Use the known memory
	representation rather than the value, if it exists.
	(gfc_target_interpret_expr): Store the memory representation of
	the interpreted expression as well as its value.
	(interpret_integer): Move to gfc_interpret_integer, make
	non-static.
	(interpret_float): Move to gfc_interpret_float, make non-static.
	(interpret_complex): Move to gfc_interpret_complex, make
	non-static.
	(interpret_logical): Move to gfc_interpret_logical, make
	non-static.
	(interpret_character): Move to gfc_interpret_character, make
	non-static.
	(interpret_derived): Move to gfc_interpret_derived, make
	non-static.
	* target-memory.h: Add prototypes for newly-exported
	gfc_interpret_* functions.

2007-05-27  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/31812
	* parse.c (next_statement): Warn for truncated lines if source is free
	form.

2007-05-27 Paul Thomas  <pault@gcc.gnu.org>
	   Tobias Burnus  <burnus@net-b.de>

	PR fortran/32088
	* symbol.c (gfc_check_function_type): Copy dimensions of
	  result variable.
	* resolve.c (resolve_contained_fntype): Improve symbol output in
	  the error message.

2007-05-26  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/31813
	* io.c (check_format): Add warning for H specifier in format.
	
2007-05-26  Tobias Burnus  <burnus@net-b.de>

	* gfortran.texi: Document the GFORTRAN_ERROR_DUMPCORE and
	GFORTRAN_ERROR_BACKTRACE environment variables.

2007-05-26  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31219
	* trans.h : Add no_function_call bitfield to gfc_se structure.
	Add stmtblock_t argument to prototype of get_array_ctor_strlen.
	* trans-array.c (get_array_ctor_all_strlen): New function.
	(get_array_ctor_strlen): Add new stmtblock_t argument and call
	new function for character elements that are not constants,
	arrays or variables.
	(gfc_conv_array_parameter): Call get_array_ctor_strlen to get
	good string length.
	* trans-intrinsic (gfc_conv_intrinsic_len): Add new argument
	to call of get_array_ctor_strlen.

2007-05-25  Kazu Hirata  <kazu@codesourcery.com>

	* intrinsic.texi: Fix typos.

2007-05-25  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/32047
	* trans-expr.c (gfc_apply_interface_mapping_to_expr): Change
	order in logic under EXPR_FUNCTION to handle functions with
	no arguments.

2007-05-23  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/31716
	* array.c (spec_dimen_size): Test for correct BT_INTEGER type. 

2007-05-23  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/32046
	* trans-expr.c (gfc_trans_zero_assign): Convert the result of
	TYPE_SIZE_UNIT into a signed type.
	(gfc_trans_array_copy):  Likewise.
	(gfc_trans_array_constructor_copy): Likewise.
	* trans-array.c (gfc_trans_create_temp_array): Likewise.
	(gfc_grow_array): Likewise.
	(gfc_array_init_size): Likewise.
	(gfc_duplicate_allocatable): Likewise.
	* trans-stmt.c (allocate_temp_for_forall_nest_1): Likewise.

2007-05-22  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/18923
	* resolve.c (resolve_function): Don't call resolve_global_procedure if
	there is no name. Delete duplicated statement in ELSE clause.

2007-05-22 Francois-Xavier Coudert <fxcoudert@gcc.gnu.org>

	PR fortran/31627
	* trans-array.c (gfc_trans_array_bound_check): Take extra argument to
	indicate whether we should check the upper bound in that dimension.
	(gfc_conv_array_index_offset): Check only the lower bound of the
	last dimension for assumed-size arrays.
	(gfc_conv_array_ref): Likewise.
	(gfc_conv_ss_startstride): Likewise.

2007-05-21  Jerry DeLisle  <jvdelisle@gcc.gnu.org>
	    Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/32002
	* resolve.c (resolve_actual_arglist): Resolve actual argument after
	being identified as variable.

2007-05-21  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/32027
	* trans-stmt.c (gfc_trans_do): Fix the value of loop variable
	when the loop ends.

2007-05-21  H.J. Lu  <hongjiu.lu@intel.com>

	* trans-stmt.c (gfc_trans_do): Fix a typo in comment.

2007-05-21  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31867
	PR fortran/31994
	* trans-array.c (gfc_conv_expr_descriptor): Obtain the stored
	offset for non-descriptor, source arrays and correct for stride
	not equal to one before writing to field of output descriptor.

2007-05-20  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/32001
	* check.c (check_rest): Improved argument conformance check and 
	fixed error message generation.

2007-05-19  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/30820
	* Make-lang.in: Remove use of -Wno-error for expr.o, resolve.o,
	simplify.o and trans-common.o.

2007-05-19  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/31974
	* trans-array.c (gfc_trans_auto_array_allocation): Avoid
	multiplication of mismatched types.

2007-05-18  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/24633
	* symbol.c (gfc_add_flavor): Add the NAME to error message if
	available.

2007-05-15  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/31919
	PR fortran/31929
	PR fortran/31930
	* intrinsic.c (check_specific): Check elemental intrinsics for
	rank and shape.
	(add_functions): Fixed dummy argument names of BESJN and BESYN.
	Fixed elemental status of MCLOCK and MCLOCK8.
	* check.c (check_rest): Added check for array conformance.
	(gfc_check_merge): Removed check for array conformance.
	(gfc_check_besn): Removed check for scalarity.
	* intrinsic.texi (CSHIFT, EOSHIFT): Fixed typos.
	(BESJN, BESYN): Clarified documentation.

2007-05-17  Tobias Burnus  <burnus@net-b.de>

	* gfortran.texi (GFORTRAN_CONVERT_UNIT): Improve documentation.

2007-05-16  Brooks Moses  <brooks.moses@codesourcery.com>

	PR fortran/18769
	PR fortran/30881
	PR fortran/31194
	PR fortran/31216
	PR fortran/31427
	* target-memory.c: New file.
	* target-memory.h: New file.
	* simplify.c: Add #include "target-memory.h".
	(gfc_simplify_transfer): Implement constant-
	folding for TRANSFER intrinsic.
	* Make-lang.in: Add dependencies on new target-memory.* files.

2007-05-15  Paul Brook  <paul@codesourcery.com>

	* trans-types.c (gfc_type_for_size): Handle signed TImode.

2007-05-14  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/30723
	* trans.h (gfor_fndecl_internal_malloc, gfor_fndecl_internal_malloc64,
	gfor_fndecl_internal_free): Remove prototypes.
	(gfor_fndecl_os_error, gfc_call_free, gfc_call_malloc): Add prototypes.
	* trans.c (gfc_call_malloc, gfc_call_free): New functions.
	* f95-lang.c (gfc_init_builtin_functions): Add __builtin_free
	and __builtin_malloc builtins.
	* trans-decl.c (gfor_fndecl_internal_malloc,
	gfor_fndecl_internal_malloc64, gfor_fndecl_internal_free): Remove.
	(gfor_fndecl_os_error): Add.
	(gfc_build_builtin_function_decls): Don't create internal_malloc,
	internal_malloc64 and internal_free library function declaration.
	Create os_error library call function declaration.
	* trans-array.c (gfc_trans_allocate_array_storage,
	gfc_trans_auto_array_allocation, gfc_trans_dummy_array_bias,
	gfc_conv_array_parameter, gfc_duplicate_allocatable): Use
	gfc_call_malloc and gfc_call_free instead of building calls to
	internal_malloc and internal_free.
	* trans-expr.c (gfc_conv_string_tmp): Likewise.
	* trans-stmt.c (gfc_do_allocate, gfc_trans_assign_need_temp,
	gfc_trans_pointer_assign_need_temp, gfc_trans_forall_1,
	gfc_trans_where_2: Likewise.
	* trans-intrinsic.c (gfc_conv_intrinsic_ctime,
	gfc_conv_intrinsic_fdate, gfc_conv_intrinsic_ttynam,
	gfc_conv_intrinsic_array_transfer, gfc_conv_intrinsic_trim): Likewise.

2007-05-14  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/31725
	* trans-expr.c (gfc_conv_substring): Evaluate substring bounds
	only once.

2007-05-14  Rafael Avila de Espindola  <espindola@google.com>

	* f95-lang.c (LANG_HOOKS_UNSIGNED_TYPE): Remove.
	* trans-intrinsic.c (gfc_conv_intrinsic_ishft): Use unsigned_type_for
	instead of gfc_unsigned_type.
	* trans-stmt.c (gfc_trans_do): Use unsigned_type_for instead of
	gfc_unsigned_type.
	* trans-types.c (gfc_unsigned_type): Remove.
	* trans-types.h (gfc_unsigned_type): Remove.

2007-05-12  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30746
	* resolve.c (check_host_association): New function that detects
	incorrect host association and corrects it.
	(gfc_resolve_expr): Call the new function for variables and
	functions.
	* match.h : Remove prototype for gfc_match_rvalue.
	* gfortran.h : Add prototype for gfc_match_rvalue.

2007-05-11 Paul Thomas <pault@gcc.gnu.org>

	PR fortran/30876
	* trans-expr.c (gfc_conv_function_call): Reduce indirection for
	direct assignments of recursive array valued functions.
	* primary.c (gfc_match_rvalue): Correct error for recursive
	function calls such that directly recursive calls of scalar
	function without an explicit result are disallowed.

2007-05-11 Paul Thomas <pault@gcc.gnu.org>

	PR fortran/30878
	* resolve.c (resolve_fl_namelist): It is not an error if the
	namelist element is the result variable of the enclosing
	function.  Search for the symbol in current and all parent
	namespaces for a potential conflict.
	* symbol.c (check_conflict): Remove the conflict between
	'in_namelist' and 'FL_PROCEDURE' because the symbol info
	is not available to exclude function result variables.
	* trans-io.c (nml_get_addr_expr): Use the fake result decl
	if the symbol is an implicit result variable.

2007-05-11  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31474
	* decl.c (get_proc_name): If an entry has already been declared
	as a module procedure, pick up the symbol and the symtree and
	use them for the entry.

2007-05-08  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31630
	* resolve.c (resolve_symbol): Remove the flagging mechanism from the
	formal namespace resolution and instead check that the formal
	namespace is not the current namespace.

2007-05-08  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31692
	* trans-array.c (gfc_conv_array_parameter): Convert full array
	references to the result of the procedure enclusing the call.

2007-05-08  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/29397
	PR fortran/29400
	* decl.c (add_init_expr_to_sym): Expand a scalar initializer
	for a parameter array into an array expression with the right
	shape.
	* array.c (spec_dimen_size): Remove static attribute.
	* gfortran.h : Prototype for spec_dimen_size.

2007-05-07  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/31399
	* trans-stmt.c (gfc_trans_do): Handle large loop counts.

2007-05-07  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/31764
	* simplify.c (gfc_simplify_new_line): NEW_LINE can be simplified
	even for non constant arguments.

2007-05-06  Jerry DeLisle  <jvdelisle@gcc.gnu.org>
	    Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/31201
	* gfortran.h: Add runtime error codes from libgfortran.h. Define
	MAX_UNIT_NUMBER.
	* trans.c (gfc_trans_runtime_check): Update the format of runtime error
	messages to match library runtime errors.  Use call to new library
	function runtime_error_at().
	* trans.h: Add prototype for new function gfc_trans_io_runtime_check.
	Add declaration for library functions runtime_error_at and
	generate_error.
	* trans_io.c (gfc_trans_io_runtime_check): New function.
	(set_parameter_value): Add error checking for UNIT numbers.
	(set_parameter_ref): Initialize the users variable to zero. 
	(gfc_trans_open): Move setting of unit number to after setting of common
	flags so that runtime error trapping can be detected.
	(gfc_trans_close): Likewise. (build_filepos): Likewise.
	(gfc_trans_inquire): Likewise. (build_dt): Likewise.
	* trans-decl.c: Add declarations for runtime_error_at and
	generate_error. (gfc_build_builtin_function_decls): Build function
	declarations for runtime_error_at and generate_error.

2007-05-06  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31540
	* resolve.c (resolve_fl_procedure): Resolve constant character
	lengths.

2007-05-05  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/31251
	* decl.c (match_char_spec): Add check for invalid character lengths.

2007-05-04  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi (CMPLX): Document result kind.
	(COMPLEX): Add documentation.

2007-05-04  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/31760
	* intrinsic.c (add_functions): Replaced calls to gfc_check_g77_math1
	by gfc_check_fn_r to avoid checks for scalarity.
	* check.c (gfc_check_besn): Removed check for scalarity.
	(gfc_check_g77_math1): Removed.
	* intrinsic.h (gfc_check_g77_math1): Removed.

2007-05-04  Daniel Franke  <franke.daniel@gmail.com>

	* check.c (gfc_check_fseek_sub): Fixed typo.

2007-05-04  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/22359
	* intrinsic.c (add_subroutines): Added FSEEK.
	* intrinsic.h (gfc_resolve_fseek_sub, gfc_check_fseek_sub): New.
	* iresolve.c (gfc_resolve_fseek_sub): New.
	* check.c (gfc_check_fseek_sub): New.
	* intrinsic.texi (FSEEK): Updated.

2007-05-04  Tobias Burnus  <burnus@net-b.de>

	PR fortran/31803
	* expr.c (gfc_check_pointer_assign): Check for NULL pointer.

2007-05-04  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/31251
	* simplify.c (gfc_simplify_len): Only simplify integer lengths.

2007-05-04  Francois-Xavier Coudert <fxcoudert@gcc.gnu.org>

	PR fortran/31781
	* simplify.c (gfc_simplify_repeat): Don't put function call with
	side effect in a gcc_assert().

2007-05-04  Tobias Burnus  <burnus@net-b.de>

	PR fortran/25071
	* interface.c (compare_actual_formal): Check character length.

2007-05-01  Thomas Koenig  <tkoenig@gcc.gnu.org>

	PR fortran/31732
	* dependency.c (gfc_full_array_ref_p):  If the reference is
	to a single element, check that the array has a single
	element and that the correct element is referenced.

2007-05-01  Daniel Franke  <franke.daniel@gmail.com>

	* intrinsic.c (add_functions): Fixed ELEMENTAL specifications.
	(add_subroutines): Replaced magic numbers in function calls by
	ELEMENTAL and NOT_ELEMENTAL respectively.
	* intrinsic.texi (MVBITS): Changed class to elemental subroutine.
	(RANDOM_NUMBER): Changed class to subroutine.
	(HUGE, TINY): Changed class to inquiry function.

2007-04-30  Brooks Moses  <brooks.moses@codesourcery.com>

	* trans-const.c (gfc_conv_mpz_to_tree): Use mpz_get_double_int.
	(gfc_conv_tree_to_mpz): New function.
	(gfc_conv_mpfr_to_tree): Use real_from_mpfr.
	(gfc_conv_tree_to_mpfr): New function.
	* trans-const.h: (gfc_conv_tree_to_mpz): New prototype.
	(gfc_conv_tree_to_mpfr): New prototype.

2007-04-30  Daniel Franke  <franke.daniel@gmail.com>

	* intrinsic.texi (IERRNO): Changed class to non-elemental function.
	(LOG10): Removed COMPLEX as accepted argument type.
	(NEW_LINE): Changed class from elemental to inquiry function.
	(SIGN): Removed requirement of scalar arguments.
	(SNGL): Changed class to elemental function.

2007-04-29  Francois-Xavier Coudert <fxcoudert@gcc.gnu.org>

	PR fortran/31591
	* simplify.c (simplify_bound_dim): New function.
	(simplify_bound): Use the above. Perform simplification of LBOUND
	and UBOUND when DIM argument is not present.

2007-04-29  Daniel Franke  <franke.daniel@gmail.com>

	* gfortran.texi: Cleaned up keyword index.
	* invoke.texi: Likewise.
	* intrinsic.texi: Likewise.
			
2007-04-29  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/31645
	* scanner.c (load_file): Discard the byte order mark if one is
	found on the first non-preprocessor line of a file.

2007-04-29  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31711
	* trans-array.c (gfc_conv_resolve_dependencies): Create a temp
	whenever a dependency is found.

2007-04-28  Tobias SchlÃ¼ter  <tobi@gcc.gnu.org>

	* options.c (gfc_handle_option): Ensure requested free form line
	length is not too small.

2007-04-27  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi (Transfer): Improve documentation.

2007-04-27  Brooks Moses  <brooks.moses@codesourcery.com>

	* gfortran.texi (Option Index): Add @samp as needed.

2007-04-27  Daniel Franke  <franke.daniel@gmail.com>

	* gfortran.texi: Added node and menu entry for an option index.
	* invoke.texi: Moved command line option related entries of the concept 
	index to the option index.

2007-04-27  Daniel Franke  <franke.daniel@gmail.com>

	* intrinsic.texi (AND, FPUT, FPUTC, MODULO, OR, SET_EXPONENT,
	XOR): Fixed examples.

2007-04-27  Daniel Franke  <franke.daniel@gmail.com>

	* intrinsic.texi (PRODUCT, RESHAPE, SPACING, SPREAD, SUM, 
	SYSTEM_CLOCK, TRANSFER, UNPACK): New.
	(DATE_AND_TIME, CPU_TIME, RRSPACING): Added cross references.

2007-04-26  Daniel Franke  <franke.daniel@gmail.com>

	* intrinsic.texi (NULL, PACK, PRESENT, REPEAT, SCAN, SHAPE, 
	SIZE, TRANSPOSE, TRIM, VERIFY): New.
	(ADJUSTL, ADJUSTR, INDEX): Added cross references.
	(INT, INT2, INT8, LONG): Enabled section header.

2007-04-25  Janne Blomqvist  <jb@gcc.gnu.org>

	* module.c (module_char): Replace fgetc() with
	getc(). 
	(write_char): Replace fputc() with putc().
	* scanner.c (load_line): Replace fgetc() with getc().
	(gfc_read_orig_filename): Likewise.

2007-04-25  Tobias Burnus  <burnus@net-b.de>

	PR fortran/31668
	* error.c (error_print): Fix %% support.
	* intrinsic.c (sort_actual): Improve error message.
	* resolve.c (resolve_actual_arglist): Allow %VAL for
	interfaces defined in the module declaration part.

2007-04-25  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR libfortran/31299
	* intrinsic.texi (GETLOG): Update documentation to reflect
	library changes.

2007-04-24  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/31587
	* module.c (write_char): Add character to the MD5 buffer.
	(read_md5_from_module_file): New function.
	(gfc_dump_module): Compute MD5 for new module file. Call
	read_md5_from_module_file. Only overwrite old module file
	if the new MD5 is different.

2007-04-23  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31630
	* resolve.c (resolve_symbol): Allow resolution of formal
	namespaces nested within formal namespaces coming from modules.

	PR fortran/31620
	* trans-expr.c (gfc_trans_assignment): Make the call to
	gfc_trans_zero_assign conditional on the lhs array ref being
	the only reference.

2007-04-23  Tobias Burnus  <burnus@net-b.de>

	* primary.c (match_integer_constant): Mention -fno-range-check
	in the error message.

2007-04-21  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/31495
	* scanner.c (load_line):  Remove check for comment after ampersand and
	adjust tracking of ampersand.

2007-04-21  Andrew Pinski  <andrew_pinski@playstation.sony.com>

	* f95-lang.c (lang_tree_node): Use GENERIC_NEXT
	instead of checking GIMPLE_STMT_P in chain_next.

2007-04-17  Tobias SchlÃ¼ter  <tobi@gcc.gnu.org>

	* trans-types.h (gfc_packed): New enum.
	(gfc_get_nodesc_array_type): Change prototype to use new enum.
	* trans-types.c (gfc_get_nodesc_array): Use gfc_packed for
	argument packed.  Adapt all references to values accordingly.
	(gfc_sym_type): Use enum values in call to gfc_get_nodesc_array.
	(gfc_get_derived_type): Likewise.
	* trans-array.c (gfc_build_constant_array_constructor): Likewise.
	* trans-expr.c (gfc_get_interface_mapping_charlen): Changed packed
	argument to type gfc_packed.
	(gfc_add_interface_mapping): Use enum values in call to
	gfc_get_interface_mapping.
	* trans-decl.c (gfc_build_dummy_array_decl): Adapt to use enum
	values when determining packing.

	* trans-decl.c (gfc_finish_decl): Remove unused second argument
	'init'.  Simplify code accordingly.  Remove calls to
	gfc_fatal_error in favor of gcc_assert.
	(create_function_arglist): Remove second argument from calls to
	gfc_finish-decl.
	(gfc_trans_dummy_character): Likewise.

	* arith.h: Update copyright years.
	* dependency.h: Likewise.
	* gfortran.h: Likewise.
	* lang-specs.h: Likewise.
	* parse.h: Likewise.
	* symbol.c: Likewise.
	* trans.h: Likewise.
	* trans.c: Likewise.
	* trans-array.c: Likewise.
	* trans-common.c: Likewise.
	* trans-const.h: Likewise.
	* trans-const.c: Likewise.
	* trans-decl.c: Likewise.
	* trans-expr.c: Likewise.
	* trans-io.c: Likewise.
	* trans-openmp.c: Likewise.
	* trans-types.h: Likewise.
	* types.def: Likewise.

2007-04-17  Tobias SchlÃ¼ter  <tobi@gcc.gnu.org>

	PR fortran/31144
	* decl.c (gfc_sym_mangled_identifier): Use capital letters in name
	mangling.
	(gfc_sym_mangled_function_id): Likewise.

2007-04-15  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31204
	* primary.c (check_for_implicit_index): New function to check
	that a host associated variable is not an undeclared implied
	do loop index.
	(gfc_match_rvalue, match_variable): Use it and reset the
	implied_index attribute.
	* gfortran.h : Add the implied_index field to symbol_attribute.
	* match.c (gfc_match_iterator): Mark the iterator variable
	with the new attribute.
	* decl.c (build_sym): Reset the new attribute.

2007-04-15  Kazu Hirata  <kazu@codesourcery.com>

	* gfc-internals.texi: Fix typos.
	* simplify.c: Fix a comment typo.

2007-04-14  Bernhard Fischer  <aldot@gcc.gnu.org>

	* primary.c: Commentary typo fix; Add question about redundant (?)
	set.

2007-04-14  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/29507
	PR fortran/31404
	* expr.c (scalarize_intrinsic_call): New function to
	scalarize elemental intrinsic functions in initialization
	expressions.
	(check_init_expr): Detect elemental intrinsic functions
	in initalization expressions and call previous.

2007-04-13  Tobias Burnus  <burnus@net-b.de>

	PR fortran/31559
	* primary.c (match_variable): External functions
	are no variables.

2007-04-13  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31550
	* trans-types.c (copy_dt_decls_ifequal): Do not get pointer
	derived type components.

2007-04-13  Tobias SchlÃ¼ter  <tobi@gcc.gnu.org>

	PR fortran/18937
	* resolve.c: Include obstack.h and bitmap.h.  New variable
	labels_obstack.
	(code_stack): Add tail and reachable_labels fields.
	(reachable_labels): New function.
	(resolve_branch): Rework to use new fields in code_stack.
	(resolve_code): Call reachable_labels.
	(resolve_codes): Allocate and free labels_obstack.

2007-04-12  Tobias SchlÃ¼ter  <tobi@gcc.gnu.org>

	PR fortran/31250
	* decl.c (match_char_spec): Move check for negative CHARACTER
	length ...
	* resolve.c (resolve_charlen): ... here.
	(resolve_types): Resolve CHARACTER lengths earlier.

2007-04-12  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/31234
	* intrinsic.texi (RANDOM_SEED, RANDOM_NUMBER): New.

2007-04-12  Tobias SchlÃ¼ter  <tobi@gcc.gnu.org>

	PR fortran/31266
	* primary.c (gfc_variable_attr): Don't copy string length if it
	doesn't make sense.
	* resolve.c (resolve_code): Clarify error message.

	PR fortran/31471
	* decl.c (gfc_match_end): Also check for construct name in END
	FORALL and END WERE statements.
	* match.c (match_case_eos): Use uppercase for statement name in
	error message.
	(match_elsewhere): Construct name may appear iff construct has a
	name.

	* trans-types.c: Update copyright years.  Reformat long comment
	explaining array descriptor format.  Remove obsolete mention of
	TYPE_SET.

	* arith.c (gfc_arith_uplus): Rename to ...
	(gfc_arith_identity): ... this.
	(gfc_parentheses): New function.
	(gfc_uplus): Adapt to renamed function.
	* arith.h (gfc_parentheses): Add prototype.
	* expr.c (gfc_copy_expr): Deal with INTRINSIC_PARENTHESES.
	(simplifiy_intrinsic_op): Treat INTRINSIC_UPLUS separately from
	INTRINSIC_PARENTHESES.

2007-04-12  Tobias Burnus  <burnus@net-b.de>

	PR fortran/31472
	* decl.c (match_attr_spec): Allow PRIVATE/PUBLIC
	attribute in type definitions.
	(gfc_match_private): Allow PRIVATE statement only
	in specification part of modules.
	(gfc_match_public): Ditto for PUBLIC.
	(gfc_match_derived_decl): Allow PRIVATE/PUBLIC attribute only in
	specificification part of modules.

2007-04-07  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31257
	* intrinsic.c (add_functions): Add ref. to gfc_resolve_achar.
	* intrinsic.h : Add prototype for gfc_resolve_achar.
	* iresolve.c (gfc_resolve_achar): New function.

2007-04-07  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30880
	* resolve.c (resolve_fl_variable): Set flag to 2 for automatic
	arrays.  Make condition for automatic array error explicit.
	If a dummy, no error on an INTENT(OUT) derived type.

2007-04-07  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30872
	* expr.c (find_array_element): Correct arithmetic for rank > 1.

2007-04-07  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31222
	* check.c (numeric_check): If an expresson has not got a type,
	see if it is a symbol for which a default type applies.

2007-04-07  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31214
	* trans-decl.c (gfc_get_symbol_decl): Allow unreferenced use
	associated symbols.

2007-04-07  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31293
	* symbol.c (gfc_check_function_type): New function.
	* gfortran.h : Add prototype for previous.
	* parse.c (parse_progunit): Call it after parsing specification
	statements.

2007-04-05  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31483
	* trans-expr.c (gfc_conv_function_call): Give a dummy
	procedure the correct type if it has alternate returns.

2007-04-05  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31292
	* decl.c (gfc_match_modproc): Go up to the top of the namespace
	tree to find the module namespace for gfc_get_symbol.

2007-04-03  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/31304
	* fortran/gfortran.h (gfc_charlen_int_kind): New prototype.
	* fortran/trans-types.c (gfc_charlen_int_kind): New variable.
	(gfc_init_types): Define gfc_charlen_int_kind. 
	* fortran/trans.h (gfor_fndecl_string_repeat): Remove prototype.
	* fortran/trans-decl.c (gfor_fndecl_string_repeat): Delete.
	(gfc_build_intrinsic_function_decls): Don't set
	gfor_fndecl_string_repeat.
	* fortran/trans-intrinsic.c (gfc_conv_intrinsic_repeat): Rewrite
	so that we don't have to call a library function.
	* fortran/simplify.c (gfc_simplify_repeat): Perform the necessary
	checks on the NCOPIES argument, and work with arbitrary size
	arguments.

2007-03-31  Tobias Burnus  <burnus@net-b.de>

	* intrinsic.c (add_functions): Fix name of dummy argument
	  for new_line and exit intrinsic.

2007-03-31  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31160
	* gfortran.texi: Add a section for the %VAL, %REF and %LOC
	extensions.

2007-03-30  Rafael Avila de Espindola  <espindola@google.com>

	* trans-types.c (gfc_signed_or_unsigned_type): Remove.
	(gfc_unsigned_type): Use get_signed_or_unsigned_type instead of
	gfc_signed_or_unsigned_type.
	(gfc_signed_type): Ditto.
	* trans-types.h (gfc_signed_or_unsigned_type): Remove.
	* f95-lang.c (LANG_HOOKS_SIGNED_OR_UNSIGNED_TYPE): Remove.

2007-03-30  Tobias SchlÃ¼ter  <tobi@gcc.gnu.org>

	* symbol.c (gfc_find_gsymbol): Simplify, don't unconditionally
	descend into all branches.

2007-03-29  Tobias SchlÃ¼ter  <tobi@gcc.gnu.org>

	* intrinsic.c (conv_name): Let gfc_get_string handle the format.
	(find_conv): Compare pointers instead of calling strcmp.
	(find_sym): Likewise, but ensure that the compared pointer is in
	the global string table.

2007-03-28  Tobias SchlÃ¼ter  <tobi@gcc.gnu.org>

	* gfc-internals.texi: Fix output filename.  Merge type index into
	concept index.  Start documentation of gfc_code structure.

2007-03-26  Brooks Moses  <brooks.moses@codesourcery.com>

	* gfc-internals.texi: New file,
	* Make-lang.in: Add rules to convert it to dvi, pdf, and info.

2007-03-26  Brooks Moses  <brooks.moses@codesourcery.com>
 
	* error.c (show_locus): Remove always-false test.

2007-03-26  Brooks Moses  <brooks.moses@codesourcery.com>

	* lang.opt: Minor edits to descriptions.

2007-03-25  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/30877
	* fortran/interface.c (check_operator_interface): Implement
	the standard checks on user operators extending intrinsic operators.
	* fortran/resolve.c (resolve_operator): If the ranks of operators
	don't match, don't error out but try the user-defined ones first.

2007-03-24  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/30655
	* expr.c (check_dimension): Fix logic of comparisons.

2007-03-24  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31215
	* trans-expr.c (gfc_apply_interface_mapping_to_expr): Return
	int result that is non-zero if the expression is the function
	result.  Only the characteristics of the result expression
	can be used in a procedure interface, so simplify LEN in situ
	using its character length.

	PR fortran/31209
	PR fortran/31200
	* trans-expr.c (gfc_conv_function_call): Do not use
	gfc_conv_expr_reference for actual pointer function with formal
	target because a temporary is created that does not transfer
	the reference correctly.  Do not indirect formal pointer
	functions since it is the function reference that is needed.

2007-03-24  Brooks Moses  <brooks.moses@codesourcery.com>

	* gfortran.h: Edit comments on GFC_STD_*.

2007-03-23  Brooks Moses  <brooks.moses@codesourcery.com>

	* invoke.texi: Misc. small typo fixes.
	(-Wcharacter-truncation): Add.
	(-Wnonstd-intrinsics): Correct spelling.
	(-std=): Edit.
	(-fintrinsic-modules-path): Add.

2007-03-23  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>

	PR fortran/30834
	* arith.c (complex_pow): Rewrite to handle large power.
	(gfc_arith_power): Handle large power in the real and integer
	cases.

2007-03-22  Francois-Xavier Coudert  <coudert@clipper.ens.fr>

	PR fortran/31262
	* trans-const.c (gfc_conv_mpz_to_tree): Allow integer constants
	larger than twice the width of a HOST_WIDE_INT.

2006-03-22  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31193
	* trans-intrinsic.c (gfc_size_in_bytes): Remove function.
	(gfc_conv_intrinsic_array_transfer): Remove calls to previous.
	Explicitly extract TREE_TYPEs for source and mold.  Use these
	to calculate length of source and mold, except for characters,
	where the se string_length is used.  For mold, the TREE_TYPE is
	recalculated using gfc_get_character_type_len so that the
	result is correctly cast for character literals and substrings.
	Do not use gfc_typenode_for_spec for the final cast.

2007-03-22  Tobias SchlÃ¼ter  <tobi@gcc.gnu.org>

	PR fortran/20897
	* decl.c (gfc_match_derived_decl): Reliably reject
	'doubleprecision' and 'doublecomplex' as type names.

2007-03-19  Francois-Xavier Coudert  <coudert@clipper.ens.fr>

	PR fortran/31203
	* trans-expr.c (gfc_trans_init_string_length): Length should
	never be negative.
	(gfc_conv_function_call): Likewise.

2007-03-18  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30531
	PR fortran/31086
	* symbo.c : Add gfc_derived_types.
	(gfc_free_dt_list): Free derived type list gfc_derived_types.
	(gfc_free_namespace): Remove call to gfc_free_dt_list.
	(gfc_symbol_done_2): Call  gfc_free_dt_list.
	* gfortran.h : Declare gfc_derived_types to be external. Remove
	derived types field from gfc_namespace.
	* resolve.c (resolve_fl_derived): Refer to gfc_derived types
	rather than namespace derived_types.
	(resolve_fntype): Remove special treatment for module
	derived type functions.
	* trans-types.c (gfc_get_derived_type): Remove search for like
	derived types.  Finish by copying back end declaration to like
	derived types in the derived type list gfc_derived_types.

	2007-03-17  Francois-Xavier Coudert  <coudert@clipper.ens.fr>

	PR fortran/31120
	* trans-expr.c (gfc_conv_powi): Make n argument unsigned hwi.
	(gfc_conv_cst_int_power): Handle integer exponent with care,
	since it might be too large for us.

2007-03-17  Francois-Xavier Coudert  <coudert@clipper.ens.fr>

	PR fortran/31184
	* invoke.texi: Fix typo.

2007-03-16  Tobias Burnus  <burnus@net-b.de>

	* trans-decl.c (gfc_generate_function_code): Use all arguments of
	  set_std.

2007-03-15  Francois-Xavier Coudert  <coudert@clipper.ens.fr>

	* gfortran.h (gfc_option_t): Add flag_backtrace field.
	* lang.opt: Add -fbacktrace option.
	* invoke.texi: Document the new option.
	* trans-decl.c (gfc_build_builtin_function_decls): Add new
	option to the call to set_std.
	* options.c (gfc_init_options, gfc_handle_option): Handle the
	new option.

2007-03-15  Tobias Burnus  <burnus@gcc.gnu.org>
	    Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30922
	* decl.c (gfc_match_import): If the parent of the current name-
	space is null, try looking for an imported symbol in the parent
	of the proc_name interface.
	* resolve.c (resolve_fl_variable): Do not check for blocking of
	host association by a same symbol, if the symbol is in an
	interface body.

2007-03-15  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30879
	* decl.c (match_data_constant): Before going on to try to match
	a name, try to match a structure component.


	PR fortran/30870
	* resolve.c (resolve_actual_arglist): Do not reject a generic
	actual argument if it has a same name specific interface.

	PR fortran/31163
	* trans-array.c (parse_interface): Do not nullify allocatable
	components if the symbol has the saved attribute.

2007-03-14  Francois-Xavier Coudert  <coudert@clipper.ens.fr>

	* trans-array.c (gfc_trans_auto_array_allocation): Replace
	fold(convert()) by fold_convert().
	(gfc_duplicate_allocatable): Likewise.
	* trans-intrinsic.c (gfc_conv_intrinsic_dot_product): Use
	build_int_cst instead of converting an integer_zero_node
	to the final type.

2007-03-14  Jakub Jelinek  <jakub@redhat.com>

	* module.c (mio_typespec): Don't look at ts->cl if not BT_CHARACTER.

2007-03-13  Brooks Moses  <brooks.moses@codesourcery.com>

	PR fortran/30933
	PR fortran/30948
	PR fortran/30953
	* intrinsics.texi (CHDIR): Fix argument names, note
	that STATUS must be a default integer.
	(CTIME): Fix argument names, note that RESULT must
	be a default integer.
	(EXIT): Note that STATUS must be a default integer.

2007-03-13  Brooks Moses  <brooks.moses@codesourcery.com>

	PR fortran/28068
	* intrinsic.texi: General whitespace cleanup, remove
	comment about missing intrinsics.
	(menu): Add lines for new entries listed below.
	(ACOSH): Mention specific function DACOSH, correct
	description phrasing.
	(ASINH): Mention specific function DASINH, correct
	description phrasing.
	(ATANH): Mention specific function DATANH, correct
	description phrasing.
	(COS): Add index entry for CCOS.
	(CPU_TIME): Correct "REAL" to "REAL(*)".
	(EXP): Add index entry for CEXP.
	(INT): Correct argument name to "A".
	(INT2): New entry.
	(INT8): New entry.
	(LONG): New entry.
	(MAX): Add index entries for specific variants.
	(MCLOCK): New entry.
	(MCLOCK8): New entry.
	(SECNDS): Adjust to a more standard form.
	(SECOND): New entry.
	(TIME): Add cross-reference to MCLOCK.
	(TIME8): Add cross-reference to MCLOCK8.

2007-03-11  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30883
	* parse.c (parse_interface): Use the default types from the
	formal namespace if a function or its result do not have a type
	after parsing the specification statements.

2007-03-08  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi: (ICHAR) Improve internal I/O note.
	(ACHAR): Reference it.
	(CHAR): Reference it.
	(IACHAR): Reference it.

2007-03-08  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi: (LINK) Document function form.
	(RENAME): Likewise.
	(SYMLNK): Likewise.
	(SYSTEM): Likewise.
	(UNLINK): Likewise.

2007-03-08  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi: minor typo fixes, removed prologue.
	(FSEEK): moved to correct place in alphabetical order.

2007-03-08  Daniel Franke  <franke.daniel@gmail.com>

	PR fortran/30947
	* check.c (gfc_check_alarm_sub): Added check for default integer 
	kind of status argument.
	* iresolve.c (gfc_resolve_alarm_sub): Removed conversion of 
	status argument.
	* intrinsic.texi (ALARM): Extended documentation.

2007-03-08  Daniel Franke  <franke.daniel@gmail.com>

	* intrinsic.texi (GERROR, ISATTY, TTYNAM): New.
	(ABORT, FLUSH, FNUM, IRAND, MALLOC, SIGNAL, SRAND): Fixed typo.
	* intrinsic.c (add_subroutines): Adjusted dummy argument names 
	of GERROR and TTYNAM.

2007-07-08  Tobias Burnus  <burnus@net-b.de>

	* module.c (gfc_match_use): Support renaming of operators
	in USE statements.
	* gfortran.texi (Fortran 2003 Status): Document support of
	renaming of operators.

2007-07-08  Tobias Burnus  <burnus@net-b.de>

	PR fortran/30973
	* module.c (read_module): Always import module name as symbol.
	(gfc_match_use): Disallow module name in the only clause of
	a use statement.

2007-03-08  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/31011
	* expr.c (find_array_section): Correct arithmetic for section
	size.

2007-03-07  Brooks Moses  <brooks.moses@codesourcery.com>

	* iresolve.c (gfc_resolve_ishftc): Correct s_kind value.

2007-03-06  Daniel Franke  <franke.daniel@gmail.com>

	PR documentation/30950
	* intrinsic.texi (AND, CPU_TIME): Fix dummy argument names.
	(FREE): Fix call syntax.

2007-03-06  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi: Limit column widths to a total of .85.

2007-03-05  Brooks Moses  <brooks.moses@codesourcery.com>

	* gfortran.texi (GFortran and G77): Rewrite completely.

2007-03-05  Brooks Moses  <brooks.moses@codesourcery.com>

	* match.c (gfc_match_name): Expanded comment.

2007-03-05  Brooks Moses  <brooks.moses@codesourcery.com>

	* gfortran.texi (Old-style kind specifications): Document
	special handling of old-style kind specifiers for COMPLEX.
	* decl.c (gfc_match_old_kind_spec): Document kind/bytesize
	assumptions for COMPLEX in comment.

2007-03-05  Brooks Moses  <brooks.moses@codesourcery.com>

	PR 31050
	* gfortranspec.c (lang_specific_driver): Update program
	name and copyright date.

2007-03-03  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30882
	* check.c (dim_rank_check): The shape of subsections of
	assumed-size arrays is known.

2007-03-02  Paul Thomas  <pault@gcc.gnu.org>
	    Tobias Burnus  <burnus@net-b.de>

	PR fortran/30873
	* decl.c (gfc_match_entry): Remove erroneous entry result check.

2007-03-01  Brooks Moses  <brooks.moses@codesourcery.com>

	* Make-lang.in: Add install-pdf target as copied from
	automake v1.10 rules.

2007-03-01  Tobias Burnus  <burnus@net-b.de>

	PR fortran/30865
	* trans-intrinsic.c (gfc_conv_intrinsic_size): Compare pointers.

2007-02-28  Tobias Burnus  <burnus@net-b.de>
	    Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30888
	PR fortran/30887
	* resolve.c (resolve_actual_arglist): Allow by-value
	arguments and non-default-kind for %VAL().
	* trans-expr.c (conv_arglist_function): Allow
	non-default-kind for %VAL().

2007-02-28  Tobias Burnus  <burnus@net-b.de>

	PR fortran/30968
	* primary.c (next_string_char): Correct reading a character
	after the delimiter.
	(match_string_constant): Print warning message only once.

2007-02-27  Richard Guenther  <rguenther@suse.de>

	* trans-array.c (structure_alloc_comps): Use correct type
	for null pointer constant.

2007-02-26  Brooks Moses  <brooks.moses@codesourcery.com>

	* gfortran.texi: Standardize title page, remove version number
	from copyright page.

2007-02-26  Thomas Koenig  <Thomas.Koenig@online.de>
	    Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30865
	* trans-intrinsic.c (gfc_conv_intrinsic_size):
	If dim is an optional argument, check for its
	presence and call size0 or size1, respectively.

2007-02-23  Paul Thomas <pault@gcc.gnu.org>

	PR fortran/30660
	* resolve.c (has_default_initializer): New function.
	(resolve_fl_variable): Call has_default_initializer to determine if
	the derived type has a default initializer to its ultimate
	components.


2007-02-22  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	* options.c (set_default_std_flags): New function to consolidate
	setting the flags.
	(gfc_init_options): Use new function.
	(gfc_handle_option): Use new function.

2007-02-22  Brooks Moses  <brooks.moses@codesourcery.com>

	* gfortran.texi (Old-style kind specifications): Document
	special handling of old-style kind specifiers for COMPLEX.
	* decl.c (gfc_match_old_kind_spec): Documented kind/bytesize
	assumptions in comment.

2007-02-21  Bernhard Fischer  <aldot@gcc.gnu.org>

	* parse.c (next_free): Gooble spaces after OpenMP sentinel.

2007-02-20  Thomas Koenig  <Thomas.Koenig@online.de>

	PR fortran/30869
	* match.c (gfc_match_iterator): Remove conflict between
	loop variable and pointer.

2007-02-20  Tobias Burnus  <burnus@net-b.de>

	PR fortran/30522
	* symbol.c (gfc_add_volatile): Allow to set VOLATILE
	  attribute for host-associated variables.
	* gfortran.h (symbol_attribute): Save namespace
	  where VOLATILE has been set.
	* trans-decl.c (gfc_finish_var_decl): Move variable
	  declaration to the top.

2007-02-20  Tobias Burnus  <burnus@net-b.de>

	PR fortran/30783
	* resolve.c (resolve_symbol): Add character dummy VALUE check.

2007-02-19  Thomas Koenig  <Thomas.Koenig@online.de>

	PR libfortran/30533
	* fortran/iresolve.c (gfc_resolve_maxloc): Remove coercion of
	argument to default integer.
	(gfc_resolve_minloc): Likewise.

2007-02-18  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/30681
	* options.c (gfc_init_options): Relax warning level for obsolescent.
	* match.c (match_arithmetic_if): Change to obsolescent from deleted.
	(gfc_match_if): Same.

2007-02-18  Roger Sayle  <roger@eyesopen.com>

	* trans-array.c (gfc_build_constant_array_constructor): When the
	shape of the constructor is known, use that to construct the
	gfc_array_spec.
	(gfc_trans_constant_array_constructor): Initialize the "info"
	information for all of the dimensions of the array constructor.
	(constant_array_constructor_loop_size): New function.
	(gfc_trans_array_constructor): Use it to determine whether a
	loop is suitable for "constant array constructor" optimization.

	* trans-intrinsic.c (gfc_conv_intrinsic_anyall): Use fold_build2
	instead of build2, to avoid conditions like "(a != b) != 0".

2007-02-18  Roger Sayle  <roger@eyesopen.com>
	    Paul Thomas <pault@gcc.gnu.org>

	PR fortran/30400
	* match.c (match_forall_iterator): Use gfc_match_expr instead
	of gfc_match_variable to match the iterator variable.  Return
	MATCH_NO if not a variable.  Remove the reset of the symbol's
	flavor in cleanup.

2007-02-16  Tobias Burnus  <burnus@net-b.de>

	PR fortran/30793
	* trans-decl.c (gfc_generate_function_code): Do not initialize
	pointers to derived components.

2007-02-15  Sandra Loosemore  <sandra@codesourcery.com>
	    Brooks Moses  <brooks.moses@codesourcery.com>
	    Lee Millward  <lee.millward@codesourcery.com>

	* trans-expr.c (gfc_conv_power_op): Use build_call_expr.
	(gfc_conv_string_tmp): Likewise.
	(gfc_conv_concat_op): Likewise.
	(gfc_build_compare_string): Likewise.
	(gfc_conv_function_call): Use build_call_list instead of build3.

	* trans-array.c (gfc_trans_allocate_array_storage): Use
	build_call_expr.
	(gfc_grow_array): Likewise.
	(gfc_trans_array_ctor_element): Likewise.
	(gfc_trans_array_constructor_value): Likewise.
	(gfc_array_allocate): Likewise.
	(gfc_array_deallocate): Likewise.
	(gfc_trans_auto_array_allocation): Likewise.
	(gfc_trans_dummy_array_bias): Likewise.
	(gfc_conv_array_parameter): Likewise.
	(gfc_trans_dealloc_allocated): Likewise.
	(gfc_duplicate_allocatable): Likewise.

	* trans-openmp.c (gfc_trans_omp_barrier): Use build_call_expr.
	(gfc_trans_omp_flush): Likewise.

	* trans-stmt.c (gfc_conv_elementel_dependencies): Use build_call_expr.
	(gfc_trans_pause): Likewise.
	(gfc_trans_stop): Likewise.
	(gfc_trans_character_select): Likewise.
	(gfc_do_allocate): Likewise.
	(gfc_trans_assign_need_temp): Likewise.
	(gfc_trans_pointer_assign_need_temp): Likewise.
	(gfc_trans_forall_1): Likewise.
	(gfc_trans_where_2): Likewise.
	(gfc_trans_allocate): Likewise.
	(gfc_trans_deallocate): Likewise.

	* trans.c (gfc_trans_runtime_check): Use build_call_expr.

	* trans-io.c (gfc_trans_open): Use build_call_expr.
	(gfc_trans_close): Likewise.
	(build_filepos): Likewise.
	(gfc_trans_inquire): Likewise.
	(NML_FIRST_ARG): Delete.
	(NML_ADD_ARG): Delete.
	(transfer_namelist_element): Use build_call_expr.
	(build_dt): Likewise.
	(gfc_trans_dt_end): Likewise.
	(transfer_expr): Likewise.
	(transfer_array-desc): Likewise.

	* trans-decl.c (gfc_generate_function_code): Use build_call_expr.
	(gfc_generate_constructors): Likewise.

	* trans-intrinsic.c (gfc_conv_intrinsic_ctime): Use build_call_expr.
	(gfc_conv_intrinsic_fdate): Likewise.
	(gfc_conv_intrinsic_ttynam): Likewise.
	(gfc_conv_intrinsic_array_transfer): Likewise.
	(gfc_conv_associated): Likewise.
	(gfc_conv_intrinsic_si_kind): Likewise.
	(gfc_conv_intrinsic_trim): Likewise.
	(gfc_conv_intrinsic_repeat: Likewise.
	(gfc_conv_intrinsic_iargc): Likewise.

2007-02-14  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/30779
	* scanner.c (gfc_next_char_literal): Add check for end of file after
	call to advance_line.

2007-02-14  Steven G. Kargl  <kargl@gcc.gnu.org>

	PR fortran/30799
	* primary.c (match_logical_constant): Return MATCH_ERROR on invalid
	kind.

2007-02-14  Steven G. Kargl  <kargl@gcc.gnu.org>

	* misc.c (gfc_typename): Fix potential buffer overflow.

2007-02-13  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30554
	* module.c (read_module): Set pointer_info to referenced if the
	symbol has no namespace.

2007-02-12  Nick Clifton  <nickc@redhat.com>

	* lang.opt: Add Warning attribute to warning options.

2007-02-11  Daniel Franke  <franke.daniel@gmail.com>

	* intrinsic.texi (HOSTNM): Fix typographical error in syntax.
	(SLEEP): Added section and documentation.

2007-02-11  Tobias SchlÃ¼ter  <tobi@gcc.gnu.org>

	PR fortran/30478
	* decl.c (add_init_expr_to_sym): Remove ENUM specific code.
	(variable_decl): Likewise.  Rewrap comment.
	(match_attr_spec): Remove ENUM specific code.
	(gfc_match_enum): Fix typo in error message.
	(enumerator_decl): New function.
	(gfc_match_enumerator_def): Use enumerator_decl instead of
	variable_decl.  Adapt code accordingly.

2007-02-11  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30554
	* module.c (find_symtree_for_symbol): New function to return
	a symtree that is not a "unique symtree" given a symbol.
	(read_module): Do not automatically set pointer_info to
	referenced because this inhibits the generation of a unique
	symtree.  Recycle the existing symtree if possible by calling
	find_symtree_for_symbol.

	PR fortran/30319
	* decl.c (add_init_expr_to_sym): Make new charlen for an array
	constructor initializer.

2007-02-10  Richard Henderson  <rth@redhat.com>, Jakub Jelinek  <jakub@redhat.com>

	* f95-lang.c (gfc_init_builtin_functions): Add __emutls_get_address
	and __emutls_register_common.
	* openmp.c (gfc_match_omp_threadprivate): Don't error if !have_tls.
	* trans-common.c (build_common_decl): Don't check have_tls.
	* trans-decl.c (gfc_finish_var_decl): Likewise.
	* types.def (BT_WORD, BT_FN_PTR_PTR): New.
	(BT_FN_VOID_PTR_WORD_WORD_PTR): New.

2007-02-09  Tobias Burnus  <burnus@net-b.de>

	PR fortran/30512
	* trans-intrinsic.c (gfc_conv_intrinsic_minmaxloc,
	  gfc_conv_intrinsic_minmaxval): Use HUGE-1 for most negative integer.

2007-02-09  Francois-Xavier Coudert  <coudert@clipper.ens.fr>

	PR fortran/30720
	* trans-array.c (gfc_trans_create_temp_array): Remove use of the
	function argument. Always generate code for negative extent.
	Simplify said code.
	* trans-array.h (gfc_trans_create_temp_array): Change prototype.
	* trans-expr.c (gfc_conv_function_call): Remove use of last argument
	of gfc_trans_create_temp_array.
	* trans-intrinsic.c (gfc_conv_intrinsic_array_transfer): Likewise.
	* trans-stmt.c (gfc_conv_elemental_dependencies): Likewise.

2007-02-08  Roger Sayle  <roger@eyesopen.com>

	* trans-stmt.c (gfc_trans_forall_1): Optimize the cases where the
	mask expression is a compile-time constant (".true." or ".false.").

2007-02-04  Francois-Xavier Coudert  <coudert@clipper.ens.fr>

	PR fortran/30611
	* trans-intrinsic.c (gfc_conv_intrinsic_repeat): Evaluate
	arguments only once. Generate check that NCOPIES argument is not
	negative.

2007-02-04  Steven G. Kargl <kargl@gcc.gnu.org>

	PR fortran/30605
	* fortran/invoke.texi: Update documentation.
	* fortran/options.c (gfc_post_options): Deal with tabs with -std=f2003
	and -pedantic.

2007-02-03  Kazu Hirata  <kazu@codesourcery.com>

	* trans-array.c: Fix a comment typo.

2007-02-03  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30514
	* array.c (match_array_element_spec): If the length of an array is
	negative, adjust the upper limit to make it zero length.

	PR fortran/30660
	* resolve.c (pure_function, resolve_function): Initialize name to
	null to clear up build warnings.
	(resolve_fl_variable): Look at components explicitly to check for
	default initializer, rather than using gfc_default_initializer.

2007-02-02  Steven G. Kargl <kargl@gcc.gnu.org>

	PR fortran/30683
	* resolve.c (resolve_generic_f): Check for non-NULL sym.

2007-02-02  Roger Sayle  <roger@eyesopen.com>

	* trans.c (gfc_build_array_ref): Use STRIP_TYPE_NOPS to eliminate
	NON_LVALUE_EXPR nodes and useless type conversions.

2007-02-02  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30284
	PR fortran/30626
	* trans-expr.c (gfc_conv_aliased_arg): Remove static attribute
	from function and make sure that substring lengths are
	translated.
	(is_aliased_array): Remove static attribute.
	* trans.c : Add prototypes for gfc_conv_aliased_arg and
	is_aliased_array.
	* trans-io.c (set_internal_unit): Add the post block to the
	arguments of the function.  Use is_aliased_array to check if
	temporary is needed; if so call gfc_conv_aliased_arg.
	(build_dt): Pass the post block to set_internal_unit and
	add to the block after all io activiy is done.

2007-02-01  Roger Sayle  <roger@eyesopen.com>

	* trans-array.c (gfc_conv_expr_descriptor): We don't need to use
	a temporary array to pass a constant non-character array constructor.
	Generalize the descriptor generation code to handle scalarizer
	"info" without an array reference.

2007-02-01  Roger Sayle  <roger@eyesopen.com>

	* dependency.c (gfc_check_dependency) <EXPR_ARRAY>: Implement
	dependency checking for array constructors.

2007-02-01  Roger Sayle  <roger@eyesopen.com>

	* trans-stmt.c (compute_overall_iter_number): Document function
	arguments.  Generalize "unconditional forall nest with constant
	bounds" optimization to eliminate unconditional inner loops with
	constant bounds.

2007-01-31  Tobias Burnus  <burnus@net-b.de>

	PR fortran/30520
	* interface.c (compare_actual_formal): Check conformance between
	  actual and VOLATILE dummy arguments.
	* symbol.c (gfc_add_volatile): Allow setting of VOLATILE
	  multiple times in different scopes.
	* decl.c (gfc_match_volatile): Search symbol in host association.

2007-01-31  Kazu Hirata  <kazu@codesourcery.com>

	* simplify.c, trans-array.c: Fix comment typos.

2007-01-30  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* invoke.texi (Code Gen Options): Fix abbreviation typo.
	* intrinsic.texi (ACCESS, LSHIFT, RSHIFT): Fix typos.

2007-01-30  Steve Ellcey  <sje@cup.hp.com>

	PR fortran/30432
	* trans-types.c (gfc_get_function_type): Do not add void_type_node
	to empty arg list.
	* trans-decl.c (create_function_arglist): Change assert.

2007-01-29  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30554
	* module.c (read_module): If a symbol is excluded by an ONLY
	clause, check to see if there is a symtree already loaded. If
	so, attach the symtree to the pointer_info.

2007-01-28  Thomas Koenig  <Thomas.Koenig@online.de>

	PR libfortran/30389
	* gfortran.h: Remove gfc_simplify_init_1.
	* arith.h: Remove third argument from gfc_compare_string.
	* arith.c (gfc_compare_expression): Remove third argument
	from call to gfc_compare_string.
	(gfc_compare_string): Remove third argument xcoll_table.
	Remove use of xcoll_table.
	* misc.c (gfc_init_1): Remove call to gfc_simplify_init_1.
	* simplify.c (ascii_table): Remove.
	(xascii_table): Likewise.
	(gfc_simplify_achar): ICE if extract_int fails.  Remove use of
	ascii_table.  Warn if -Wsurprising and value < 0 or > 127.
	(gfc_simplify_char): ICE if extract_int fails. Error if
	value < 0 or value > 255.
	(gfc_simplify_iachar): Remove use of xascii_table.
	Char values outside of 0..255 are an ICE.
	(gfc_simplify_lge): Remove use of xascii_table.
	(gfc_simplify_lgt): Likewise.
	(gfc_simplify_lle): Likewise.
	(gfc_simplify_llt): Likewise.
	(invert_table): Remove.
	(gfc_simplify_init_1): Remove.

2007-01-27  Roger Sayle  <roger@eyesopen.com>

	* trans-stmt.c (forall_info): Replace the next_nest and outer
	fields that previously implemented a doubly-linked list with a
	single prev_nest field (singly-linked list).
	(gfc_trans_nested_forall_loop): The nested_forall_info argument
	now denotes the innermost FORALL in the loop nest.
	(compute_overall_iter_number): Use prev_nest instead of next_nest.
	(gfc_trans_forall_1): Link/cons the new "info" to the head of the
	nested_forall_info linked list.  Free the current "info" when done.

2007-01-27  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30407
	* trans-expr.c (gfc_conv_operator_assign): New function.
	* trans.h : Add prototype for gfc_conv_operator_assign.
	* trans-stmt.c (gfc_trans_where_assign): Add a gfc_symbol for
	a potential operator assignment subroutine.  If it is non-NULL
	call gfc_conv_operator_assign instead of the first assignment.
	( gfc_trans_where_2): In the case of an operator assignment,
	extract the argument expressions from the code for the
	subroutine call and pass the symbol to gfc_trans_where_assign.
	resolve.c (resolve_where, gfc_resolve_where_code_in_forall,
	gfc_resolve_forall_body): Resolve the subroutine call for
	operator assignments.

2007-01-26  Steven Bosscher  <stevenb.gcc@gmail.com>
	    Steven G. Kargl <kargl@gcc.gnu.org>

	PR fortran/30278
	* fortran/io.c (next_char): Deal with backslash escaped characters.
	Issue warnings in non -std=gnu cases.
	* fortran/primary.c (next_string_char): Issue warnings in non

2007-01-26  Tobias Burnus  <burnus@net-b.de>

	* lang-specs.h: Add support for .f03 and .F03 extensions.
	* gfortran.texi: Document .f03 extension.
	* options.c (form_from_filename): Recognize .f03.

2007-01-25  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>

	PR fortran/30437
	* lang.opt (Wall): Remove RejectNegative.
	* options.c (gfc_handle_option): Wall can be disabled.
	(set_Wall): Add a parameter for disabling Wall.
	
2007-01-23  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/30532
	* scanner.c (load_line): Remove check fot ctrl-z and don't gobble.
	
2007-01-23  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30481
	* match.c (gfc_match_namelist): Add check for assumed size character
	in namelist and provide error if found.

2007-01-21  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi (ACHAR): Added cross-references.
	(CHAR): Put cross-references in alphabetical order.
	(IACHAR): Added cross-references.
	(ICHAR): Added cross-references.

2007-01-20  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi: Edited all "Syntax" examples to a consistent form.
	(MAXVAL): Corrected description of result characteristics.
	(MINVAL): Same.
	(UMASK): Added documentation.

2007-01-20  Steven G. Kargl  <kargl@gcc.gnu.org>

	* openmp.c, matchexp.c, module.c, scanner.c, resolve.c, st.c,
	parse.c, primary.c, options.c, misc.c, simplify.c: Next installment
	in the massive whitespace patch.

2007-01-20  Roger Sayle  <roger@eyesopen.com>

	* module.c (mio_array_ref): The dimen_type fields of an array ref
	are an enumerated type and can't be read/written directly with a
	call to mio_integer.  Instead loop over and cast each element.

2007-01-20  Roger Sayle  <roger@eyesopen.com>

	* dependency.c (gfc_full_array_ref_p): Check that ref->next is NULL,
	i.e. that the ARRAY_REF doesn't mention components.
	* trans-array.c (gfc_constant_array_constructor_p): Export external
	function renamed from constant_array_constructor_p.
	(gfc_build_constant_array_constructor): Export.
	(gfc_trans_array_constructor): Update call to the renamed function
	constant_array_constructor_p.
	* trans-array.h (gfc_constant_array_constructor_p): Prototype here.
	(gfc_build_constant_array_constructor): Likewise.
	* trans-expr.c (gfc_build_memcpy_call): New helper function split
	out from gfc_trans_array_copy.
	(gfc_trans_array_copy): Use gfc_build_memcpy_call.
	(gfc_trans_array_constructor_copy): New function to optimize
	assigning an entire array from a constant array constructor.
	(gfc_trans_assignment): Call gfc_trans_array_constructor_copy
	when appropriate.

2007-01-20  Roger Sayle  <roger@eyesopen.com>

	* trans-intrinsic.c (gfc_conv_intrinsic_sign): New branchless
	implementation for the SIGN intrinsic with integral operands.
	(gfc_conv_intrinsic_minmax): Fix whitespace.

2007-01-20  Francois-Xavier Coudert  <coudert@clipper.ens.fr>

	* gfortran.h (gfc_options_t): Add flag_allow_leading_underscore.
	* lang.opt: Add -fallow-leading-underscore.
	* match.c (gfc_match_name): Allow leading underscore in symbol
	name if -fallow-leading-underscore is used.
	* symbol.c (gfc_get_default_type): Add special case for symbol
	names beginning with an underscore.
	* trans-decl.c (gfc_get_extern_function_decl,
	gfc_build_intrinsic_function_decls): Add _gfortran prefix to
	library symbols selected_int_kind, selected_real_kind and 
	all specifics.
	* options.c (gfc_init_options, gfc_handle_option): Handle the
	new -fallow-leading-underscore option.

2007-01-20  Francois-Xavier Coudert  <coudert@clipper.ens.fr>

	PR fortran/30446
	* options.c (gfc_handle_module_path_options): Path used in -J
	option is now added to the module search path.

2007-01-20  Richard Guenther  <rguenther@suse.de>

	PR fortran/30223
	* f95-lang.c (gfc_init_builtin_functions): Provide cbrt and
	cexpi builtins if we have TARGET_C99_FUNCTIONS.  Provide
	sincos builtins if the target has sincos.

2007-01-19  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi (MATMUL): Corrected a typo.
	(MAX): Separated @var arguments.
	(MIN): Separated @var arguments.

2007-01-19  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi: general whitespace cleanup.
	(menu): Added TIME8, removed UNMASK.
	(AINT): Clarified argument requirement.
	(ANINT): Clarified argument requirement.
	(CEILING): Clarified argument requirement.
	(CHAR): Clarified argument requirement.
	(CMPLX): Clarified argument requirement.
	(DCMPLX): Clarified argument requirement.
	(FGET): Line rewrapping.
	(FLOOR): Clarified argument requirement.
	(GMTIME): Added documentation.
	(IAND): Added cross-reference.
	(IBCLR): Added cross-reference.
	(IBSET): Added cross-reference.
	(IEOR): Added cross-reference.
	(INT): Collapsed examples, clarified argument requirement.
	(IOR): Added cross-references.
	(LEN_TRIM): Corrected result kind.
	(LINK): Added cross-reference.
	(LLT): Removed "documentation pending".
	(LOGICAL): Added documentation.
	(LSHIFT): Added documentation.
	(LTIME): Added documentation.
	(MATMUL): Added documentation.
	(MAX): Added documentation.
	(MAXLOC): Added documentation.
	(MAXVAL): Added documentation.
	(MERGE): Added documentation.
	(MIN): Added documentation.
	(MINLOC): Added documentation.
	(MINVAL): Added documentation.
	(MVBITS): Moved to correct place, added documentation.
	(NOT): Added documentation.
	(PERROR): Added documentation.
	(RAN): Moved to correct place, added documentation.
	(REAL): Clarified argument requirement.
	(RENAME): Added documentation.
	(RSHIFT): Clarified argument requirement.
	(SIGN): Corrected table specification.
	(SYMLNK): Added documentation.
	(SYSTEM): Added documentation.
	(TIME): Added documentation.
	(TIME8): Added section and documentation.
	(UNMASK): Removed erroneous section.

2007-01-18  H.J. Lu  <hongjiu.lu@intel.com>

	* trans-stmt.c (compute_overall_iter_number): Fix a typo.

2007-01-18  Roger Sayle  <roger@eyesopen.com>

	* trans-expr.c (copyable_array_p): Consider user derived types without
	allocatable components to be copyable.

2007-01-18  Roger Sayle  <roger@eyesopen.com>

	* trans-stmt.c (compute_overall_iter_number): Enhance to precompute
	the number of interations in unconditional FORALL nests with constant
	bounds.

2007-01-18  Francois-Xavier Coudert  <coudert@clipper.ens.fr>
	    Tobias Burnus  <burnus@net-b.de>

	PR libfortran/29649
	* gfortran.h (gfc_option_t): Add flag_dump_core.
	* lang.opt: Add -fdump-core option.
	* invoke.texi: Document the new options.
	* trans-decl.c (gfc_build_builtin_function_decls): Add new
	  options to the call to set_std.
	* options.c (gfc_init_options, gfc_handle_option): Set the
	  new options.

2007-01-17  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30476
	* module.c (load_generic_interfaces): Make the marking of the
	symbol as ambiguous conditional on the module names being
	different.
	(write_generic): Ensure that the generic interface has a
	non-NULL module field.

2007-01-16  Roger Sayle  <roger@eyesopen.com>

	PR fortran/30404
	* trans-stmt.c (forall_info): Remove pmask field.
	(gfc_trans_forall_loop): Remove NVAR argument, instead assume that
	NVAR covers all the interation variables in the current forall_info.
	Add an extra OUTER parameter, which specified the loop header in
	which to place mask index initializations.
	(gfc_trans_nested_forall_loop): Remove NEST_FLAG argument.
	Change the semantics of MASK_FLAG to only control the mask in the
	innermost loop.
	(compute_overall_iter_number): Optimize the trivial case of a
	top-level loop having a constant number of iterations.  Update
	call to gfc_trans_nested_forall_loop.  Calculate the number of
	times the inner loop will be executed, not to size of the 
	iteration space.
	(allocate_temp_for_forall_nest_1): Reuse SIZE as BYTESIZE when
	sizeof(type) == 1.  Tidy up.
	(gfc_trans_assign_need_temp): Remove NEST_FLAG argument from calls
	to gfc_trans_nested_forall_loop.
	(gfc_trans_pointer_assign_need_temp): Likewise.
	(gfc_trans_forall_1): Remove unused BYTESIZE, TMPVAR, SIZEVAR and
	LENVAR local variables.  Split mask allocation into a separate
	hunk/pass from mask population.  Use allocate_temp_for_forall_nest
	to allocate the FORALL mask with the correct size.  Update calls
	to gfc_trans_nested_forall_loop.
	(gfc_evaluate_where_mask): Update call to
	gfc_trans_nested_forall_loop.
	(gfc_trans_where_2): Likewise.

2007-01-15  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/28172
	* trans-stmt.c (gfc_trans_call): If it does not have one, get
	a backend_decl for an alternate return.

	PR fortran/29389
	* resolve.c (pure_function): Statement functions are pure. Note
	that this will have to recurse to comply fully with F95.

	PR fortran/29712
	* resolve.c (resolve_function): Only a reference to the final
	dimension of an assumed size array is an error in an inquiry
	function.

	PR fortran/30283
	* resolve.c (resolve_function): Make sure that the function
	expression has a type.

2007-01-14  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30410
	* trans-decl.c (gfc_sym_mangled_function_id): Module, external
	symbols must not have the module name prepended.

2007-01-11  Thomas Koenig  <Thomas.Koenig@online.de>

	PR libfortran/30415
	* iresolve.c (gfc_resolve_maxloc): If the rank
	of the return array is nonzero and we process an
	integer array smaller than default kind, coerce
	the array to default integer.
	* iresolve.c (gfc_resolve_minloc): Likewise.

2007-01-11  Brooks Moses  <brooks.moses@codesourcery.com>

	* simplify.c: Update copyright to 2007.
	* scanner.c: Same.

2007-01-11  Francois-Xavier Coudert  <coudert@clipper.ens.fr>

	PR fortran/30430
	* scanner.c (gfc_release_include_path): Free gfc_option.module_dir
	only once!

2007-01-09  Brooks Moses  <brooks.moses@codesourcery.com>

	* simplify.c (gfc_simplify_ibclr): Fix POS comparison.
	(gfc_simplify_ibset): Same.

2007-01-09  Brooks Moses  <brooks.moses@codesourcery.com>

	PR 30381
	PR 30420
	* simplify.c (convert_mpz_to_unsigned): New function.
	(convert_mpz_to_signed): New function, largely based on
	twos_complement().
	(twos_complement): Removed.
	(gfc_simplify_ibclr): Add conversions to and from an
	unsigned representation before bit-twiddling.
	(gfc_simplify_ibset): Same.
	(gfc_simplify_ishftc): Add checks for overly large
	constant arguments, only check the third argument if
	it's present, carry over high bits into	the result as
	appropriate, and perform the final conversion back to
	a signed representation using the correct sign bit.
	(gfc_simplify_not): Removed unnecessary masking.

2007-01-09  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/30408
	* resolve.c (resolve_code): Use the code->expr character length
	directly to set length of llen.

2007-01-09  Jerry DeLisle  <jvdelisle@gcc.gnu.org>

	PR fortran/30408
	* lang.opt: Add Wcharacter_truncation option.
	* options.c (gfc_init_options): Initialize
	gfc_option.warn_character_truncation to zero.
	(gfc_handle_option): Add case for OPT_Wcharacter_truncation.

2007-01-08  Steven G. Kargl  <kargl@gcc.gnu.org>

	* interface.c, intrinsic.c, gfortranspec.c, io.c, f95-lang.c,
	iresolve.c, match.c: Update Copyright years.  Whitespace.

2007-01-08  Richard Guenther  <rguenther@suse.de>

	* trans-io.c (transfer_array_desc): Use build_int_cst instead
	of build_int_cstu.

2007-01-08  Roger Sayle  <roger@eyesopen.com>

	* trans-array.c (constant_array_constructor_p): New function to
	determine whether an array constructor consists only of constant
	elements, and if so return it's size.
	(gfc_build_constant_array_constructor): Construct a statically
	initialized gfortran array for a given EXPR_ARRAY.
	(gfc_trans_constant_array_constructor): Efficiently scalarize
	a constant array constructor.
	(gfc_trans_array_constructor): Tidy up use of CONST_STRING.
	Special case scalarization of constant array constructors, all of
	whose elements are specified, using constant_array_constructor_p 
	and gfc_trans_constant_array_constructor.
	(gfc_conv_scalarized_array_ref): Check whetger info->offset is zero
	before adding it to index, to avoid creating a NON_LVALUE_EXPR.

2007-01-08  Kazu Hirata  <kazu@codesourcery.com>

	gfortran.texi: Fix typos.

2007-01-07  Steven G. Kargl  <kargl@gcc.gnu.org>

	* decl.c, dump-parse-tree.c, error.c, data.c, expr.c, dependency.c,
	convert.c: Update Copyright dates.  Fix whitespace.

2007-01-07  Bernhard Fischer  <aldot@gcc.gnu.org>

	* data.c (gfc_assign_data_value): Fix whitespace.

2007-01-07  Bernhard Fischer  <aldot@gcc.gnu.org>

	* trans-array.c (gfc_trans_create_temp_array, gfc_array_init_size):
	Commentary typo fix.

2007-01-07  Bernhard Fischer  <aldot@gcc.gnu.org>

	PR fortran/27698
	* match.c (gfc_match_name): Print diagnostics for invalid
	character in names.

2007-01-06  Steven G. Kargl  <kargl@gcc.gnu.org>

	* array.c: Fix whitespace in comment table.

2007-01-06  Steven G. Kargl  <kargl@gcc.gnu.org>

	* array.c, bbt.c, check.c: Update copyright years.  Whitespace.

2007-01-06  Steven G. Kargl  <kargl@gcc.gnu.org>

	* arith.c: Update copyright years.  Whitespace.

2007-01-05  Roger Sayle  <roger@eyesopen.com>

	* trans-expr.c (gfc_trans_assignment_1): New subroutine to scalarize
	array assignments split out from gfc_trans_assignment.
	(gfc_trans_array_copy): New function to implement array to array
	copies via calls to __builtin_memcpy.
	(copyable_array_p): New helper function to identify an array of
	simple/POD types, that may be copied/assigned using memcpy.
	(gfc_trans_assignment): Use gfc_trans_array_copy to handle simple
	whole array assignments considered suitable by copyable_array_p.
	Invoke gfc_trans_assignment_1 to perform the fallback scalarization.

2007-01-05  Roger Sayle  <roger@eyesopen.com>

	* trans-array.c (gfc_trans_array_constructor_value): Make the
	static const "data" array as TREE_READONLY.
	* trans-stmt.c (gfc_trans_character_select): Likewise.

2007-01-05  Roger Sayle  <roger@eyesopen.com>

	* trans-array.c (gfc_conv_loop_setup): Test whether the loop
	stride is one, to avoid fold_build2 introducing a useless
	NON_LVALUE_EXPR node.

2007-01-05  Tobias Burnus  <burnus@net-b.de>

	* symbol.c (check_conflict): Fix error message.

2007-01-05  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/23232
	* decl.c (gfc_in_match_data, gfc_set_in_match_data): New
	functions to signal that a DATA statement is being matched.
	(gfc_match_data): Call gfc_set_in_match_data on entry and on
	exit.
	* gfortran.h : Add prototypes for above.
	* expr.c (check_init_expr): Avoid check on parameter or
	variable if gfc_in_match_data is true.
	(gfc_match_init_expr): Do not call error on non-reduction of
	expression if gfc_in_match_data is true.

	PR fortran/27996
	PR fortran/27998
	* decl.c (gfc_set_constant_character_len): Add boolean arg to
	flag array constructor resolution.  Warn if string is being
	truncated.  Standard dependent error if string is padded. Set
	new arg to false for all three calls to
	gfc_set_constant_character_len.
	* match.h : Add boolean arg to prototype for
	gfc_set_constant_character_len.
	* gfortran.h : Add warn_character_truncation to gfc_options.
	* options.c (set_Wall): Set warn_character_truncation if -Wall
	is set.
	* resolve.c (resolve_code): Warn if rhs string in character
	assignment has to be truncated.
	* array.c (gfc_resolve_character_array_constructor): Set new
	argument to true for call to gfc_set_constant_character_len.

2007-01-05  Tobias Burnus  <burnus@net-b.de>

	PR fortran/29624
	* interface.c (compare_parameter_intent): New function.
	  (check_intents): Support pointer intents.
	* symbol.c (check_conflict): Support pointer intents,
	  better conflict_std message.
	* expr.c (gfc_check_assign,gfc_check_pointer_assign):
	  Support pointer intents.
	* resolve.c (resolve_deallocate_expr,resolve_allocate_expr):
	  Support pointer intents.

2007-01-03  Brooks Moses  <brooks.moses@codesourcery.com>

	PR 30371
	* check.c (gfc_check_kill_sub): Add checks for non-scalar
	arguments.

2007-01-04  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi: Minor cleanup, reflowing overlong
	paragraphs, and correcting whitespace.

2007-01-04  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi (LBOUND): Add documentation.
	(LGE): Add documentation.
	(LGT): Add documentation.
	(LINK): Add documentation.
	(LLE): Add documentation.
	(LLT): Add documentation.
	(LNBLNK): Add documentation.
	(UBOUND): Add documentation.
	(UNLINK): Add documentation.

2007-01-04  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi (IAND): Clarify argument specifications.
	(IBCLR): Add documentation.
	(IBITS): Add documentation.
	(IBSET): Add documentation.
	(IEOR): Add documentation.
	(IERRNO): Add documentation.
	(INDEX): Add documentation.
	(IOR): Add documentation.
	(ISHFT): Add documentation.
	(ISHFTC): Add documentation.
	(KILL): Add documentation.
	(LEN_TRIM): Add documentation.

2007-01-04  Brooks Moses  <brooks.moses@codesourcery.com>

	PR 30235
	* interface.c (compare_actual_formal): check for
	alternate returns when iterating over non-present
	arguments.

2007-01-04  Brooks Moses  <brooks.moses@codesourcery.com>

	* invoke.texi: Update manpage copyright to include 2007.

2007-01-04  Brooks Moses  <brooks.moses@codesourcery.com>

	* gfortran.texi: Update copyright to include 2007.
	* intrinsic.texi: Update copyright to include 2007.
	* invoke.texi: Update copyright to include 2007.

2007-01-02  Tobias Burnus  <burnus@net-b.de>
	    Jakub Jelinek  <jakub@redhat.com>

	PR fortran/30276
	* scanner.c (open_included_file): Revert patch.
	  (gfc_open_included_file): Support absolute pathnames.
	  (gfc_open_intrinsic_module): Support absolute pathnames.

2007-01-03  Brooks Moses  <brooks.moses@codesourcery.com>

	* gfortran.texi (GNU Fortran and GCC): Rewrite

2007-01-03  Brooks Moses  <brooks.moses@codesourcery.com>

	* gfortran.texi (Introduction): Lower "Part I:
	Introduction" to a chapter, renumber Parts II and III to
	Parts I and II.
	* intrinsic.texi (Introduction): Rename to "Introduction
	to Intrinsics" to avoid conflict with the new chapter.

2007-01-03  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi (Introduction): Rewrite first paragraph.

2007-01-03  Brooks Moses  <brooks.moses@codesourcery.com>

	* invoke.texi (OpenMP): Added index entry.
	* gfortran.texi (title page): Removed erroneous '*'.

2007-01-03  Brooks Moses  <brooks.moses@codesourcery.com>

	* gfortran.texi (GFORTRAN_DEFAULT_RECL): Added units
	to description.
	(Extensions): Miscellaneous minor rewriting and copyediting.
	(BOZ-literal constants): Renamed from Hexadecimal constants.
	(Hollerith constants support): Added explanation and 
	suggestions for standard-conforming modern equivalents.

2007-01-03  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi: Improvements to index entries; change
	@findex entries to @cindex entries.
	* invoke.texi: Standardize and improve index entries.
	* gfortran.texi: Fix @code in one index entry.

2007-01-03  Brooks Moses  <brooks.moses@codesourcery.com>

	* invoke.texi: Change @code-type macros to appropriate
	variants (@command, @option, etc.)
	* gfortran.texi: Same.

2007-01-03  Brooks Moses  <brooks.moses@codesourcery.com>

	* intrinsic.texi: Various minor cleanups.

2007-01-02  Steven G. Kargl  <kargls@comcast.net>

	* trans-intrinsic.c (gfc_conv_intrinsic_ibits): Fix call to
	build_int_cst.

2007-01-02  Tobias Burnus  <burnus@net-b.de>

	PR fortran/30276
	* scanner.c (open_included_file): Support full-path filenames.

2007-01-02  Paul Thomas  <pault@gcc.gnu.org>

	PR fortran/20896
	* interface.c (check_sym_interfaces): Remove call to
	resolve_global_procedure.
	gfortran.h : Remove prototype for resolve_global_procedure.
	resolve.c (resolve_global_procedure): Add static attribute
	to function declaration.

2007-01-01  Steven G. Kargl  <kargls@comcast.net>

	* ChangeLog: Copy to ...
	* ChangeLog-2006: here.
