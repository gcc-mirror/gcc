2007-07-20  Keith Seitz  <keiths@redhat.com>

	* gnu/classpath/jdwp/value/StringValue.java
	(StringValue): Tag of StringValue is STRING not OBJECT.
	(write): String values are written to the wire as tag byte
	and object ID, not JdwpString.

2007-07-20  Keith Seitz  <keiths@redhat.com>

	* gnu/classpath/jdwp/processor/ClassTypeCommandSet.java
	(executeInvokeMethod): No need to use ValueFactory any more;
	MethodResult.getReturnedValue now returns a Value.
	(executeNewInstance): Double-check that return result is
	an ObjectValue; throw JdwpInternalErrorException if it is not.
	(invokeMethod): Method IDs come from VMMethod, not VMIdManager.
	Arguments are Values not Objects.
	Use ValueFactory to create arguments.
	Pass invocation options to VMVirtualMachine.executeMethod.
	Don't do any thread suspend/resume work: VMVM.executeMethod
	will take care of it.
	* gnu/classpath/jdwp/processor/ObjectReferenceCommandSet.java
	(executeInvokeMethod): Method IDs come from VMMethod, not
	VMIdManager.
	Arguments should be Values instead of Objects.
	Use ValueFactory to create Values.
	Remove specific option handling and pass options to
	VMVirtualMachine.executeMethod.
	Remove thread suspension.
	Use MethodResult.getReturnedValue to get method's result.
	* gnu/classpath/jdwp/util/MethodResult.java
	(returnedValue): Change type to Value.
	(thrownException): Change type to Throwable.
	(resType): Remove.
	(MethodResult): New constructor.
	(setReturnedValue): Remove.
	(SetThrownException): Remove.
	(getResultType): Remove.
	(setResultType): Remove.
	* gnu/classpath/jdwp/value/ObjectValue.java (getValue):
	New method.
	* vm/reference/gnu/classpath/jdwp/VMVirtualMachine.java
	(executeMethod): Replace "nonVirtual" parameter with more
	generic "options" parameter.
	Replace java.lang.reflect.Method parameter with VMMethod.
	Replace Object[] parameter with Value[] parameter.

2007-05-19  Andreas Tobler  <a.tobler@schweiz.org>

	PR libgcj/31659
	* m4/ax_create_stdint_h.m4: Apply patch from PR31659.
	* configure: Regenerate.

2007-05-07 Keith Seitz  <keiths@redhat.com>

	* gnu/classpath/jdwp/Jdwp.java (notify): Rewrite to call
	new array-based method.
	(notify): New function.
	(sendEvent): Rewrite to use sendEvents.
	(sendEvents): New method.
	* gnu/classpath/jdwp/event/Event.java (toPacket): Make static.
	Change parameters to use arrays for events and requests.
	Add suspendPolicy parameter.
	Move per-event data transformation to...
	(_toData): ... here.
	* gnu/classpath/jdwp/transport/JdwpConnection.java
	(sendEvent): Renamed to ...
	(sendEvents): ... this.
	Change parameters to use arrays for events and requests.
	Add suspendPolicy parameter.

2007-05-03  Andrew Haley  <aph@redhat.com>

	* gnu/javax/management/Server.java (Server): Record the delegate.
	(registerMBean): Notify the delegate.
	(unregisterMBean): Likewise.
	(notify): New method.

2007-04-23  Mark Wielaard  <mark@klomp.org>

	* configure.ac (VERSION): Set to 0.95.

2007-04-23  Mark Wielaard  <mark@klomp.org>

	* NEWS: Add new 0.95 features.

2007-04-23  Jeroen Frijters  <jeroen@frijters.net>

	PR classpath/31646:
	* java/util/Arrays.java (qsort): Corrected initial median calculation.

2007-04-19  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* m4/acinclude.m4
	(CLASSPATH_FIND_JAVAC): Allow detected JAVAC.

2007-04-19  Casey Marshall  <csm@gnu.org>

	PR classpath/31626:
	* gnu/javax/net/ssl/provider/SSLSocketFactoryImpl.java
	(createSocket): New method.

2007-04-17  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* native/jni/java-net/local.c:
	Fix import of FIONREAD.
	* native/jni/java-nio/gnu_java_nio_VMChannel.c,
	* native/jni/native-lib/cpnet.c:
	Likewise.

2007-04-16  Dalibor Topic  <robilad@kaffe.org>

	* configure.ac (AM_PROG_CC_C_O): Added to fix automake 1.10
	warning.

2007-04-16  Dalibor Topic  <robilad@kaffe.org>

	* native/plugin/Makefile.am (libgcjwebplugin_la_LDFLAGS):
	Added AM_LDFLAGS for automake 1.10.

2007-04-15  Dalibor Topic  <robilad@kaffe.org>

	* depcomp, install-sh, missing, mkinstalldirs,
	doc/texinfo.tex: Removed files generated by autogen.sh.

	* .cvsignore: Ignore generated files depcomp, install-sh,
	missing, mkinstalldirs.

	* doc/.cvsignore: Ignore generated file doc/texinfo.tex.

2007-04-15  Dalibor Topic  <robilad@kaffe.org>

	* native/jni/java-lang/Makefile.am (libjavalang_la_LIBADD):
	Fix portability warnings from automake 1.10.

2007-04-15  Dalibor Topic  <robilad@kaffe.org>

	* Makefile.am (EXTRA_DIST): Add ChangeLog-2006.

2007-04-15  Dalibor Topic  <robilad@kaffe.org>

	* native/target/.cvsignore: Removed.

2007-04-15  Roman Kennke  <roman@kennke.org>

	* native/target/Linux/.cvsignore,
	* native/target/generic/.cvsignore: Removed.

2007-04-15  Dalibor Topic  <robilad@kaffe.org>

	* doc/Makefile.am: Fix portability warnings from
	automake 1.10.

2007-04-15  Dalibor Topic  <robilad@kaffe.org>

	* doc/cp-hacking.texinfo: Updated with information from
	INSTALL file. Removed duplicate and outdated information.
	Updated compiler information. Fixed versioning information
	where entries diverged. Turned command, option, file and
	URL strings into proper texinfo elements.

2007-04-15  Dalibor Topic  <robilad@kaffe.org>

	* configure.ac: Added support for Iceape libraries as
	a substitute for Mozilla for Debian.

2007-04-17  Tom Tromey  <tromey@redhat.com>

	https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=236614
	* gnu/javax/net/ssl/provider/SSLSocketFactoryImpl.java
	(createSocket): Change order of delegation.

2007-04-17  Casey Marshall  <csm@gnu.org>

	PR classpath/31302:
	* gnu/javax/net/ssl/provider/SSLSocketImpl.java (SSLSocketImpl):
	Always make a new socket.
	(bind, connect, getInetAddress, getLocalAddress, getPort,
	getLocalPort, getRemoteSocketAddress, getLocalSocketAddress,
	setTcpNoDelay, getTcpNoDelay, setSoLinger, getSoLinger,
	setOOBInline, getOOBInline, setSoTimeout, getSoTimeout,
	setSendBufferSize, getSendBufferSize, setReceiveBufferSize,
	getReceiveBufferSize, setKeepAlive, getKeepAlive, setTrafficClass,
	getTrafficClass, setReuseAddress, getReuseAddress, close,
	shutdownInput, shutdownOutput, isConnected, isBound, isClosed,
	isInputShutdown, isOutputShutdown): Always use
	'underlyingSocket'.

2007-04-16  Mark Wielaard  <mark@klomp.org>

	Fixes bug #31590
	* java/net/URI.java (parseServerAuthority): Allow empty portStr.

2007-04-16  Chris Burdess  <dog@gnu.org>

	* gnu/xml/stream/XMLParser.java: Work around a problem with  
	incorrectly formatted file URLs.

2007-04-11  Christian Thalinger  <twisti@complang.tuwien.ac.at>

	* configure.ac: Added AC_C_INLINE.

2007-04-12  Christian Thalinger  <twisti@complang.tuwien.ac.at>

	* LICENSE: Added m4/ax_func_which_gethostbyname_r.m4 license.
	* configure.ac: Added AX_FUNC_WHICH_GETHOSTBYNAME_R check.
	* m4/ax_func_which_gethostbyname_r.m4: New file.
	* native/jni/native-lib/cpnet.c (cpnet_getHostByName): Check for
	different number of arguments of gethostbyname_r.

2007-04-11  Francis Kung  <fkung@redhat.com>

	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_FreetypeGlyphVector.c
	(Java_gnu_java_awt_peer_gtk_FreetypeGlyphVector_getGlyphs): Avoid
	unneeded object reference.
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GdkFontPeer.c
	(Java_gnu_java_awt_peer_gtk_GdkFontPeer_getFontMetrics): Unlock font.
	(Java_gnu_java_awt_peer_gtk_GdkFontPeer_setFont): Remove redundant
	checks.

2007-04-11  Christian Thalinger  <twisti@complang.tuwien.ac.at>

	* native/jni/native-lib/cpproc.c (cpproc_forkAndExec): Fixed
	warning on some compilers, e.g. MIPSpro.

2007-04-11  Christian Thalinger  <twisti@complang.tuwien.ac.at>

	* native/jni/java-nio/javanio.c: Include fcntl.h instead of
	sys/fcntl.h.

2007-04-12  Mark Wielaard  <mark@klomp.org>

	* gnu/java/awt/peer/ClasspathFontPeer.java (LRUCache): New static
	inner class.
	(transCache): New static LRUChache field.
	(copyTransformToAttrs): Check whether a TransformAttribute already
	exists in the transCache for the given AffineTransform.

2007-04-12  Mark Wielaard  <mark@klomp.org>

	* configure.ac (COMPILE_GTK_PEER): Add check for cairo >= 1.1.8.

2007-04-09  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/ObjectName.java:
	(parse(String)): Catch multiple wildcards,
	initialise with an empty string (so null isn't
	appended), and emit comma even when wildcard
	ends the list.
	(checkComponents()): Catch newlines.
	(quote(String)): Handle newlines and quotes
	correctly.

2007-04-10  Mark Wielaard  <mark@klomp.org>

	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_ComponentGraphics.c
	(Java_gnu_java_awt_peer_gtk_ComponentGraphics_initFromVolatile):
	Destroy surface after it is used to create a cairo context.

2007-04-09  Francis Kung  <fkung@redhat.com>

	PR 31311
	* gnu/java/awt/peer/gtk/ComponentGraphics.java
	(dispose): Removed method.
	(disposeSurface): Removed method.
	* gnu_java_awt_peer_gtk_ComponentGraphics.h: Regenerated.
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_ComponentGraphics.c
	(Java_gnu_java_awt_peer_gtk_ComponentGraphics_disposeSurface): Removed.
	(Java_gnu_java_awt_peer_gtk_ComponentGraphics_initState): Destroy surfac
e
	after it is used to create a cairo context.


2007-04-07  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/ObjectName.java:
	(parse(String)): Fix result of getKeyPropertyListString().

2007-04-07  Mark Wielaard  <mark@klomp.org>

	* resource/META-INF/services/javax.xml.parsers.DocumentBuilderFactor,
	resource/META-INF/services/javax.xml.parsers.SAXParserFactory,
	resource/META-INF/services/javax.xml.parsers.TransformerFactory,
	resource/META-INF/services/org.relaxng.datatype.DatatypeLibraryFactory,
	resource/META-INF/services/org.w3c.dom.DOMImplementationSourceList,
	resource/META-INF/services/org.xml.sax.driver: Removed.

2007-04-07  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/ObjectName.java
	(parse(String)): Fix parsing where the wildcard
	is juxtaposed between other pairs.

2007-04-06  Mark Wielaard  <mark@klomp.org>

	* configure.ac (VERSION): Set to 0.95-rc.

2007-04-06  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/MBeanAttributeInfo.java:
	(serialVersionUID):  Added.
	* javax/management/MBeanFeatureInfo.java:
	(writeObject(ObjectOutputStream)): Added for
	later 1.6 support.
	* javax/management/Notification.java:
	(serialVersionUID): Added.
	(Notification(String,Object,long,long)): Make
	default message the empty string not null.
	(Notification(String,Object,long,long,String)):
	Set source explicitly.
	(writeObject(ObjectOutputStream)): Added to match
	Sun.
	
2007-04-06  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* java/util/Hashtable.java:
	(putAllInternal(Map)): Remove redundant semi-colon.
	
2007-04-06  Mark Wielaard  <mark@klomp.org>

	* lib/mkcollections.pl.in: Add externalclasses.
	* java/util/Collections.java: Unroll enhanced for loops.
	* java/util/HashMap.java: Likewise.
	* java/util/Hashtable.java: Likewise.
	* java/util/TreeMap.java: Likewise.

2007-04-06  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* gnu/javax/management/Translator.java:
	(getTypeName(type)): Move type name creation to its own method.
	* javax/management/ObjectName.java:
	(WILDCARD): Added.
	
2007-04-04  Andrew Haley  <aph@redhat.com>

	* javax/management/ObjectName.java:
	(serialVersionUID): Declare.
	Make all fields transient.
	(parse): Break out from constructor.
	(writeObject, readObject): New methods.
	
2007-04-05  Francis Kung  <fkung@redhat.com>

	* include/Makefile.am: Remove old entry.

2007-04-05  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/peer/gtk/GtkToolkit.java
	(createDragGestureRecognizer): Remove failing subClass call.

2007-04-05  Gary Benson  <gbenson@redhat.com>

	* java/util/GregorianCalendar.java
	(computeFields): Fix WEEK_OF_MONTH calculation.

2007-04-05  Christian Thalinger  <twisti@complang.tuwien.ac.at>

	PR classpath/22800:
	* native/jni/java-lang/java_lang_VMDouble.c (doubleToLongBits)
	(doubleToRawLongBits, longBitsToDouble): Swap the byte
	ordering for little-endian arms without VFP.

2007-04-05  Christian Thalinger  <twisti@complang.tuwien.ac.at>

	* native/jni/java-net/java_net_VMNetworkInterface.c
	[HAVE_IFADDRS_H && HAVE_GETIFADDRS] (free_netif_list): Added
	#ifdef.
	(getVMInterfaces): Added UNUSED argument attribute.

2007-04-05  Christian Thalinger  <twisti@complang.tuwien.ac.at>

	* native/jni/java-nio/gnu_java_nio_charset_iconv_IconvDecoder.c,
	native/jni/java-nio/gnu_java_nio_charset_iconv_IconvEncoder.c
	[HAVE_ICONV] (createRawData, getData, infid, outfid): Added
	#ifdef.
	(openIconv): Added UNUSED argument attribute, so we can build with
	-Werror.
	(decode): Likewise.
	(closeIconv): Likewise.

2007-04-05  Mark Wielaard  <mark@klomp.org>

	* autogen.sh: Recognize automake 1.10.
	* configure.ac (AM_INIT_AUTOMAKE): Add -Wno-portability.
	* native/jawt/Makefile.am (libjawt_la_LDFLAGS): Add AM_LDFLAGS.
	* native/jni/gconf-peer/Makefile.am (libgconfpeer_la_LDFLAGS): Likewise.
	* native/jni/gtk-peer/Makefile.am (libgtkpeer_la_LDFLAGS): Likewise.
	* native/jni/midi-alsa/Makefile.am (libgjsmalsa_la_LDFLAGS): Likewise.
	* native/jni/midi-dssi/Makefile.am (libgjsmdssi_la_LDFLAGS): Likewise.
	* native/jni/qt-peer/Makefile.am (libqtpeer_la_LDFLAGS): Likewise.

2007-04-04  Mark Wielaard  <mark@klomp.org>

	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkImage.c
	(cp_gtk_image_get_pixbuf): Return NULL when pointer is NULL.
	* gnu/java/awt/peer/gtk/GtkImage.java (setImage): Set loaded and
	call deliver() after pixels have been set.
	* gnu/java/awt/peer/gtk/GtkFramePeer.java (setIconImage): Only
	set icon when image has been properly loaded.

2007-04-04  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/peer/gtk/CairoGraphics2D.java
	(drawCairoSurface): Made protected.
	* gnu/java/awt/peer/gtk/ComponentGraphics.java
	(cairoDrawGlyphVector): Removed method.
	(cairoSetFont): Removed method.
	(disposeNative): Removed method.
	(drawCairoSurface): New method.
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_CairoGraphics2D.c
	(Java_gnu_java_awt_peer_gtk_CairoGraphics2D_cairoDrawGlyphVector): Added
	locking.
	(Java_gnu_java_awt_peer_gtk_CairoGraphics2D_cairoSetFont): Added locking.
	(Java_gnu_java_awt_peer_gtk_CairoGraphics2D_disposeNative): Added locking.

2007-04-04  Gary Benson  <gbenson@redhat.com>

	* java/util/GregorianCalendar.java
	(GregorianCalendar(TimeZone, Locale)): Remove redundant complete().

2007-04-04  Roman Kennke  <roman@kennke.org>

	* java/nio/channels/spi/SelectorProvider.java
	(inheritedChannel): Make method concrete and move default impl
	to here. Perform security checks as mandated by the spec.
	* gnu/java/nio/SelectorProviderImpl.java
	(inheritedChannel): Removed. Default impl is in SelectorProvider.

2007-04-04  Roman Kennke  <roman@kennke.org>

	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkToolkit.c
	(init_glib_threads): Create global reference on lock object.

2007-04-04  Roman Kennke  <roman@kennke.org>

	* java/awt/Frame.java
	(weakFrames): Make private.
	(weakFramesQueue): New field. A reference queue to collect
	GCed references.
	(getFrames): Only do one iterations to avoid collecting null
	references.
	(hasDisplayableFrames): New helper method. Checks if there
	are any displayable frames. This is used by the event queue
	shutdown check.
	(noteFrame): Clean up GCed frames in the list.
	* java/awt/EventQueue.java
	(isShutdown): Move frame checking code into Frame.

2007-04-03  Roman Kennke  <roman@kennke.org>

	* java/lang/System.java
	(inheritedChannel): New method, wraps
	SelectorProvider.inheritedChannel().
	* java/nio/channels/spi/SelectorProvider.java
	(inheritedChannel): New abstract method.
	* gnu/java/nio/SelectorProviderImpl.java
	(inheritedChannel): New method, return null as default.

2007-04-03  Roman Kennke  <roman@kennke.org>

	* java/nio/ByteOrder.java
	(nativeByteOrder): Let this fail when the corresponding
	property is not set properly.

2007-04-03  Roman Kennke  <roman@kennke.org>

	* javax/swing/plaf/basic/BasicTreeUI.java
	(getPathBounds): Consider the tree's insets. Added a bunch of
	null checks.

2007-04-03  Roman Kennke  <roman@kennke.org>

	* javax/swing/plaf/basic/BasicLabelUI.java
	(cachedInsets): New field. Used for reusing the insets instance.
	(getFontMetrics): New helper method for fetching a suitable
	FontMetrics object.
	(getPreferredSize): Use new helper method for font metrics.
	(paint): Only do something if we have an icon or text.
	Use cached Insets instance and new font metrics helper.
	(paintDisabledText): Don't restore the graphics' color.
	(paintEnabledText): Don't restore the graphics' color.

2007-04-03  Roman Kennke  <roman@kennke.org>

	* javax/swing/plaf/metal/MetalButtonUI.java
	(paintButtonPressed): Fill the whole button not only visibleRect.
	* javax/swing/plaf/metal/MetalLookAndFeel.java
	(LAF_defaults): Removed.
	(getDefaults): Always fetch super's defaults.
	* javax/swing/plaf/metal/MetalMenuBarUI.java
	(update): Don't leave 2 pixel gap.

2007-04-03  Roman Kennke  <roman@kennke.org>

	* native/target/.cvsignore,
	* native/target/Linux/.cvsignore,
	* native/target/generic/.cvsignore: Some new ignores.

2007-04-03  Roman Kennke  <roman@kennke.org>

	* gnu/java/awt/peer/gtk/GThreadMutex.java,
	* gnu/java/awt/peer/gtk/GThreadNativeMethodRunner.java,
	* include/gnu_java_awt_peer_gtk_GThreadNativeMethodRunner.h,
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GThreadNativeMethodRunner.c,
	* native/jni/gtk-peer/gthread-jni.c,
	* native/jni/gtk-peer/gthread-jni.h: Removed.
	* native/jni/gtk-peer/Makefile.am: Removed obsolete entries
	for removed files.
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkToolkit.c
	Removed unused bits from gthread-jni.c.

2007-04-03  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/peer/gtk/FreetypeGlyphVector.java
	(getGlyphs(int[], int[], long[])): Return void.

2007-04-03  Kyle Galloway  <kgallowa@redhat.com>

	* gnu/classpath/jdwp/value/ArrayValue.java: New file. 

2007-04-03  Roman Kennke  <roman@kennke.org>

	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkToolkit.c
	(global_lock): New global variable that holds the object reference
	to the global GTK lock.
	(init_glib_threads): Add lock argument. Use
	gdk_threads_set_lock_functions to replace GTK's locking function
	with two callbacks that allow reentrant locking, based on
	JNI's MonitorEnter() and MonitorExit().
	(jni_lock_cb): New callback function for GTK locking.
	(jni_unlock_cb): New callback function for GTK unlocking.
	(Java_gnu_java_awt_peer_gtk_GtkToolkit_gtkInit): Add lock argument.
	Call init_glib_threads() with lock object.
	* include/gnu_java_awt_peer_gtk_GtkToolkit.h
	Regenerated.
	* gnu/java/awt/peer/gtk/GtkToolkit.java
	(GTK_LOCK): New static field. This is used as the global lock for
	GTK.
	(gtkInit): Add lock parameter.
	(static_init): Initialize global lock and call gtkInit() with
	that lock.

2007-04-02  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/peer/gtk/FreetypeGlyphVector.java
	(fontSet): Initialize to null.
	(FreetypeGlyphVector(Font, int[], FontRenderContext)): Populate fontSet
	array with default font if needed.
	(FreetypeGlyphVector(FreetypeGlyphVector)): Clone all fields.
	(getNativeFontPointer): New native method.
	* include/gnu_java_awt_peer_gtk_FreetypeGlyphVector.h: Regenerated.
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_FreetypeGlyphVector.c
	(Java_gnu_java_awt_peer_gtk_FreetypeGlyphVector_getNativeFontPointer):
	New function.

2007-04-02  Francis Kung  <fkung@redhat.com>

	* INSTALL: Document known bug in at-spi, atk, and gail packages prior to
	version 1.18.0.

2007-04-02  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/peer/gtk/CairoGraphics2D.java
	(cairoDrawGlyphVector): Added parameter.
	(drawGlyphVector): Retrieve and pass fontset parameter.
	* gnu/java/awt/peer/gtk/ComponentGraphics.java
	(cairoDrawGlyphVector): Added parameter.
	(lock): Removed unnecessary cast.
	(unlock): Removed unnecessary cast and explicitly set to ONE variable.
	* gnu/java/awt/peer/gtk/FreetypeGlyphVector.java
	(fontSet): New field.
	(dispose): New native method.
	(finalize): New method.
	(getGlyphFonts): New method.
	(getGlyphOutline): Pass fontSet parameter to native method.
	(getGlyphOutlineNative): Added parameter.
	(getGlyphs): Pass extra parameters to native method.
	(getGlyphsNative): Added parameters.
	(getKerning): Added fontSet parameter.
	(getMetricsNative): Added fontSet parameter.
	(performDefaultLayout): Only check kerning if glyphs use the same font.
	(setupGlyphMetrics): Pass extra parameters to native methods.
	* include/gnu_java_awt_peer_gtk_CairoGraphics2D.h,
	* include/gnu_java_awt_peer_gtk_FreetypGlyphVector.h: Regenerated.
	* native/jni/gtk-peer/gdkfont.h: Enable pango engine.
	(peerfont): Add variable for fontset.
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_CairoGraphics2D.c
	(Java_gnu_java_awt_peer_gtk_CairoGraphics2D_cairoDrawGlyphVector): Accept
	array of font pointers to use when drawing glyphs.
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_FreetypeGlyphVector.c
	(getFontSet): New function.
	(Java_gnu_java_awt_peer_gtk_FreetypeGlyphVector_dispose): New function.
	(Java_gnu_java_awt_peer_gtk_FreetypeGlyphVector_getGlyphOutlineNative):
	Added and use new fontSet parameter.
	(Java_gnu_java_awt_peer_gtk_FreetypeGlyphVector_getGlyphs): Use pango
	to retrieve glyphs and estimate font, if the current font does not contain
	a requested glyph.
	(Java_gnu_java_awt_peer_gtk_FreetypeGlyphVector_getKerning): Added and use
	new fontSet parameter.
	(Java_gnu_java_awt_peer_gtk_FreetypeGlyphVector_getMetricsNative): Added
	and use new fontSet parameter.
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GdkFontPeer.c
	(Java_gnu_java_awt_peer_gtk_GdkFontPeer_dispose): Free fontset.
	(Java_gnu_java_awt_peer_gtk_GdkFontPeer_setFont): Load fontset.

2007-04-02  Andrew Haley  <aph@redhat.com>

	* javax/management/ObjectName.java: Handle 0-length names.
	* javax/management/MBeanServerFactory.java: Use the domain that
	we've been passed, not the fixed string "DefaultDomain".

2007-04-01  Mark Wielaard  <mark@klomp.org>

	* org/omg/CORBA/DynAny.java: Mark as deprecated.
	* org/omg/CORBA/DynArray.java: Likewise.
	* org/omg/CORBA/DynEnum.java: Likewise.
	* org/omg/CORBA/DynFixed.java: Likewise.
	* org/omg/CORBA/DynSequence.java: Likewise.
	* org/omg/CORBA/DynStruct.java: Likewise.
	* org/omg/CORBA/DynUnion.java: Likewise.
	* org/omg/CORBA/DynValue.java: Likewise.
	* org/omg/CORBA/ORB.java (create_basic_dyn_any): Likewise.
	(create_dyn_any): Likewise.
	(create_dyn_array): likewise.
	(create_dyn_enum): Likewise.
	(create_dyn_sequence): Likewise.
	(create_dyn_struct): Likewise.
	(create_dyn_union): Likewise.

2007-04-01  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* gnu/javax/management/Translator.java:
	(fromJava(Object[],Method)): Use the array from the
	parameter not the newly created one...
	(fromJava(Object, Type)): Support MXBeans.
	* javax/management/JMX.java:
	(newMXBeanProxy(MBeanServerConnection,ObjectName,Class)):
	Call newMXBeanProxy rather than newMBeanProxy.
	* javax/management/StandardMBean.java:
	(setAttribute(Attribute)): Use InvocationTargetException
	as cause.
	
2007-03-31  Jeroen Frijters  <jeroen@frijters.net>

	PR classpath/31402:
	* java/util/concurrent/CopyOnWriteArrayList.java
	(remove): Fixed ArrayIndexOutOfBoundsException when index == 0.

2007-03-30  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/openmbean/CompositeDataInvocationHandler.java:
	New file.
	
2007-03-30  Kyle Galloway  <kgallowa@redhat.com>

	* gnu/classpath/jdwp/util/VariableTable.java: Make argCnt and slots ints.
	(write): Replace writeLong with writeInt for above.

2007-03-30  Tom Tromey  <tromey@redhat.com>

	PR libgcj/29869:
	* gnu/java/util/jar/JarUtils.java (log): Commented out.
	(readSFManifest): Don't log.

2007-03-29  Tom Tromey  <tromey@redhat.com>

	PR libgcj/29869:
	* java/util/logging/LogManager.java (readConfiguration): Handle
	comma-separated 'handlers'.  Don't try to add a non-existing
	handler.

2007-03-29  Keith Seitz  <keiths@redhat.com>

	* gnu/classpath/jdwp/event/ThreadStartEvent.java (Event):
	Event type is "THREAD_START" not "THERAD_END".

	* gnu/classpath/jdwp/transport/SocketTransport.java (ITransport):
	Handle configure strings ":port" and "port".

2007-03-29  Francis Kung  <fkung@redhat.com>

	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkToolkit.c
	(Java_gnu_java_awt_peer_gtk_GtkToolkit_gtkInit): Revert last patch.

2007-03-29  Mark Wielaard  <mark@klomp.org>

	* native/jni/java-nio/Makefile.am (LIBADD): Add libclasspathnative.

2007-03-28  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/StandardMBean.java:
	(setAttribute(Attribute)): Add handling of primitive
	types and subtype parameters.
	(getMutator(String,Class<?>)): New helper method to
	return the mutator.
	
2007-03-28  Roman Kennke  <roman@kennke.org>

	* java/io/OutputStreamWriter.java,
	* java/io/InputStreamReader.java: Revert big stream patch due to
	problems.

2007-03-28  Tom Tromey  <tromey@redhat.com>

	PR classpath/31303:
	* external/sax/org/xml/sax/helpers/XMLReaderFactory.java
	(createXMLReader): Code in Classpath default.

2007-03-28  Tom Tromey  <tromey@redhat.com>

	PR classpath/31276:
	* native/jni/java-lang/java_lang_VMDouble.c
	(parseDoubleFromChars): Use %p, not %i.

2007-03-28  Mark Wielaard  <mark@klomp.org>

	* native/jni/java-nio/Makefile.am (LIBADD): Don't add
	libclasspathnative.
	* native/jni/java-nio/gnu_java_nio_VMChannel.c
	(Java_gnu_java_nio_VMChannel_open): Don't set and reset umask.

2007-03-27  Francis Kung  <fkung@redhat.com>

	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkToolkit.c
	(Java_gnu_java_awt_peer_gtk_GtkToolkit_gtkInit): Prevent loading of
	accessibility modules as temporary workaround for Gnome bug.

2007-03-27  Kyle Galloway  <kgallowa@redhat.com>

	* gnu/classpth/jdwp/processor/ThreadReferenceCommandSet.java
	(executeResume): Change to call VMVirtualMachine.resumeThread. 

2007-03-27  Roman Kennke  <roman@kennke.org>

	* java/io/InputStreamReader.java
	(BUFFER_SIZE): New constant.
	(bytesCache): Removed.
	(cacheLock): Removed.
	(hasSavedSurrogate): Removed.
	(lastArray): New field. Used for caching CharBuffers.
	(lastBuffer): New field. Used for caching CharBuffers.
	(maxBytesPerChar): Removed.
	(oneChar): New field. Caches a char array for read().
	(savedSurrogate): New field.
	(InputStreamReader): (all constructors) Cleaned up.
	Use initDecoderAndBuffer() method. Check for null parameters.
	Use new EncodingHelper.getDefaultCharset() for fetching the
	default charset.
	(decode): New helper method. Decodes using the NIO decoder or
	using a raw Latin1 decoding.
	(getCharBuffer): New helper method. Implements caching of
	CharBuffers for output arrays.
	(initDecoderAndBuffer): New helper method. Initializes the decoder
	and input buffer.
	(read): Use cached array.
	(read(char[],int,int)): Reworked using a cleaner NIO based
	implementation. This decodes the incoming data in bigger chunks
	rather then calling the decoder for each character.
	(ready): Also check the input buffer.
	(refillInputBuffer): New helper methods. Refills the input buffer
	when it runs out of data.
	* java/io/OutputStreamWriter.java
	(lastArray): Implements caching of the output array buffer.
	(lastBuffer): Implements caching of the output array buffer.
	(oneChar): New field. Caches a char array for write().
	(outputBuffer): Make this a ByteBuffer.
	(OutputStreamWriter): (all constructors) Cleaned up.
	Use initEncoderAndBuffer() method. Check for null parameters.
	Use new EncodingHelper.getDefaultCharset() for fetching the
	default charset.
	(encode): New helper method. Encodes the input buffer to the output
	buffer using either the NIO encoder or a raw Latin1 encoding.
	(encodeChars): New helper method. The encoding loop.
	(flush): Directly use the array of the output buffer.
	(getCharBuffer): New helper method. Implements caching of the
	output buffer.
	(initEncoderAndBuffer): New helper method for initialization.
	(write(char[],int,int)): Reworked to make better use of the NIO
	encoders.
	(write): Use cached array.
	(write(String,int,int)): Don't copy the string but rather wrap it
	and handle it the same as the wrapped char array.
	(writeConvert): Removed.
	* gnu/java/nio/charset/EncodingHelper.java
	(getDefaultCharset): New method. Returns the default charset for
	the case when the file.encoding charset is not valid. This
	always returns an UTF8 codec.

2007-03-27  Roman Kennke  <kennke@aicas.com>

	* java/awt/Frame.java
	(weakFrames): Make this generic and package private.
	(noteFrame): Use generic WeakReference.
	* java/awt/EventQueue.java
	(isShutdown): Iterate over the weakFrames directly, rather than
	using Frame.getFrames(). The latter iterates several times over
	weakFrames completely and creates a new array on each call. The
	former iterates only once and aborts when it finds a frame which
	is displayable.

2007-03-27  Roman Kennke  <kennke@aicas.com>

	* javax/swing/JScrollBar.java
	(getUnitIncrement(int)): Don't multiply direction parameter.
	(getBlockIncrement(int)): Don't multiply direction parameter.

2007-03-26  Tom Tromey  <tromey@redhat.com>

	* doc/cp-tools.texinfo (gcjh Tool): Added more text.
	(rmid Tool): Likewise.

2007-03-26  Stepan Kasal  <skasal@redhat.com>

	* tools/gnu/classpath/tools/javah/Main.java (cniOrJniSeen): New
	field.
	(getParser): Use new field.

2007-03-25  Dalibor Topic  <robilad@kaffe.org>

	* doc/cp-tools.texinfo: Fix node ordering.

2007-03-19  Matthias Klose  <doko@ubuntu.com>

	* doc/Makefile.am: Build a gcjh(1) man page.
	* doc/cp-tools.texinfo: Add documentation for gcjh.

2007-03-23  Jeroen Frijters  <jeroen@frijters.net>

	* java/net/ServerSocket.java (implAccept): set implCreated flag on
	socket.
	* java/net/Socket.java (implCreated): Make package accessible for
	ServerSocket.

2007-03-22  Casey Marshall  <csm@gnu.org>

	* gnu/javax/net/ssl/provider/ClientHandshake.java (RSAGen.implRun):
	check keyEncipherment bit of the certificate, and just pass the public
	key to the cipher.

2007-03-20  Mario Torre  <neugens@limasoftware.net>

	* configure.ac: GConf requirement for building the java.util.prefs backend
	are relaxed down to version 2.6.0 (instead of 2.11.2).

2007-03-19  Mario Torre  <neugens@limasoftware.net>

	* gnu/java/awt/peer/KDEDesktopPeer.java: 
	(mail): Fixed error dialog in KDE when the mail method is called without
	argument; now opens the default mailer with a blank window.
	(getCommand): Handle the use of kprinter as default print command for KDE.
	(supportCommand): Enable the print command when a KDE desktop is detected.

2007-03-19  Jeroen Frijters  <jeroen@frijters.net>

	* java/net/Socket.java
	(implCreated): New field.
	(getImpl): Call impl.create() if it hasn't been called yet.
	(bind): Removed explicit impl.create() call.

2007-03-18  Mark Wielaard  <mark@klomp.org>

	* javax/crypto/CipherOutputStream.java (write): Use out.write()
	not super.write().

2007-03-18  Mark Wielaard  <mark@klomp.org>

	* configure.ac (COMPILE_PLUGIN): Check for gtk+-2.0 >= 2.8
	gthread-2.0 >= 2.2 and gdk-pixbuf-2.0

2007-03-16  Tom Tromey  <tromey@redhat.com>

	* tools/gnu/classpath/tools/javah/Main.java (run): Use class'
	name in File case.

2007-03-16  Thomas Fitzsimmons  <fitzsim@redhat.com>

	* resource/com/sun/tools/javac/messages.properties
	(Main.FailedToRead, Main.MalformedURL, Main.FailedToLoad): Clarify
	messages for when --with-ecj-jar is not specified.

	* configure.ac (FOUND_ECJ_JAR): Remove conditional.
	* tools/Makefile.am: Build com.sun.tools.javac package
	unconditionally.

2007-03-16  Mark Wielaard  <mark@klomp.org>

	* configure.ac (COMPILE_PLUGIN): Stop when no plugin headers found.
	Also check for gtk+ dependency.

2007-03-16  Tom Tromey  <tromey@redhat.com>

	* tools/gnu/classpath/tools/javah/JniStubPrinter.java
	(printClass): Added filename argument.
	* tools/gnu/classpath/tools/javah/JniIncludePrinter.java
	(printClass): Added filename argument.
	* tools/gnu/classpath/tools/javah/CniIncludePrinter.java
	(printClass): Use user's file name.
	* tools/gnu/classpath/tools/javah/CniStubPrinter.java
	(printClass): Use user's file name.
	* tools/gnu/classpath/tools/javah/Printer.java (printClass): Added
	filename argument.
	* tools/gnu/classpath/tools/javah/Main.java (getParser): Fix '-v'
	argument order.
	(writeHeaders): Use a HashMap.
	(run): Put class name into HashMap for writeHeaders.

2007-03-16  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/peer/gtk/CairoGraphics2D.java
	(cairoArc): Make protected rather than private so it can be over-ridden.
	(cairoClip): Likewise.
	(cairoClosePath): Likewise.
	(cairoCurveTo): Likewise.
	(cairoDrawGlyphVector): Likewise.
	(cairoFill): Likewise.
	(cairoLineTo): Likewise.
	(cairoMoveTo): Likewise.
	(cairoNewPath): Likewise.
	(cairoRectangle): Likewise.
	(cairoResetClip): Likewise.
	(cairoRestore): Likewise.
	(cairoSave): Likewise.
	(cairoScale): Likewise.
	(cairoSetAntialias): Likewise.
	(cairoSetDash): Likewise.
	(cairoSetFillRule): Likewise.
	(cairoSetFont): Likewise.
	(cairoSetLine): Likewise.
	(cairoSetMatrix): Likewise.
	(cairoSetOperator): Likewise.
	(cairoSetRGBAColor): Likewise.
	(cairoStroke): Likewise.
	(drawPixels): Likewise.
	(init): Likewise.
	(setGradient): Likewise.
	(setPaintPixels): Likewise.
	(cairoDrawLine): Removed.
	(cairoDrawRect): Removed.
	(cairoFillRect): Removed.
	(cairoPreserveClip): Removed.
	(cairoRelCurveTo): Removed.
	(cairoRelLineTo): Removed.
	(cairoRelMoveTo): Removed.
	* gnu/java/awt/peer/gtk/ComponentGraphics.java
	(cairoArc): New method wrapping superclass method in locks.
	(cairoClip): Likewise.
	(cairoClosePath): Likewise.
	(cairoCurveTo): Likewise.
	(cairoDrawGlyphVector): Likewise.
	(cairoFill): Likewise.
	(cairoLineTo): Likewise.
	(cairoMoveTo): Likewise.
	(cairoNewPath): Likewise.
	(cairoRectangle): Likewise.
	(cairoResetClip): Likewise.
	(cairoRestore): Likewise.
	(cairoSave): Likewise.
	(cairoScale): Likewise.
	(cairoSetAntialias): Likewise.
	(cairoSetDash): Likewise.
	(cairoSetFillRule): Likewise.
	(cairoSetFont): Likewise.
	(cairoSetLine): Likewise.
	(cairoSetMatrix): Likewise.
	(cairoSetOperator): Likewise.
	(cairoSetRGBAColor): Likewise.
	(cairoStroke): Likewise.
	(disposeNative): Likewise.
	(drawPixels): Likewise.
	(init): Likewise.
	(setGradient): Likewise.
	(setPaintPixels): Likewise.
	(draw): Do not lock, as locking is now done in the wrapped native methods.
	(drawComposite): Likewise.
	(drawGlyphVector): Likewise.
	(drawImage): Likewise.
	(drawRenderedImage): Likewise.
	(fill): Likewise.
	(setClip): Removed.
	(lock): Added documentation.
	(unlock): Added documentation.
	* include/gnu_java_awt_peer_gtk_CairoGraphics2D.h: Regenerated.
	* include/gnu_java_awt_peer_gtk_CairoSurface.h: Regenerated.
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_CairoGraphics2D.c
	(Java_gnu_java_awt_peer_gtk_CairoGraphics2D_cairoDrawLine): Removed.
	(Java_gnu_java_awt_peer_gtk_CairoGraphics2D_cairoDrawRect): Removed.
	(Java_gnu_java_awt_peer_gtk_CairoGraphics2D_cairoFillRect): Removed.
	(Java_gnu_java_awt_peer_gtk_CairoGraphics2D_cairoPreserveClip): Removed.
	(Java_gnu_java_awt_peer_gtk_CairoGraphics2D_cairoRelCurveTo): Removed.
	(Java_gnu_java_awt_peer_gtk_CairoGraphics2D_cairoRelLineTo): Removed.
	(Java_gnu_java_awt_peer_gtk_CairoGraphics2D_cairoRelMoveTo): Removed.

2007-03-11  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/openmbean/ArrayType.java:
	(getArrayClassName(String, int)): Replaced by...
	(getArrayClassName(OpenType, int, boolean)):
	Returns appropriate class name for the array.
	(getDimensions(OpenType, int)): New method.
	(getPrimitiveType(Class<?>)): Likewise.
	(getPrimitiveTypeClass(OpenType<?>)): Likewise.
	(getElementType(OpenType<?>)): Likewise.
	(getElementTypeName(OpenType<?>)): Likewise.
	(ArrayType(int, OpenType<?>)): Rewritten
	to handle ArrayTypes as input.
	(ArrayType(SimpleType<?>, boolean)): New constructor.
	(equals(Object)): Handle primitiveArray flag.
	(hashCode()): Likewise.
	(getArrayType(OpenType<E>)): New method.
	(getPrimitiveArrayType(Class<T>)): Likewise.
	(isPrimitiveArray()): Likewise.
	(toString()): Updated to list primitiveArray
	flag.
	* javax/management/openmbean/OpenType.java:
	(OpenType(String,String,String)): Use Class.forName()
	and methods of Class to validate arrays.
	* javax/management/openmbean/SimpleType.java:
	Include causal exception when creating pre-defined types
	throws an exception.
	
2007-03-09  Andreas Tobler  <a.tobler@schweiz.org>

	Port change from gcc:

	2007-03-06  Matthias Klose  <doko@ubuntu.com>

	* doc/Makefile.am(gkeytool.pod): Don't use sed -i.

2007-03-09  Kyle Galloway  <kgallowa@redhat.com>

	* gnu/classpath/jdwp/exception/InvalidTagException.java: New file.
	* gnu/classpath/jdwp/processor/ArrayReferenceCommandSet.java
	(executeGetValues): Use Value type.
	(exectureSetValues): Ditto.  
	* gnu/classpath/jdwp/processor/ClassTypeCommandSet.java
	(executeGetValues): Use Value type.
	(executeSetValues): Ditto.
	(invokeMethod): Record method return type.
	* gnu/classpath/jdwp/processor/ObjectReferenceCommandSet.java
	(executeGetValues): Use Value type.
	(executeSetValues): Ditto.
	* gnu/classpath/jdwp/processor/ReferenceTypeCommandSet.java
	(executeGetValues): Use Value type.
	* gnu/classpath/jdwp/processor/StackFrameCommandSet.java
	(executeGetValues): Use Value type.
	(executeSetValues): Ditto.
	* gnu/classpath/jdwp/util/MethodResult.java: Add resType to store return
	type.
	(getResultType): New Method.
	(setResultType): Ditto.
	* gnu/classpath/jdwp/util/Value.java: Remove.
	* gnu/classpath/jdwp/value: New Package.
	* gnu/classpath/jdwp/value/Value.java: New file.
	* gnu/classpath/jdwp/value/BooleanValue.java: New file.
	* gnu/classpath/jdwp/value/ByteValue.java: New file.
	* gnu/classpath/jdwp/value/CharValue.java: New file.
	* gnu/classpath/jdwp/value/DoubleValue.java: New file.
	* gnu/classpath/jdwp/value/FloatValue.java: New file.
	* gnu/classpath/jdwp/value/IntValue.java: New file.
	* gnu/classpath/jdwp/value/LongValue.java: New file.
	* gnu/classpath/jdwp/value/ObjectValue.java: New file.
	* gnu/classpath/jdwp/value/ShortValue.java: New file.
	* gnu/classpath/jdwp/value/StringValue.java: New file.
	* gnu/classpath/jdwp/value/ValueFactory.java: New file.
	* gnu/classpath/jdwp/value/VoidValue.java: New file.

2007-03-09  Roman Kennke  <kennke@aicas.com>

	* java/awt/image/SinglePixelPackageSampleModel.java
	(createDataBuffer): Avoid use of Buffers class and create
	DataBuffer directly in place.

2007-03-09  Roman Kennke  <kennke@aicas.com>

	* java/awt/image/ComponentSampleModel.java
	(tightPixelPacking): Removed.
	(ComponentSampleModel): Removed unnecessary 'optimization' code.
	(createDataBuffer): Avoid use of Buffers helper class.
	(getDataElements(int,int,int,int,Object,DataBuffer): Removed.
	(getDataElements(int,int,Object,DataBuffer): Do not use Buffers
	helper class and instead fetch the values directly. Don't expect
	any specific DataBuffer subclass.
	(setDataElements(int,int,int,int,Object,DataBuffer): Removed.
	(setDataElements(int,int,Object,DataBuffer): Do not use Buffers
	helper class and instead set the values directly. Don't expect
	any specific DataBuffer subclass.

2007-03-08  Tom Tromey  <tromey@redhat.com>

	PR libgcj/31093:
	* java/net/MulticastSocket.java (setTimeToLive): Allow ttl==0.

2007-03-08  Gary Benson  <gbenson@redhat.com>

	PR classpath/30983:
	* gnu/xml/dom/ls/DomLSParser.java (getInputSource):
	Do not use the entity resolver to resolve the top-level document.

2007-03-07  Tom Tromey  <tromey@redhat.com>

	PR classpath/31057:
	* java/util/regex/Pattern.java (toString): New method.

2007-03-07  Gary Benson  <gbenson@redhat.com>

	PR classpath/30906:
	* resource/META-INF/services/org.w3c.dom.DOMImplementationSourceList:
	New file.

2007-03-06  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* gnu/java/lang/management/BeanImpl.java:
	(translate(String)): Add horrible generics hacks
	to make things work with the new type signatures.
	* javax/management/loading/ClassLoaderRepository.java:
	Added generic types.
	* javax/management/openmbean/CompositeDataSupport.java:
	Likewise.
	* javax/management/openmbean/OpenMBeanOperationInfo.java:
	Likewise.
	* javax/management/openmbean/OpenMBeanParameterInfo.java:
	Likewise.

2007-03-06  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/peer/gtk/FreetypeGlyphVector.java
	(getGlyphOutline): Apply glyph position translation.
	(getOutline): Do not apply glyph position translation.

2007-03-06  Tom Tromey  <tromey@redhat.com>

	* tools/gnu/classpath/tools/javah/Main.java (getName): New
	method.
	(getParser): Now protected.  Use getName.  Add '-v' alias for
	--verbose.
	(postParse): New method.
	(run): Now protected.  Use postParse.
	* tools/gnu/classpath/tools/javah/GcjhMain.java: New file.

2007-03-05  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* gnu/javax/management/Translator.java:
	(translate(String)): Use a Boolean array to
	comply with the new typing.
	* javax/management/openmbean/ArrayType.java:
	Added generic types and updated copyright headers.
	* javax/management/openmbean/CompositeData.java:
	Likewise.
	* javax/management/openmbean/CompositeDataSupport.java:
	Likewise.	
	* javax/management/openmbean/CompositeType.java:
	Likewise.	
	* javax/management/openmbean/OpenMBeanAttributeInfoSupport.java:
	Likewise.	
	* javax/management/openmbean/OpenMBeanOperationInfoSupport.java:
	Likewise.	
	* javax/management/openmbean/OpenMBeanParameterInfoSupport.java:
	Likewise.	
	* javax/management/openmbean/OpenType.java:
	Updated copyright header.	
	* javax/management/openmbean/SimpleType.java:
	Added generic types and updated copyright headers.
	* javax/management/openmbean/TabularData.java:
	Likewise.
	* javax/management/openmbean/TabularDataSupport.java:
	Likewise.
	* javax/management/openmbean/TabularType.java:
	Likewise.
	
2007-03-05  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* gnu/java/lang/management/BeanImpl.java:
	Reference the new Translator class.
	(translate(String)): Moved to Translator.
	* gnu/javax/management/Translator.java:
	New file.
	* javax/management/JMX.java:
	Likewise.
	* javax/management/MBeanServerInvocationHandler.java:
	Likewise.
	* javax/management/MXBean.java:
	Likewise.
	* javax/management/ObjectName.java:
	(ObjectName(String)): Catch a key without a value.
	* javax/management/StandardMBean.java:
	(StandardMBean(Class<?>)): Handle MXBeans.
	(StandardMBean(Object, Class<?>)): Likewise.
	(invoke(String,Object[],String[])): Disallow
	calling attribute methods and handle null signatures.
	(setAttribute(Attribute)): Search for mutators
	with the appropriate signature.
	* javax/management/openmbean/OpenType.java:
	Add generic typing.
	(ALLOWED_CLASSNAMES_LIST): New field.
	
2007-03-02  Mario Torre  <neugens@limasoftware.net>

	PR classpath/31017:
	committed for Petteri RÃ¤ty <betelgeuse@gentoo.org>
	* configure.ac: fix broken build for gcj browser plugin
	
2007-03-02  Mario Torre  <neugens@limasoftware.net>

	* java/awt/Desktop.java: new java 1.6 class.
	* java/awt/peer/DesktopPeer.java: new inteface.
	* gnu/java/awt/peer/GnomeDesktopPeer.java: new class.
	* gnu/java/awt/peer/ClasspathDesktopPeer.java: new class.
	* gnu/java/awt/peer/KDEDesktopPeer.java: new class.
	* java/awt/Toolkit.java (createDesktopPeer): new method to support the
	creation of DesktopPeer instances.
	* gnu/java/awt/peer/qt/QtToolkit.java: update copyright notice and
	organize import.
	* gnu/java/awt/ClasspathToolkit.java (createDesktopPeer): new method.

2007-02-28  Keith Seitz  <keiths@redhat.com>

	* gnu/classpath/jdwp/processor/EventRequestCommandSet.java
	(executeSet): Check if VM has capability for field access
	or modification events.
	* gnu/classpath/jdwp/processor/MethodCommandSet.java
	(executeByteCodes): Check if VM has capability and
	implement.
	* gnu/classpath/jdwp/processor/ObjectReferenceCommandSet.java
	(executeMonitorInfo): Likewise.
	* gnu/classpath/jdwp/processor/ReferenceTypeCommandSet.java
	(executeSourceDebugExtension): Likewise.
	* gnu/classpath/jdwp/processor/StackFrameCommandSet.java
	(executePopFrames): Likewise.
	* gnu/classpath/jdwp/processor/ThreadReferenceCommandSet.java
	(executeOwnedMonitors): Likewise.
	(executeCurrentContendedMonitor): Likewise.
	* gnu/classpath/jdwp/processor/VirtualMachineCommandSet.java
	(executeCapabilities): Rewrite using new VMVirtualMachine
	capabilities.
	(executeRedefineClasses): Check if VM has capability and
	implement.
	(executeSetDefaultStratum): Likewise.
	* gnu/classpath/jdwp/util/MonitorInfo.java; New file.
	* vm/reference/gnu/classpath/jdwp/VMVirtualMachine.java
	(canWatchFieldModification): New class constant.
	(canWatchFieldAccess): Likewise.
	(canGetBytecodes): Likewise.
	(canGetSyntheticAttribute): Likewise.
	(canGetOwnedMonitorInfo): Likewise.
	(canGetCurrentContendedMonitor): Likewise.
	(canGetMonitorInfo): Likewise.
	(canRedefineClasses): Likewise.
	(canAddMethod): Likewise.
	(canUnrestrictedlyRedefineClasses): Likewise.
	(canPopFrames): Likewise.
	(canUseInstanceFilters): Likewise.
	(canGetSourceDebugExtension): Likewise.
	(canRequestVMDeathEvent): Likewise.
	(canSetDefaultStratum): Likewise.
	(redefineClasses): New method.
	(setDefaultStratum): Likewise.
	(getSourceDebugExtension): Likewise.
	(getBytecodes): Likewise.
	(getMonitorInfo): Likewise.
	(getOwnedMonitors): Likewise.
	(getCurrentContendedMonitor): Likewise.
	(popFrames): Likewise.

2007-03-01  Roman Kennke  <kennke@aicas.com>

	* java/awt/Canvas.java
	(graphicsConfiguration): Removed duplicate (from Component) field.
	(Canvas(GraphicsConfiguration)): Set the Component's graphicsConfig
	field.
	(getGraphicsConfigurationImpl): Removed.
	* java/awt/Component.java
	(getGraphicsConfiguration): Moved implementation here. Synchronize
	on tree lock to prevent threading nastiness. Don't query peer
	and instead return the setting of the graphicsConfig field.
	(getGraphicsConfigurationImpl): Removed.
	* java/awt/Window.java
	(graphicsConfiguration): Removed duplicate (from Component) field.
	(Window): Set the Component's graphicsConfig field.
	(Window(GraphicsConfiguration)): Set the Component's graphicsConfig
	field.
	(Window(Window,GraphicsConfiguration)): Set the Component's 
	graphicsConfig field.
	(getGraphicsConfigurationImpl): Removed.
	(getGraphicsConfiguration): Fetch the local graphics env here
	if not already done and return that.

2007-02-28  Thomas Fitzsimmons  <fitzsim@redhat.com>

	* INSTALL: Document --with-ecj-jar configure option and ecj jar
	requirement for com.sun.tools.javac support.
	* configure.ac: Add --with-ecj-jar configure option.
	* gnu/classpath/Configuration.java.in (ECJ_JAR): New field.
	* tools/Makefile.am: Build decendents of com and sun directories.
	* resource/com/sun/tools/javac/messages.properties,
	resource/sun/rmi/rmic/messages.properties,
	tools/com/sun/javadoc/ClassDoc.java,
	tools/com/sun/javadoc/ConstructorDoc.java,
	tools/com/sun/javadoc/Doc.java,
	tools/com/sun/javadoc/DocErrorReporter.java,
	tools/com/sun/javadoc/Doclet.java,
	tools/com/sun/javadoc/ExecutableMemberDoc.java,
	tools/com/sun/javadoc/FieldDoc.java,
	tools/com/sun/javadoc/MemberDoc.java,
	tools/com/sun/javadoc/MethodDoc.java,
	tools/com/sun/javadoc/PackageDoc.java,
	tools/com/sun/javadoc/ParamTag.java,
	tools/com/sun/javadoc/Parameter.java,
	tools/com/sun/javadoc/ProgramElementDoc.java,
	tools/com/sun/javadoc/RootDoc.java,
	tools/com/sun/javadoc/SeeTag.java,
	tools/com/sun/javadoc/SerialFieldTag.java,
	tools/com/sun/javadoc/SourcePosition.java,
	tools/com/sun/javadoc/Tag.java,
	tools/com/sun/javadoc/ThrowsTag.java,
	tools/com/sun/javadoc/Type.java,
	tools/com/sun/javadoc/TypeVariable.java,
	tools/com/sun/tools/doclets/Taglet.java,
	tools/com/sun/tools/javac/Main.java,
	tools/com/sun/tools/javac/Messages.java,
	tools/sun/rmi/rmic/Main.java, tools/sun/rmi/rmic/Messages.java:
	New files.

2007-02-28  Keith Seitz  <keiths@redhat.com>

	* gnu/classpath/jdwp/processor/MethodCommandSet.java
	(executeLineTable): Use ReferenceTypeId instead of
	ClassReferenceTypeId.
	(executeVariableTable): Likewise.
	(executeVariableTableWithGeneric): Fix error message.
	* gnu/classpath/jdwp/processor/ReferenceTypeCommandSet.java
	(executeSignatureWithGeneric): Fix error message.
	(executeFieldWithGeneric): Likewise.
	(executeMethodsWithGeneric): Likewise.
	* gnu/classpath/jdwp/processor/StackFrameCommandSet.java
	(executeGetValues): Use ThreadId instead of ObjectId.
	(executeSetValues): Likewise.
	(executeThisObject): Likewise.

2007-02-28  Kyle Galloway  <kgallowa@redhat.com>

	* gnu/classpath/jdwp/id/NullObjectId.java: New class.
	* gnu/classpath/jdwp/util/NullObject.java: New class.
	* vm/reference/gnu/classpath/jdwp/VMIdManager.java
	(getObjectId): Handle null object.
	(get): Handle objectId of 0. 

2007-02-26  Francis Kung  <fkung@redhat.com>

	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GdkFontPeer.c
	(Java_gnu_java_awt_peer_gtk_GdkFontPeer_setFont): Stop using deprecated
	function for creating new font map.

2007-02-26  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/peer/gtk/CairoGraphics2D.java
	(drawCairoSurface): Do not reset clip.
	(drawImage(Image,AffineTransform,Color,ImageObserver)): Likewise.

2007-02-23  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/peer/gtk/CairoGraphics2D.java
	(drawCairoSurface): New method.
	(drawImage(Image,AffineTransform,Color,ImageObserver)): Use new
	drawCairoSurface() method.
	* gnu/java/awt/peer/gtk/CairoSurface.java
	(CairoSurface(SampleModel,CairoSurface,Rectangle,Point)): Copy correct
	width/height values, and copy sharedBuffer value.
	(createWritableChild): Remove debug line.
	(drawSurface): Removed method.
	* gnu/java/awt/peer/gtk/CairoSurfaceGraphics.java
	(drawComposite): Translate image when drawing.

2007-02-23  Gary Benson  <gbenson@redhat.com>
	    Jakub Jelinek  <jakub@redhat.com>

	PR libgcj/17002
	PR classpath/28550
	* java/util/Date.java (parse): Properly parse 09:01:02 as
	hours/minutes/seconds, not as hours/minutes/year.
	* java/util/SimpleTimeZone.java (SimpleTimeZone): Simplify
	{start,end}TimeMode constructor by calling shorter constructor,
	set {start,end}TimeMode fields after it returns.
	(setStartRule): Don't adjust startTime into WALL_TIME.  Set
	startTimeMode to WALL_TIME.
	(endStartRule): Similarly.
	(getOffset): Handle properly millis + dstOffset overflowing into the
	next day.  Adjust startTime resp. endTime based on startTimeMode
	resp. endTimeMode.
	* java/util/TimeZone.java (zoneinfo_dir, availableIDs, aliases0): New
	static fields.
	(timezones): Remove synchronized keyword.  Set zoneinfo_dir.
	If non-null, set up aliases0 and don't put anything into
	timezones0.
	(defaultZone): Call getTimeZone instead of timezones().get.
	(getDefaultTimeZone): Fix parsing of EST5 or EST5EDT6.  Use
	getTimeZoneInternal instead of timezones().get.
	(parseTime): Parse correctly hour:minute.
	(getTimeZoneInternal): New private method.
	(getTimeZone): Do the custom ID checking first, canonicalize
	ID for custom IDs as required by documentation.  Call
	getTimeZoneInternal to handle the rest.
	(getAvailableIDs(int)): Add locking.  Handle zoneinfo_dir != null.
	(getAvailableIDs(File,String,ArrayList)): New private method.
	(getAvailableIDs()): Add locking.  Handle zoneinfo_dir != null.
	* vm/reference/java/util/VMTimeZone.java (getDefaultTimeZoneId):
	To read /etc/localtime, use ZoneInfo.readTZFile instead of
	VMTimeZone.readtzFile.  Get better timezone name for
	/etc/localtime, either if it is a symlink or through
	/etc/sysconfig/clock.
	(readSysconfigClockFile): New static method.
	(readtzFile): Removed.
	* gnu/java/util/ZoneInfo.java: New file.	
	* java/lang/System.java: Add gnu.java.util.zoneinfo.dir to comments.
        * NEWS: Documented TimeZone interface changes.

2007-02-23  Francis Kung  <fkung@redhat.com>

	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_CairoSurface.c
	(Java_gnu_java_awt_peer_gtk_CairoSurface_create): Remove debug line.

2007-02-22  Keith Seitz  <keiths@redhat.ecom>

	* vm/reference/gnu/classpath/jdwp/VMVirtualMachine.java
	(getAllLoadedClassesCount): Remove.
	(getAllLoadedClasses): Return a Collection.
	* gnu/classpath/jdwp/processor/VirtualMachineCommandSet.java
	(executeClassesBySignature): VMVirtualMachine.getAllLoadedClasses
	now returns Collection.
	(executeAllClasses): Likewise.
	Get size of return from Colleciton instead of calling
	getAllLoadedClassesCount.

2007-02-22  Kyle Galloway  <kgallowa@redhat.com>

	* gnu/classpath/jdwp/processor/StackFrameCommandSet.java 
	(executeGetValues): Pass a signature byte to VMFrame.getValue.
	* vm/reference/gnu/classpath/jdwp/VMFrame.java (getValue): Add
	signature parameter.

2007-02-22  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/peer/gtk/CairoSurface.java
	(copyAreaNative): Pass surface pointer into copyAreaNative2().
	(copyAreaNative2): Add parameter for surface pointer.
	(getFlippedBuffer): Add parameter for surface pointer.
	(getGtkImage): Pass surface pointer into getFlippedBuffer().

2007-02-21  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/peer/gtk/BufferedImageGraphcs.java
	(constructor): Add pre-multiplied colour model to types available for
	optimization.
	(updateBufferedImage): Change surface.getPixels() call to surface.getData().
	* gnu/java/awt/peer/gtk/CairoGraphics2D.java
	(drawImage): Add checks before using CairoSurface optimization.
	* gnu/java/awt/peer/gtk/CairoSurface.java
	(bufferPointer): Removed field.
	(sharedBuffer): New field.
	(CairoSurface(GtkImage)): Copy array rather than using setPixels() call.
	(CairoSurface(int,int,int)): Use getData() convenience method.
	(CairoSurface(SampleModel,CairoSurface,Rectangle,Point)): Remove reference
	to deleted bufferPointer field.
	(copyAreaNative): Update documentation, remove reference to bufferPointer.
	(copyAreaNative2): Remove reference to deleted bufferPointer field.
	(destroy): Remove reference to deleted bufferPointer field.
	(dispose): Updated to reflect new method signature for destroy().
	(drawSurface): Added documentation.
	(getData): New convience method.
	(getFlippedBuffer): Removed method parameters.
	(getGtkImage): Updated to reflect new method signature.
	(getPixels): Removed method.
	(nativeGetElem): Removed method.
	(netiveGetPixels): Removed method.
	(nativeSetElem): Removed method.
	(nativeSetPixels): Removed method.
	(setPixels): Removed method.
	(syncJavaToNative): New method.
	(syncNativeToJava): New method.
	* gnu/java/awt/peer/gtk/CairoSurfaceGraphics.java
	(draw): Sync buffers if necessary.
	(drawGlyphVector): Likewise.
	(drawImage): Likewise.
	(drawRenderedImage): Likewise,
	(fill): Likewise.
	* include/gnu_java_awt_peer_gtk_CairoSurface.h: Regenerated.
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_CairoSurface.c
	(Java_gnu_java_awt_peer_gtk_CairoSurface_copyAreaNative2): Use pointer to
	surface rather than pointer to buffer.
	(Java_gnu_java_awt_peer_gtk_CairoSurface_create): Provide fall-back for
	copied arrays.
	(Java_gnu_java_awt_peer_gtk_CairoSurface_destroy): Handle copied arrays.
	(Java_gnu_java_awt_peer_gtk_CairoSurface_getFlippedBuffer): Retrieve
	information on size using JNI calls.
	(Java_gnu_java_awt_peer_gtk_CairoSurface_getElem): Removed.
	(Java_gnu_java_awt_peer_gtk_CairoSurface_getPixels): Removed.
	(Java_gnu_java_awt_peer_gtk_CairoSurface_setElem): Removed.
	(Java_gnu_java_awt_peer_gtk_CairoSurface_setPixels): Removed.
	(Java_gnu_java_awt_peer_gtk_CairoSurface_syncJavaToNative): New function.
	(Java_gnu_java_awt_peer_gtk_CairoSurface_syncNativeToJava): New function.
	(BUFFER): Removed constant.
	(SHARED): New constant.

2007-02-20  Gary Benson  <gbenson@redhat.com>

	* javax/management/ObjectName.java
	(domainMatches): New method.
	(apply): Rearranged to use the above.

2007-02-19  Mark Wielaard  <mark@klomp.org>

	* doc/.cvsignore: Add *.1.
	* doc/Makefile.am (CLEANFILES): Add Tools_MANFILES.

2007-02-19  Dalibor Topic  <robilad@kaffe.org>

	* cp-hacking.texinfo, cp-tools.texinfo, 
	cp-vmintegration.texinfo: Prefix output file name
	with cp.

2007-02-19  Gary Benson  <gbenson@redhat.com>

	* javax/management/ObjectName.java
	(properties): Initialize when declared.
	(ObjectName(String)): Don't initialize properties here.
	(ObjectName(String, String, String): Likewise.

2007-02-19  Chris Burdess  <dog@gnu.org>

	Fixes #30831
	* gnu/xml/dom/ls/SAXEventSink.java: Only set extended document
	  properties when reader is available.

2007-02-19  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/MBeanServer.java:
	(queryMBeans(ObjectName,QueryExp)): Returned
	generically-typed Set.
	(queryNames(ObjectName,QueryExp)): Likewise.
	* javax/management/MBeanServerConnection.java:
	(queryMBeans(ObjectName,QueryExp)): Returned
	generically-typed Set.
	(queryNames(ObjectName,QueryExp)): Likewise.
	* javax/management/ObjectName.java:
	Use a generically-typed TreeMap.
	(ObjectName(String,Hashtable<String,String>):
	Genericized.
	(getKeyPropertyList()): Likewise.
	* javax/management/StandardMBean.java:
	Use a generically-typed interface class.
	(StandardMBean(Class<?>)): Genericized.
	(StandardMBean(T, Class<T>)): Likewise.
	(getImplementationClass()): Likewise.
	(getMBeanInterface()): Likewise.
	
2007-02-19  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/Descriptor.java:
	New file.
	* javax/management/DescriptorRead.java:
	Likewise.
	* javax/management/DescriptorAccess.java:
	Likewise.
	
2007-02-16  Matthias Klose  <doko@ubuntu.com>

	* doc/Makefile.am: Add rules to build and install man pages
	from texinfo docs.
	* doc/hacking.texinfo doc/tools.texinfo, doc/vmintegration.texinfo:
	Rename, prefix files with "cp-".
	* doc/cp-tools.texinfo: Add markup for man page generation,
	add documentation for command line options for gjar, gjavah,
	gnative2ascii, gorbd, grmid, grmiregistry, gserialver, gtnameserv.
	doc/texi2pod.pl: New, taken from the GCC sources.

2007-02-16  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/ClasspathGraphicsEnvironment.java: New file.
	* gnu/java/awt/peer/gtk/CairoSurface.java
	(CairoDataBuffer): Removed inner class.
	(CairoSurface(int,int,int,int)): New constructor.
	(CairoSurface(int,int)): Delegate to new constructor.
	(CairoSurface(SampleModel,CairoSurface,Rectangle,Point)): New constructor
	for creating child rasters.
	(create): Added int[] parameter.
	(createChild): New method.
	(createCompatibleWritableRaster): New methods.
	(createTranslatedChild): New method.
	(createWritableChild): New method.
	(createWritableTranslatedChild): New method.
	(destroy): Added int[] parameter.
	(dispose): Only free native resources if this Surface has no parents.
	(isCompatibleColorModel): New method.
	(isCompatibleSampleModel): New method.
	* gnu/java/awt/peer/gtk/CairoSurfaceGraphics.java
	(draw): Set transform, smarter bounds generation.
	(drawComposite): Improved clipping.
	(drawImage): Fixed bounds translation.
	(drawRenderedImage): Set transform in buffer.
	(fill): Set transform in buffer.
	* gnu/java/awt/peer/gtk/GdkGraphicsEnvironment.java
	(createRaster): New method.
	* java/awt/image/BufferedImage.java
	(BufferedImage(int,int,int)): Use optimized raster if possible.
	* include/gnu_java_awt_peer_gtk_CairoSurface.h: Regenerated.
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_CairoSurface.c
	(Java_gnu_java_awt_peer_gtk_CairoSurface_create): Share data buffer between
	Cairo and Java.
	(Java_gnu_java_awt_peer_gtk_CairoSurface_destroy): Free data array.

2007-02-16  Francis Kung  <fkung@redhat.com>

	* javax/management/NotificationBroadcasterSupport.java: Update imports.

2007-02-16  Andrew Haley  <aph@redhat.com>

        * gnu/java/lang/management/MemoryMXBeanImpl.java,
        javax/management/MBeanServerDelegate.java: Use
        gnu.javax.management.ListenerData rather than
        gnu.classpath.ListenerData.
        * gnu/javax/management/ListenerData.java: Move here from
        gnu/classpath/ListenerData.java.

2006-10-14  Edwin Steiner  <edwin.steiner@gmx.net>

	PR classpath/28652:
	* javax/management/MBeanInfo.java (MBeanInfo): 
	Use clone to duplicate the arrays in order to
	preserve the array type.
	
2007-02-15  Gary Benson  <gbenson@redhat.com>

	* gnu/javax/management/Server.java
	(registerMBean): Always register objects that implement the
	MBeanRegistration interface, and check the name returned by
	preRegister before using it.

2007-02-15  Roman Kennke  <kennke@aicas.com>

	* java/nio/ByteOrder.java
	(nativeOrder): Avoid NPE when comparing a system property.

2007-02-13  Gary Benson  <gbenson@redhat.com>

	* javax/management/ObjectName.java
	(toString): Return this item's canonical name.

2007-02-12  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/ClasspathToolkit.java: 
	* gnu/java/awt/peer/gtk/AsyncImage.java,
	* gnu/java/awt/peer/gtk/BufferedImageGraphics.java,
	* gnu/java/awt/peer/gtk/CairoGraphics2D.java,
	* gnu/java/awt/peer/gtk/CairoSurface.java,
	* gnu/java/awt/peer/gtk/ComponentGraphics.java,
	* gnu/java/awt/peer/gtk/FreetypeGlyphVector.java,
	* gnu/java/awt/peer/gtk/GdkFontPeer.java,
	* gnu/java/awt/peer/gtk/GdkPixbufDecoder.java,
	* gnu/java/awt/peer/gtk/GdkScreenGraphicsDevice.java,
	* gnu/java/awt/peer/gtk/GtkCheckboxPeer.java,
	* gnu/java/awt/peer/gtk/GtkChoicePeer.java,
	* gnu/java/awt/peer/gtk/GtkClipboard.java,
	* gnu/java/awt/peer/gtk/GtkClipboardNotifier.java,
	* gnu/java/awt/peer/gtk/GtkComponentPeer.java,
	* gnu/java/awt/peer/gtk/GtkFileDialogPeer.java,
	* gnu/java/awt/peer/gtk/GtkFramePeer.java,
	* gnu/java/awt/peer/gtk/GtkImage.java,
	* gnu/java/awt/peer/gtk/GtkImageConsumer.java,
	* gnu/java/awt/peer/gtk/GtkLabelPeer.java,
	* gnu/java/awt/peer/gtk/GtkListPeer.java,
	* gnu/java/awt/peer/gtk/GtkMainThread.java,
	* gnu/java/awt/peer/gtk/GtkMenuBarPeer.java,
	* gnu/java/awt/peer/gtk/GtkMenuComponentPeer.java,
	* gnu/java/awt/peer/gtk/GtkMenuPeer.java,
	* gnu/java/awt/peer/gtk/GtkMouseInfoPeer.java,
	* gnu/java/awt/peer/gtk/GtkScrollbarPeer.java,
	* gnu/java/awt/peer/gtk/GtkScrollPanePeer.java,
	* gnu/java/awt/peer/gtk/GtkSelection.java,
	* gnu/java/awt/peer/gtk/GtkTextAreaPeer.java,
	* gnu/java/awt/peer/gtk/GtkTextFieldPeer.java,
	* gnu/java/awt/peer/gtk/GtkToolkit.java,
	* gnu/java/awt/peer/gtk/GtkWindowPeer.java,
	* gnu/java/awt/peer/gtk/VolatileImageGraphics.java,
	* java/awt/RenderingHints.java,
	* java/awt/image/BufferedImage.java: Reformatted and added generics.

2007-02-12  Tom Tromey  <tromey@redhat.com>

	* java/net/Socket.java (bind): Typo fix.

2007-02-12  Tom Tromey  <tromey@redhat.com>

	* vm/reference/java/lang/reflect/Method.java (getDefaultValue):
	New method.
	* sun/reflect/annotation/AnnotationInvocationHandler.java (create):
	New method.
	(arrayClone): New method.
	(invoke): Clone array return results.

2007-02-12  Jakub Jelinek  <jakub@redhat.com>

	PR 23566
	* scripts/timezones.pl: Parse each file in 2 passes, in one parse
	just Rule lines, in the other everything else.	Pass 0 instead of
	$savings as second argument to parseRule when parsing the start
	rule.
	* java/util/TimeZone.java (timezones): Regenerate from tzdata2007a.

2007-02-12  Jakub Jelinek  <jakub@redhat.com>

	* vm/reference/java/util/VMTimeZone.java: Rewrite to handle both
	the old 'TZif\0' format and the new one.
	* java/util/TimeZone.java: Handle default (one hour) daylight
	savings.

2007-02-12  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/Query.java:
	New file.
	* javax/management/StandardMBean.java:
	Use the implementation's class loader.
	
2007-02-10  Mark Wielaard  <mark@klomp.org>

	* javax/swing/plaf/metal/MetalFileChooserUI.java: Import Date from
	java.util, not from java.sql.

2007-02-10  Roman Kennke  <kennke@aicas.com>

	* javax/imageio/stream/ImageOutputStreamImpl.java
	(flushBits): Implemented.
	(writeBit): Implemented.
	(writeBits): Implemented.

2007-02-10  Roman Kennke  <kennke@aicas.com>

	* javax/swing/TransferHandler.java
	(SwingDragGestureRecognizer): New inner class.
	(SwingDragHandler): New inner class.
	(recognizer): New field.
	(exportAsDrag): Implemented missing method.

2007-02-10  Roman Kennke  <kennke@aicas.com>

	* java/awt/GraphicsConfiguration.java
	(createCompatibleVolatileImage(int,int,ImageCapabilities): Provide
	default implementation that delegates to
	createCompatibleVolatileImage(int,int).
	(createCompatibleVolatileImage(int,int,ImageCapabilities,int):
	New method from JDK5 spec. Default implementation by delegating to
	(createCompatibleVolatileImage(int,int,int).

2007-02-09  Tom Tromey  <tromey@redhat.com>

	PR libgcj/30647:
	* configure.ac: Also check for jack/jack.h.

2007-02-09  Mario Torre  <neugens@limasoftware.net>

	* java/io/File.java: remove import for
	gnu.classpath.NotImplementedException.
	(getUsableSpace): removed stub.
	(getFreeSpace): likewise.
	(getTotalSpace): likewise.

2007-02-09  Mario Torre  <neugens@limasoftware.net>

	* vm/reference/java/io/VMFile.java: 
	(canExecute): new 1.6 native method.
	(setReadable): likewise.
	(setWritable): likewise.
	(setExecutable): likewise.
	* java/io/File.java: added import for gnu.classpath.NotImplementedException.
	(setReadOnly): new 1.6 method.
	(canExecute): likewise. 
	(setReadable): likewise. 
	(setWritable): likewise.
	(setExecutable): likewise.
	(getUsableSpace): added stub for new 1.6 method.
	(getFreeSpace): likewise.
	(getTotalSpace): likewise.
	(checkExec): new private method to support new 1.6 additions.
	* native/jni/java-io/java_io_VMFile.c:
	set_file_permissions: new helper function.
	Java_java_io_VMFile_setReadable: new native method to bakcup 1.6 methods
	in VMFile.java.
	Java_java_io_VMFile_setWritable: likewise. 
	Java_java_io_VMFile_setExecutable: likewise. 
	Java_java_io_VMFile_canExecute: likewise. 
	* native/jni/native-lib/cpio.h: added new flags: CPFILE_FLAG_EXEC,
	CPFILE_FLAG_USR and CPFILE_FLAG_OFF.
	cpio_chmod: new function declaration.
	cpio_checkAccess: likewise.
	* native/jni/native-lib/cpio.c:
	cpio_chmod: new function definition.
	cpio_checkAccess: likewise.

2007-02-09  Gary Benson  <gbenson@redhat.com>

	* javax/management/ObjectName.java
	(quote): Initialize StringBuilder correctly.

2007-02-09  Francis Kung  <fkung@redhat.com>

	* java/awt/image/BufferedImage: Reformatted.

2007-02-09  Ito Kazumitsu  <kaz@maczuka.gcd.org>

	Fixes bug #30732
	* gnu/java/util/regex/RETokenChar.java(chain): Check whether the next
	token has a next token.

2007-02-08  Roman Kennke  <kennke@aicas.com>

	PR 30347
	* javax/swing/JViewport.java
	(scrollRectToVisible): Use correct X/Y offset for calculations.
	(paintBackingStore): Update backbuffer when we are not the paint
	root.

2007-02-08  Roman Kennke  <kennke@aicas.com>

	* java/awt/image/SinglePixelPackedSampleModel.java
	(getDataElements(int,int,Object,DataBuffer)):
	Replace DataBuffer using method with simple
	switch. This does not check for the exact type (class) of the
	DataBuffer but instead checks the transfer type.
	(getDataElements(int,int,int,intObject,DataBuffer)): Removed.
	(setDataElements): Fixed indentation.
	(setPixels): Removed unused statement.

2007-02-07  Tom Tromey  <tromey@redhat.com>

	* tools/gnu/classpath/tools/javah/PathOptionGroup.java
	(PathOptionGroup): Allow '-cp' as well.

2007-02-07  Chris Burdess  <dog@gnu.org>

	Fixes PR 30718.
	* gnu/xml/dom/ls/SAXEventSink.java: Add public accessor/mutators.
	* gnu/xml/transform/XSLURIResolver.java: Add support for custom
	  SAXSources without a backing URL or stream.

2007-02-06  Tom Tromey  <tromey@redhat.com>

	PR libgcj/30707:
	* tools/gnu/classpath/tools/javah/JniIncludePrinter.java
	(printClass): Always print a header.

2007-02-06  Chris Burdess  <dog@gnu.org>

	Fixes PR 27710.
	* gnu/xml/dom/DomDocumentBuilderFactory.java: Fall back to synchronous
	  LSParser if implementation does not support asynchronous.
	* gnu/xml/stream/XMLParser.java,
	  gnu/xml/stream/XIncludeFilter.java: Use custom code instead of
	  java.net.URL to resolve to an an absolute URI, to avoid nonexistent
	  protocol handler problems.

2007-02-05  Andrew Haley  <aph@redhat.com>

        PR cp-tools/30706
        * tools/gnu/classpath/tools/javah/JniIncludePrinter.java:
        (printClass): Replace '/' in filenames with '_'.
        * tools/gnu/classpath/tools/javah/JniStubPrinter.java
        (printClass): Likewise.

2007-02-05  Tom Tromey  <tromey@redhat.com>

	* java/net/Proxy.java (equals): Handle case where address==null.
	(hashCode): Likewise.
	(toString): Likewise.

2007-02-04  Jeroen Frijters  <jeroen@frijters.net>

	* java/lang/Class.java
	(newInstance): Moved setAccessible call to helper method.
	(getEnumConstants): Call new helper method to allow values method to be
	called on non-public enum classes.
	(setAccessible): New helper method.
	* java/lang/Enum.java
	(valueOf): Call new helper method in class to allow field value to
	be read on non-public enum classes.

2007-02-04  Jeroen Frijters  <jeroen@frijters.net>

	Fix for #30693
	* gnu/java/nio/charset/ByteCharset.java
	(ByteCharset.Decoder.decodeLoop): Reset input buffer position if
	the byte read was unmappable.

2007-02-02  Kyle Galloway  <kgallowa@redhat.com>

	* gnu/classpath/jdwp/processor/StackFrameCommandSet.java
	(executeGetValues): Changed getFrame to use a jlong to pass frameID.
	(executeSetValues): Ditto.
	(executeThisObject): Ditto.
	* vm/reference/gnu/classpath/jdwp/VMFrame.java: Added thread field and a
	constructor used to create VMFrames.
	(getThread): New method.
	* vm/reference/gnu/classpath/jdwp/VMVirtualMachine.java(getFrame): Changed
	to take a long instead of a ByteBuffer to pass the frameID.

2007-02-01  Tom Tromey  <tromey@redhat.com>

	* java/util/logging/LogManager.java (reset): Remove bogus
	'while'.

2007-01-31  Casey Marshall  <csm@gnu.org>

	* gnu/javax/net/ssl/Base64.java: move to `gnu/java/util/Base64.java.' 
	* gnu/javax/net/ssl/PrivateCredentials.java: clean up unused imports.
	(add): use `gnu.java.util.Base64.'
	* gnu/java/net/protocol/http/Request.java (authenticate): use
	`gnu.java.util.Base64.'
	* tools/gnu/classpath/tools/jarsigner/HashUtils.java (hashStream):
	likewise.
	* tools/gnu/classpath/tools/keytool/CertReqCmd.java (start): likewise.
	* tools/gnu/classpath/tools/keytool/ExportCmd.java (start): likewise.
	* tools/gnu/classpath/tools/keytool/ListCmd.java (printRFC1421):
	likewise.
	* gnu/java/net/Base64.java: removed.
	* gnu/java/security/util/Base64.java: removed.

2007-01-31  Casey Marshall  <csm@gnu.org>

	Fixes PR classpath/24191.
	Fix suggested by Rafael Teixeira <monoman@gmail.com>.
	* javax/crypto/CipherOutputStream.java (write): check return value
	of `update' for null.

2007-01-31  Tom Tromey  <tromey@redhat.com>

	* resource/gnu/classpath/tools/jar/messages.properties
	(Main.Stdin): New message.
	* tools/gnu/classpath/tools/jar/Main.java (initializeParser): Add
	'-@' option.
	(readNames): New method.
	(run): Use it.

2007-01-30  Roman Kennke  <kennke@aicas.com>

	PR 20577
	* javax/swing/DefaultDesktopManager.java
	(activateFrame): Added a bunch of null checks. Don't call
	JInternalFrame.setSelected() to avoid recursion.

2007-01-29  Andrew Haley  <aph@redhat.com>

	* java/lang/SecurityManager.java (SecurityManager): Load and
	initialize java.security.Security.

2007-01-28  Ito Kazumitsu  <kaz@maczuka.gcd.org>

	* native/jni/java-nio/gnu_java_nio_VMChannel.c
	(Java_gnu_java_nio_VMChannel_accept): Throw SocketTimeoutException
	in case of timeout.
	* native/jni/java-nio/javanio.c(cpnio_accept): Call select() if
	SO_RCVTIMEO is set.

2007-01-26  Tom Tromey  <tromey@redhat.com>

	* tools/gnu/classpath/tools/javah/FieldHelper.java (print): Print
	'volatile' after field type.

2007-01-26  Chris Burdess  <dog@gnu.org>

	Fixes #30597
	* gnu/xml/dom/DomDocumentBuilder.java: Throw IOException where cause
	  of LSException is an IOException.
	* gnu/xml/dom/ls/DomLSParser.java,
	  gnu/xml/stream/SAXParser.java: Ensure coalescing feature is set
	  correctly during LS parsing.

2007-01-21  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/PersistentMBean.java:
	New file.
	
2007-01-21  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/AttributeChangeNotificationFilter.java:
	Correct typo.
	* javax/management/NotificationFilterSupport.java:
	New file.
	
2007-01-21  Mark Wielaard  <mark@klomp.org>

	* java/security/SecureClassLoader.java (defineClass): Method returns
	Class<?>.
	* java/security/SignatureSpi.java (engineUpdate(ByteBuffer):
	Does not throw SignatureException. Chain SignatureException inside
	IllegalStateException.

2007-01-21  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/NotificationBroadcasterSupport.java:
	New file.
	
2007-01-20  Ito Kazumitsu  <kaz@maczuka.gcd.org>

	* java/text/DecimalFormat.java(parse): Corrected the ParsePosition
	settings.

2007-01-20  Ito Kazumitsu  <kaz@maczuka.gcd.org>

	* java/text/SimpleDateFormat(parse): Corrected the usage of
		NumberFormat.

2007-01-20  Ito Kazumitsu  <kaz@maczuka.gcd.org>

	Fixes bug #30488
	* native/jni/native-lib/cpnet.c(SOCKET_NOSIGNAL): Deleted,
	(setsockopt_NOSIGPIPE): New function,
	(cpnet_send): Corrected the option setting to send(),
	(cpnet_sendTo): Corrected the option setting to sendto(). 

2007-01-19  Marco Trudel  <mtrudel@gmx.ch>

	* java/util/Arrays.java (binarySearch): Change comparison order.

2007-01-17  Keith Seitz  <keiths@redhat.com>

	* gnu/classpath/jdwp/events/filters/StepFilter.java:
	Update javadoc. 
	(matches): Implement.

	* gnu/classpath/jdwp/event/EventManager.java (EventManager): Honor
	agent startup suspension for VM_INIT.

2007-01-17  Tom Tromey  <tromey@redhat.com>

	* tools/gnu/classpath/tools/javah/PathOptionGroup.java
	(PathOptionGroup): Set default boot class path.

2007-01-17  Mark Wielaard  <mark@klomp.org>

	* javax/activity/ActivityCompletedException.java: Make constructors
	public.
	* javax/activity/ActivityRequiredException.java: Likewise.
	* javax/activity/InvalidActivityException.java: Likewise.

2007-01-17  Roman Kennke  <kennke@aicas.com>

	* javax/swing/plaf/basic/BasicRadioButtonUI.java
	(paint): Use helper method to figure out icon. Don't override
	the icon field in that class. Check for null icons.
	(getCurrentIcon): New helper function to determine icon to be
	painted.

2007-01-17  Mark Wielaard  <mark@klomp.org>

	* javax/activity/ActivityCompletedException.java: New file.
	* javax/activity/ActivityRequiredException.java: Likewise.
	* javax/activity/InvalidActivityException.java: Likewise.
	* javax/activity/package.html: Likewise.

2007-01-15  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/DefaultLoaderRepository.java:
	(loadClass(String)): Made static.
	(loadClassWithout(String,ClassLoader)): Likewise.

2007-01-15  Kyle Galloway  <kgallowa@redhat.com>

	* gnu/classpath/jdwp/exception/TypeMismatchException.java: New file.
	* gnu/classpath/jdwp/exception/InvalidFrameException.java: Fix indentation.
	* gnu/classpath/jdwp/exception/InvalidSlotException.java: Fix indentation.
	
2007-01-15  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/AttributeValueExp.java:
	Corrected serialVersionUID typo.
	* javax/management/DefaultLoaderRepository.java:
	New file.
	* javax/management/MBeanServerFactory.java:
	Add generic typing.
	
2007-01-15  Kyle Galloway  <kgallowa@redhat.com>

	* gnu/classpath/jdwp/exception/InvalidFrameException.java: New file.

2007-01-15  Kyle Galloway  <kgallowa@redhat.com>

	* gnu/classpath/jdwp/exception/AbsentInformationException.java: New file.

2007-01-15  Kyle Galloway  <kgallowa@redhat.com>

	* gnu/classpath/jdwp/exception/InvalidSlotException.java: New file.

2007-01-14  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/AttributeValueExp.java: New file.
	* javax/management/QueryEval.java: Likewise.
	* javax/management/StringValueExp.java: Likewise.
	
2007-01-14  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/AttributeChangeNotificationFilter.java:
	New file.
	
2007-01-11  Andreas Tobler  <a.tobler@schweiz.org>

	* examples/gnu/classpath/examples/awt/AicasGraphicsBenchmark.java
	(AicasGraphicsBenchmark): Load images from ../icons.
	* examples/gnu/classpath/examples/java2d/J2dBenchmark.java (init):
	Likewise.
	* examples/Makefile.am (EXAMPLE_ICONS): Add rule to copy *.gif files
	to icons.
	* examples/gnu/classpath/examples/awt/aicas.png: Move to ../icons.
	Delete here.
	* examples/gnu/classpath/examples/awt/palme.gif: Likewise.
	* examples/gnu/classpath/examples/java2d/aicas.png: Likewise.
	* examples/gnu/classpath/examples/java2d/palme.gif: Likewise.
	* examples/gnu/classpath/examples/icons/aicas.png: Moved.
	* examples/gnu/classpath/examples/icons/palme.gif: Likewise.

2007-01-09  Tania Bento  <tbento@redhat.com>

	* java/security/Permission.java:
	(toString): If there are no actions, then there should not 
	be a space between its name and ')'.

2007-01-08  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* javax/management/AttributeChangeNotification.java:
	New file.
	
2007-01-08  Cameron McCormack  <cam@mcc.id.au>

	PR 30355
	* java/util/Arrays.java:
	(binarySearch(byte[],byte)): Added check for zero-length array.
	(binarySearch(short[],short)): Likewise.
	(binarySearch(int[],int)): Likewise.
	(binarySearch(long[],long)): Likewise.
	(binarySearch(char[],char)): Likewise.
	(binarySearch(float[],float)): Likewise.
	(binarySearch(double[],double)): Likewise.
	(binarySearch(Object[],Object)): Likewise.
	(binarySearch(T[],T,Comparator)): Likewise.

2007-01-08  Tom Tromey  <tromey@redhat.com>

	* tools/gnu/classpath/tools/native2ascii/Native2ASCII.java (run):
	Fix length check.  PR classpath/30346.

2007-01-09  Raif S. Naffah  <classpath@naffah-raif.name>

	* tools/gnu/classpath/tools/jarsigner/SFHelper.java: Updated copyright year.
	(sfEntries): Use generics.
	(writeDSA()): Likewise.
	(startSigning()): Likewise.
	(updateEntry()): Likewise.
	* tools/gnu/classpath/tools/jarsigner/Messages.java: Updated copyright year.
	(CACHED_FORMATS): Use generics.
	(getFormattedString()): Likewise.
	* tools/gnu/classpath/tools/jarsigner/Main.java: Updated copyright year.
	(fileAndAlias): Use generics.
	(ToolParser.validate()): Likewise.
	* tools/gnu/classpath/tools/jarsigner/JarVerifier.java:
	Updated copyright year.
	Re-ordered imports and removed unused entries.
	(entryHashes): Use generics.
	(start()): Likewise.
	(verifySFEntries()): Likewise.
	Use map's entrySet() instead of its keySet().

2007-01-08  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* java/text/DateFormat.java:
	(computeInstance(int,int,Locale,boolean,boolean)):
	Throw an exception when locale info. is unavailable.
	(computeDefault(int,int,boolean,boolean)): New method.
	(getDateInstance(int,Locale)): Check providers.
	(getDateTimeInstance(int,int,Locale)): Likewise.
	(getTimeInstance(int,Locale)): Likewise.
	* java/text/DateFormatSymbols.java:
	Update documentation to match DecimalFormatSymbols.
	* java/text/DecimalFormatSymbols.java:
	(DecimalFormatSymbols(Locale)): Reordered.
	(getInstance()): Implemented.
	(getInstance(Locale)): Implemented.
	* java/text/NumberFormat.java:
	(computeInstance(Locale,String,String)):
	Throw an exception when locale info is unavailable.
	(getCurrencyInstance(Locale)): Check providers.
	(getIntegerInstance(Locale)): Likewise.
	(getNumberInstance(Locale)): Likewise.
	(getPercentInstance(Locale)): Likewise.
	* java/text/spi/DateFormatProvider.java: New file.
	* java/text/spi/DecimalFormatSymbolsProvider.java: Likewise.
	* java/text/spi/NumberFormatProvider.java: Likewise.
	
2007-01-07  Ito Kazumitsu  <kaz@maczuka.gcd.org>

	Fixes bug #30377
	* native/jni/native-lib/cpnet.h: Add some include files.

2007-01-07  Roman Kennke  <roman@kennke.org>

	PR 30337
	* java/awt/Component.java
	(getFontImpl): Return null when the component has no font set
	and also has no parent yet.
	* javax/swing/plaf/basic/BasicComboBoxUI.java
	(PropertyChangeHandler.propertyChange): Only add editor when combo
	box is editable. Avoid fetching the property name repeatedly.
	Invalidate when renderer or prototypeDisplayValue change.
	(uninstallComponents): Unconfigure everything and then remove all
	components.
	* javax/swing/plaf/basic/BasicComboPopup.java
	(uninstallingUI): Don't nullify list model.
	* javax/swing/plaf/metal/MetalComboBoxUI.java
	(createArrowButton): Pass currentValuePane to the MetalComboBoxButton
	constructor rather than a new (unconnected) CellRendererPane.

2007-01-06  Roman Kennke  <roman@kennke.org>

	PR 30337
	* javax/swing/plaf/basic/BasicComboBoxUI.java
	(installUI): Install popup and list here.
	Don't configure the arrow button and editor here.
	(installComponents): Don't install popup and list here. (Moved
	to installUI). Configure arrow button here and check for null.
	(addEditor): Configure editor here.
	(configureArrowButton): Directly fetch listeners from popup.
	(paintCurrentValue): Removed unused local variables.
	(layoutContainer): Removed unused local variables.
	(PropertyChangeHandler.propertyChange): Don't invalidate minimumSize
	on each property change. Avoid calling getPropertyName() repeatedly.
	Clean up. Call addEditor() when editor changes. Configure and
	unconfigure editor when editable changes. Use 'model' instead
	of non-existing 'dataModel' property.
	* javax/swing/plaf/basic/BasicComboPopup.java
	(uninstallingUI): Remove property change listener and item listener
	here. Uninstall list listeners. Set model to null to prevent leakage.
	(configureList): Don't sync list selection there.
	(uninstallComboBoxListeners): Moved to uninstallingUI.
	(uninstallListeners): Moved to uninstallingUI.
	* javax/swing/plaf/metal/MetalComboBoxUI.java
	(createPopup): Call super.
	(getMinimumSize): Removed unused statement.

2007-01-06  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* java/text/Collator.java:
	(getInstance(Locale)): Check providers.
	* java/text/spi/CollatorProvider.java:
	New file.
	
2007-01-04  Roman Kennke  <roman@kennke.org>

	PR 30122
	* java/awt/Component.java
	(getFont): Don't synchronize on tree lock here. The method is
	thread-safe 'enough' by fetching local variables in getFontImpl().

2007-01-04  Roman Kennke  <roman@kennke.org>

	* java/awt/AWTEvent.java
	(toString): Don't include the whole component in the output,
	only its name.
	* java/awt/Component.java
	(isShowing): Create local copy of parent field for better
	thread safety and efficiency.
	* java/awt/EventDispatchThread.java
	(EventDispatchThread): Make sure the event thread is not a daemon
	thread in case it gets started by a daemon thread.
	* java/awt/image/IndexColorModel.java
	(createColorMap): New helper method for creating the color map.
	(IndexColorModel): (all constructors) use createColorMap() helper
	method.

2007-01-04  Roman Kennke  <roman@kennke.org>

	* gnu/java/awt/font/autofit/GlyphHints.java
	(alignStrongPoints): Don't special case the vertical dimension.
	(computeInflectionPoints): Corrected computation of inflection
	points.
	* gnu/java/awt/font/autofit/Utils.java
	(ANGLE_4PI): Removed.
	(ANGLE_PI2): New constant for PI/2.
	(ANGLE_PI4): New constant for PI/4.
	(angleDiff): Fixed.
	(atan): Fixed.

2007-01-03  Cameron McCormack  <cam@mcc.id.au>

	Fixes bug #29246
	* java/awt/Toolkit.java (getLockingKeyState): Use AWTUtilities
	isValidKey method. Throw UnsupportedOperationException on a valid
	key (for which no locking state can be given).
	* gnu/java/awt/AWTUtilities.java (isValidKey): New method.
	* gnu/java/awt/peer/gtk/GtkToolkit.java (getLockingKeyState): New
	method.
	* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkToolkit.c
	(Java_gnu_java_awt_peer_gtk_GtkToolkit_getLockState): New method.
	* include/gnu_java_awt_peer_gtk_GtkToolkit.h: Regenerated.

2007-01-03  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* java/text/BreakIterator.java:
	(getCharacterInstance(Locale)): Check providers.
	(getLineInstance(Locale)): Likewise.
	(getSentenceInstance(Locale)): Likewise.
	(getWordInstance(Locale)): Likewise.
	* java/text/spi/BreakIteratorProvider.java:
	New file.
	* java/text/spi/DateFormatSymbolsProvider.java:
	Update header text.
	* java/util/ServiceConfigurationError.java:
	Add serialVersionUID.
	
2007-01-03  Francis Kung  <fkung@redhat.com>

	* gnu/java/awt/peer/gtk/CairoGraphics2D.java:
	(copy): Copy and set antialias value.

2007-01-03  Tania Bento  <tbento@redhat.com>

	* java/awt/CardLayout.java:
	(maximumLayoutSize): Return a new Dimension with a width of value
	Integer.MAX_VALUE and a height of value Integer.MAX_VALUE if Component
	has no components.

2007-01-03  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* java/text/DateFormatSymbols.java:
	(getZoneStrings(ResourceBundle)): Changed to...
	(getZoneStrings(ResourceBundle,Locale)): Added
	use of TimeZoneNamesProvider.
	(getZoneStrings()): Return either mutated zone
	strings or initial ones.
	(getInstance(Locale)): Check DateFormatSymbolsProvider
	instances.
	* java/text/spi/DateFormatSymbolsProvider.java:
	New file.
	* java/text/spi/package.html: New file.
	
2007-01-02  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* java/util/Currency.java:
	(getSymbol(Locale)): Removed unneeded variable
	and terminate loop early.
	* java/util/Locale.java:
	(getDisplayLanguage(Locale)): Fixed to use
	LocaleNameProvider.
	(getDisplayCountry(Locale)): Likewise.
	(getDisplayVariant(Locale)): Likewise.
	* java/util/spi/LocaleNameProvider.java:
	New file.
	* java/util/spi/TimeZoneNameProvider.java:
	Likewise.
	
2007-01-02  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* gnu/java/locale/LocaleHelper.java:
	(getLocalizedString(Locale,String,String,boolean,
	boolean)): Removed, no longer needed.
	(getFallbackLocale(Locale)): Implemented.
	* java/lang/String.java:
	(isEmpty()): Implemented.
	* java/util/Currency.java:
	(getSymbol(Locale)): Reimplemented to use SPI.
	* java/util/Locale.java:
	(ROOT): Added.
	* java/util/spi/CurrencyNameProvider.java:
	New file.
	* java/util/spi/LocaleServiceProvider.java:
	Likewise.
	* java/util/spi/package.html: Likewise.
	
2007-01-02  Roman Kennke  <roman@kennke.org>

	* gnu/java/awt/java2d/AbstractGraphics2D.java
	(FONT): New constant field. This is the default font to use as long
	as nothing else is set.
	(paintContext): New field. Temporarily stores the paint context.
	(scanlineConverters): New field. Stores the scanline converters
	for each thread.
	(shapeCache): Genericified.
	(STANDARD_HINTS): New constant field. The standard rendering hints
	as long as nothing else is set.
	(STANDARD_STROKE): New constant field. The standard stroke as long
	as nothing else is set.
	(static_initializer): Initialize standard hints.
	(AbstractGraphics2D): Use constant fields for hints and stroke.
	(drawGlyphVector): Use simpler method to draw the outline.
	(fillScanline): Use paintContext field.
	(fillShape): Use new ScanlineConverter to fill shapes.
	(fillShapeAntialias): Removed. This will be done in fillShape.
	(fillShapeImpl): Removed. This is done now in the ScanlineConverter
	class.
	(getScanlineConverter): New method. Returns the scanline converter
	for each thread.
	(getSegments): Removed. This is now implemented in ScanlineConverter.
	(getShapeCache): Use genericified shapeCache field.
	(init): Use fixed default font. Don't fetch destination raster here.
	* gnu/java/awt/java2d/ActiveEdges.java: New class. Stores a set
	of active edges for scanline conversion.
	* gnu/java/awt/java2d/PolyEdge.java
	(poolNext): Implements linked list for edge pool.
	(scanlineNext): Implements linked list for scanline edge lists.
	(slope): Use fixed point decimal.
	(slope,x0,y0,x1,y1,xIntersection): Use fixed point decimal.
	(PolyEdge()): New constructor.
	(PolyEdge): Use fixed point decimals.
	(init): Use fixed point decimals.
	(intersect): New method. Intersects this edge with a scanline.
	* gnu/java/awt/java2d/Scanline.java: New class. A list of edges
	for a scanline plus utilities.
	* gnu/java/awt/java2d/ScanlineConverter.java: New class. Implements
	an efficient scanline converter for rendering Shape objects.

2007-01-02  Roman Kennke  <roman@kennke.org>

	* gnu/java/math/Fixed.java: New class. Fixed point arithmetics
	utilities.

2007-01-01  Andrew John Hughes  <gnu_andrew@member.fsf.org>

	* ChangeLog-2006: New file.
	* gnu/classpath/ServiceFactory.java:
	Add option of throwing a ServiceConfigurationError.
	(lookupProviders(Class,ClassLoader,boolean)): Implemented.
	* java/util/ServiceConfigurationError.java: New file.
	* java/util/ServiceLoader.java: Likewise.
	


Local Variables:
coding: iso-latin-1-unix	
End:
